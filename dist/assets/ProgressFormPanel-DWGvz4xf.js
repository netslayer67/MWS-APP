import{r as m,j as e,m as g,L as k}from"./index-D2rZlo4J.js";import{c as P,n as L}from"./teacherMappingUtils-C7N1X8nf.js";import"./teacherGradeUtils-COfj_G-K.js";import"./shield-check-DZFn7leu.js";const h="px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",f=s=>{if(!s)return[];const a=Array.isArray(s.assignmentOptions)?s.assignmentOptions:[];return a.length?a:s.assignmentId?[{assignmentId:s.assignmentId,focus:s.type||"Focused Support",tier:s.tier||"Tier 1",tierCode:L(s.tier)||"tier1",metricLabel:null}]:[]},j=(s=[])=>{const a=s.filter(r=>r.tierCode&&r.tierCode!=="tier1");return a.length?a:s},O=s=>{const a=s.focus||s.label||"Focused Support",r=s.tier||"Tier 1";return`${a} - ${r}`},S=m.memo(({formState:s,onChange:a,onSubmit:r,baseFieldClass:n,textareaClass:b,students:d=[],submitting:x=!1})=>{const i=m.useMemo(()=>d.find(t=>t.id===s.studentId),[d,s.studentId]),l=m.useMemo(()=>j(f(i)),[i]),v=m.useMemo(()=>l.find(t=>t.assignmentId===s.assignmentId)||l[0],[l,s.assignmentId])?.metricLabel||"score",N=t=>{const o=t.target.value,c=d.find(I=>I.id===o);a("studentId",o),a("studentName",c?.name||"");const u=j(f(c))[0];a("assignmentId",u?.assignmentId||c?.assignmentId||""),a("scoreUnit",u?.metricLabel||"score")},y=t=>{const o=t.target.value;a("assignmentId",o);const c=l.find(p=>p.assignmentId===o);a("scoreUnit",c?.metricLabel||"score")},w=!!(s.studentId&&s.date&&s.scoreValue!=="");return e.jsxs(g.section,{className:"mtss-theme rounded-[32px] border border-white/40 bg-white/90 dark:bg-slate-900/40 shadow-[0_25px_80px_rgba(15,23,42,0.12)] p-6 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("header",{children:[e.jsx("p",{className:"uppercase text-xs tracking-[0.4em] text-muted-foreground",children:"Progress Ping"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Log today's glow"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share check-in data, SEL notes, and small wins to keep the MTSS trail fresh."})]}),e.jsxs("form",{className:"space-y-5",onSubmit:r,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsxs("select",{className:n,value:s.studentId,onChange:N,children:[e.jsx("option",{value:"",children:"Select student"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Grade / Tier"}),e.jsx("div",{className:h,children:i?`${i.grade||"Grade"} - ${i.tier||"Tier 1"}`:"Select a student to view current tier"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Focus Subject"}),e.jsx("select",{className:n,value:s.assignmentId,onChange:y,disabled:!l.length,children:l.length?l.map(t=>e.jsx("option",{value:t.assignmentId,children:O(t)},t.assignmentId)):e.jsx("option",{value:"",children:"Select a student first"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Date of Update"}),e.jsx("input",{type:"date",className:n,value:s.date,onChange:t=>a("date",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Performed?"}),e.jsxs("select",{className:n,value:s.performed,onChange:t=>a("performed",t.target.value),children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Status or Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:`${n} flex-1`,placeholder:"e.g. 72",value:s.scoreValue,onChange:t=>a("scoreValue",t.target.value)}),e.jsx("div",{className:`${h} w-28 flex items-center justify-center font-semibold`,children:v})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Celebration Emoji"}),e.jsxs("select",{className:n,value:s.badge||"ðŸŽ‰ Progress Party",onChange:t=>a("badge",t.target.value),children:[e.jsx("option",{value:"ðŸŽ‰ Progress Party",children:"ðŸŽ‰ Progress Party"}),e.jsx("option",{value:"ðŸŒŸ Stellar Boost",children:"ðŸŒŸ Stellar Boost"}),e.jsx("option",{value:"ðŸŽ¯ Focus Mode",children:"ðŸŽ¯ Focus Mode"}),e.jsx("option",{value:"ðŸ‘ Great Effort",children:"ðŸ‘ Great Effort"}),e.jsx("option",{value:"ðŸ… Milestone Hit",children:"ðŸ… Milestone Hit"}),e.jsx("option",{value:"ðŸ“ˆ Growth Spurt",children:"ðŸ“ˆ Growth Spurt"}),e.jsx("option",{value:"ðŸŒ± Keep Going",children:"ðŸŒ± Keep Going"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes & Observations"}),e.jsx("textarea",{className:b,placeholder:"Describe student's progress, challenges, or celebrations...",value:s.notes,onChange:t=>a("notes",t.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-3",children:[e.jsxs(g.button,{type:"submit",disabled:!w||x,className:"mtss-rainbow-chip mtss-rainbow-chip--emerald inline-flex items-center gap-2 px-5 py-3 text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.97},children:[x?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(P,{className:"w-4 h-4"}),x?"Saving...":"Submit Progress Update"]}),e.jsx("button",{type:"button",className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-muted text-foreground font-semibold",children:"Cancel"})]})]})]})});S.displayName="ProgressFormPanel";export{S as default};
