import{i as Q,a0 as T,I as Oe,k as se,J as Ie,K as ke,M as Be,N as Ee,O as we,P as Se,Q as le,T as je,bm as Ce,u as N,X as ue,L as R,by as De,bz as _e,bA as U,a$ as ce,q as Me,a as ve,Z as Ke,_ as ze,$ as j,a1 as Le,a2 as Ne,a3 as Re,bB as Fe,v as Te,az as Z,x as S,bk as $e,aI as Ge,z as C,A as D,y as _,B as Ve,G as de,H as fe,bC as pe,bD as We,bE as Xe,D as ee,E as Ye,bF as Je,bG as ae,bH as qe,bs as V,a5 as re}from"./CategoricalChart-NGEtxTXn.js";import{r as c,aj as He}from"./index-Z8dj6zX8.js";import{S as Qe,C as Ue,u as me,a as he,b as ye}from"./tooltipContext-BKBX-INr.js";import{S as Ze}from"./ErrorBarContext-DoFmM-hP.js";import{a as ea,G as aa}from"./CartesianChart-LHS8SAXk.js";var ra="Invariant failed";function ta(e,a){throw new Error(ra)}var na=["x","y"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},W.apply(null,arguments)}function te(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function M(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?te(Object(r),!0).forEach(function(t){ia(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ia(e,a,r){return(a=oa(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function oa(e){var a=sa(e,"string");return typeof a=="symbol"?a:a+""}function sa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function la(e,a){if(e==null)return{};var r,t,i=ua(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ua(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function ca(e,a){var{x:r,y:t}=e,i=la(e,na),n="".concat(r),o=parseInt(n,10),l="".concat(t),d=parseInt(l,10),s="".concat(a.height||i.height),u=parseInt(s,10),v="".concat(a.width||i.width),m=parseInt(v,10);return M(M(M(M(M({},a),i),o?{x:o}:{}),d?{y:d}:{}),{},{height:u,width:m,name:a.name,radius:a.radius})}function X(e){return c.createElement(Qe,W({shapeType:"rectangle",propTransformer:ca,activeClassName:"recharts-active-bar"},e))}var va=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(t,i)=>{if(Q(a))return a;var n=Q(t)||T(t);return n?a(t,i):(n||ta(),r)}},da=["onMouseEnter","onMouseLeave","onClick"],fa=["value","background","tooltipPosition"],pa=["id"],ma=["onMouseEnter","onClick","onMouseLeave"];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},w.apply(null,arguments)}function ne(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function I(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ne(Object(r),!0).forEach(function(t){ha(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ha(e,a,r){return(a=ya(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ya(e){var a=ba(e,"string");return typeof a=="symbol"?a:a+""}function ba(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function F(e,a){if(e==null)return{};var r,t,i=ga(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ga(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var xa=e=>{var{dataKey:a,name:r,fill:t,legendType:i,hide:n}=e;return[{inactive:n,dataKey:a,type:i,color:t,value:le(r,a),payload:e}]};function Pa(e){var{dataKey:a,stroke:r,strokeWidth:t,fill:i,name:n,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:t,fill:i,dataKey:a,nameKey:void 0,name:le(n,a),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function Aa(e){var a=N(ce),{data:r,dataKey:t,background:i,allOtherBarProps:n}=e,{onMouseEnter:o,onMouseLeave:l,onClick:d}=n,s=F(n,da),u=me(o,t),v=he(l),m=ye(d,t);if(!i||r==null)return null;var g=Me(i,!1);return c.createElement(c.Fragment,null,r.map((x,h)=>{var{value:f,background:p,tooltipPosition:b}=x,P=F(x,fa);if(!p)return null;var y=u(x,h),k=v(x,h),O=m(x,h),A=I(I(I(I(I({option:i,isActive:String(h)===a},P),{},{fill:"#eee"},p),g),ve(s,x,h)),{},{onMouseEnter:y,onMouseLeave:k,onClick:O,dataKey:t,index:h,className:"recharts-bar-background-rectangle"});return c.createElement(X,w({key:"background-bar-".concat(A.index)},A))}))}function Oa(e){var{showLabels:a,children:r,rects:t}=e,i=t?.map(n=>{var o={x:n.x,y:n.y,width:n.width,height:n.height};return I(I({},o),{},{value:n.value,payload:n.payload,parentViewBox:n.parentViewBox,viewBox:o,fill:n.fill})});return c.createElement(Ne,{value:a?i:void 0},r)}function Ia(e){var{shape:a,activeBar:r,baseProps:t,entry:i,index:n,dataKey:o}=e,l=N(ce),d=N(Fe),s=r&&String(n)===l&&(d==null||o===d),u=s?r:a;return c.createElement(X,w({},t,i,{isActive:s,option:u,index:n,dataKey:o}))}function ka(e){var{shape:a,baseProps:r,entry:t,index:i,dataKey:n}=e;return c.createElement(X,w({},r,t,{isActive:!1,option:a,index:i,dataKey:n}))}function Ba(e){var{data:a,props:r}=e,t=Re(r),{id:i}=t,n=F(t,pa),{shape:o,dataKey:l,activeBar:d}=r,{onMouseEnter:s,onClick:u,onMouseLeave:v}=r,m=F(r,ma),g=me(s,l),x=he(v),h=ye(u,l);return a?c.createElement(c.Fragment,null,a.map((f,p)=>c.createElement(R,w({className:"recharts-bar-rectangle"},ve(m,f,p),{onMouseEnter:g(f,p),onMouseLeave:x(f,p),onClick:h(f,p),key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),d?c.createElement(Ia,{shape:o,activeBar:d,baseProps:n,entry:f,index:p,dataKey:l}):c.createElement(ka,{shape:o,baseProps:n,entry:f,index:p,dataKey:l})))):null}function Ea(e){var{props:a,previousRectanglesRef:r}=e,{data:t,layout:i,isAnimationActive:n,animationBegin:o,animationDuration:l,animationEasing:d,onAnimationEnd:s,onAnimationStart:u}=a,v=r.current,m=Ke(a,"recharts-bar-"),[g,x]=c.useState(!1),h=!g,f=c.useCallback(()=>{typeof s=="function"&&s(),x(!1)},[s]),p=c.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return c.createElement(Oa,{showLabels:h,rects:t},c.createElement(ze,{animationId:m,begin:o,duration:l,isActive:n,easing:d,onAnimationEnd:f,onAnimationStart:p,key:m},b=>{var P=b===1?t:t?.map((y,k)=>{var O=v&&v[k];if(O)return I(I({},y),{},{x:j(O.x,y.x,b),y:j(O.y,y.y,b),width:j(O.width,y.width,b),height:j(O.height,y.height,b)});if(i==="horizontal"){var A=j(0,y.height,b);return I(I({},y),{},{y:y.y+y.height-A,height:A})}var B=j(0,y.width,b);return I(I({},y),{},{width:B})});return b>0&&(r.current=P??null),P==null?null:c.createElement(R,null,c.createElement(Ba,{props:a,data:P}))}),c.createElement(Le,{label:a.label}),a.children)}function wa(e){var a=c.useRef(null);return c.createElement(Ea,{previousRectanglesRef:a,props:e})}var be=0,Sa=(e,a)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ue(e,a)}};class ja extends c.PureComponent{render(){var{hide:a,data:r,dataKey:t,className:i,xAxisId:n,yAxisId:o,needClip:l,background:d,id:s}=this.props;if(a||r==null)return null;var u=He("recharts-bar",i),v=s;return c.createElement(R,{className:u,id:s},l&&c.createElement("defs",null,c.createElement(aa,{clipPathId:v,xAxisId:n,yAxisId:o})),c.createElement(R,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(v,")"):void 0},c.createElement(Aa,{data:r,dataKey:t,background:d,allOtherBarProps:this.props}),c.createElement(wa,this.props)))}}var Ca={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Se.isSsr,legendType:"rect",minPointSize:be,xAxisId:0,yAxisId:0};function Da(e){var{xAxisId:a,yAxisId:r,hide:t,legendType:i,minPointSize:n,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:s,isAnimationActive:u}=e,{needClip:v}=ea(a,r),m=je(),g=se(),x=Ce(e.children,Ue),h=N(b=>sr(b,a,r,g,e.id,x));if(m!=="vertical"&&m!=="horizontal")return null;var f,p=h?.[0];return p==null||p.height==null||p.width==null?f=0:f=m==="vertical"?p.height/2:p.width/2,c.createElement(Ze,{xAxisId:a,yAxisId:r,data:h,dataPointFormatter:Sa,errorBarOffset:f},c.createElement(ja,w({},e,{layout:m,needClip:v,data:h,xAxisId:a,yAxisId:r,hide:t,legendType:i,minPointSize:n,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:s,isAnimationActive:u})))}function _a(e){var{layout:a,barSettings:{dataKey:r,minPointSize:t},pos:i,bandSize:n,xAxis:o,yAxis:l,xAxisTicks:d,yAxisTicks:s,stackedData:u,displayedData:v,offset:m,cells:g,parentViewBox:x}=e,h=a==="horizontal"?l:o,f=u?h.scale.domain():null,p=De({numericAxis:h});return v.map((b,P)=>{var y,k,O,A,B,$;u?y=_e(u[P],f):(y=ue(b,r),Array.isArray(y)||(y=[p,y]));var E=va(t,be)(y[1],P);if(a==="horizontal"){var G,[Y,z]=[l.scale(y[0]),l.scale(y[1])];k=U({axis:o,ticks:d,bandSize:n,offset:i.offset,entry:b,index:P}),O=(G=z??Y)!==null&&G!==void 0?G:void 0,A=i.size;var J=Y-z;if(B=Te(J)?0:J,$={x:k,y:m.top,width:A,height:m.height},Math.abs(E)>0&&Math.abs(B)<Math.abs(E)){var q=Z(B||E)*(Math.abs(E)-Math.abs(B));O-=q,B+=q}}else{var[H,xe]=[o.scale(y[0]),o.scale(y[1])];if(k=H,O=U({axis:l,ticks:s,bandSize:n,offset:i.offset,entry:b,index:P}),A=xe-H,B=i.size,$={x:m.left,y:O,width:m.width,height:B},Math.abs(E)>0&&Math.abs(A)<Math.abs(E)){var Pe=Z(A||E)*(Math.abs(E)-Math.abs(A));A+=Pe}}if(k==null||O==null||A==null||B==null)return null;var Ae=I(I({},b),{},{x:k,y:O,width:A,height:B,value:u?y:y[1],payload:b,background:$,tooltipPosition:{x:k+A/2,y:O+B/2},parentViewBox:x},g&&g[P]&&g[P].props);return Ae}).filter(Boolean)}function Ma(e){var a=Oe(e,Ca),r=se();return c.createElement(Ie,{id:a.id,type:"bar"},t=>c.createElement(c.Fragment,null,c.createElement(ke,{legendPayload:xa(a)}),c.createElement(Be,{fn:Pa,args:a}),c.createElement(Ee,{type:"bar",id:t,data:void 0,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,stackId:we(a.stackId),hide:a.hide,barSize:a.barSize,minPointSize:a.minPointSize,maxBarSize:a.maxBarSize,isPanorama:r}),c.createElement(Da,w({},a,{id:t}))))}var Ka=c.memo(Ma);Ka.displayName="Bar";function ie(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function L(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ie(Object(r),!0).forEach(function(t){za(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function za(e,a,r){return(a=La(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function La(e){var a=Na(e,"string");return typeof a=="symbol"?a:a+""}function Na(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Ra=(e,a)=>a,Fa=(e,a,r)=>r,Ta=(e,a,r,t)=>t,$a=(e,a,r,t,i)=>i,K=S([fe,$a],(e,a)=>e.filter(r=>r.type==="bar").find(r=>r.id===a)),Ga=S([K],e=>e?.maxBarSize),Va=(e,a,r,t,i,n)=>n,oe=(e,a,r)=>{var t=r??e;if(!T(t))return V(t,a,0)},Wa=S([_,fe,Ra,Fa,Ta],(e,a,r,t,i)=>a.filter(n=>e==="horizontal"?n.xAxisId===r:n.yAxisId===t).filter(n=>n.isPanorama===i).filter(n=>n.hide===!1).filter(n=>n.type==="bar")),Xa=(e,a,r,t)=>{var i=_(e);return i==="horizontal"?ee(e,"yAxis",r,t):ee(e,"xAxis",a,t)},Ya=(e,a,r)=>{var t=_(e);return t==="horizontal"?ae(e,"xAxis",a):ae(e,"yAxis",r)},Ja=(e,a,r)=>{var t={},i=e.filter(qe),n=e.filter(s=>s.stackId==null),o=i.reduce((s,u)=>(s[u.stackId]||(s[u.stackId]=[]),s[u.stackId].push(u),s),t),l=Object.entries(o).map(s=>{var[u,v]=s,m=v.map(x=>x.dataKey),g=oe(a,r,v[0].barSize);return{stackId:u,dataKeys:m,barSize:g}}),d=n.map(s=>{var u=[s.dataKey].filter(m=>m!=null),v=oe(a,r,s.barSize);return{stackId:void 0,dataKeys:u,barSize:v}});return[...l,...d]},qa=S([Wa,Je,Ya],Ja),Ha=(e,a,r,t,i)=>{var n,o,l=K(e,a,r,t,i);if(l!=null){var d=_(e),s=pe(e),{maxBarSize:u}=l,v=T(u)?s:u,m,g;return d==="horizontal"?(m=C(e,"xAxis",a,t),g=D(e,"xAxis",a,t)):(m=C(e,"yAxis",r,t),g=D(e,"yAxis",r,t)),(n=(o=de(m,g,!0))!==null&&o!==void 0?o:v)!==null&&n!==void 0?n:0}},ge=(e,a,r,t)=>{var i=_(e),n,o;return i==="horizontal"?(n=C(e,"xAxis",a,t),o=D(e,"xAxis",a,t)):(n=C(e,"yAxis",r,t),o=D(e,"yAxis",r,t)),de(n,o)};function Qa(e,a,r,t,i){var n=t.length;if(!(n<1)){var o=V(e,r,0,!0),l,d=[];if(re(t[0].barSize)){var s=!1,u=r/n,v=t.reduce((p,b)=>p+(b.barSize||0),0);v+=(n-1)*o,v>=r&&(v-=(n-1)*o,o=0),v>=r&&u>0&&(s=!0,u*=.9,v=n*u);var m=(r-v)/2>>0,g={offset:m-o,size:0};l=t.reduce((p,b)=>{var P,y={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:g.offset+g.size+o,size:s?u:(P=b.barSize)!==null&&P!==void 0?P:0}},k=[...p,y];return g=k[k.length-1].position,k},d)}else{var x=V(a,r,0,!0);r-2*x-(n-1)*o<=0&&(o=0);var h=(r-2*x-(n-1)*o)/n;h>1&&(h>>=0);var f=re(i)?Math.min(h,i):h;l=t.reduce((p,b,P)=>[...p,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:x+(h+o)*P+(h-f)/2,size:f}}],d)}return l}}var Ua=(e,a,r,t,i,n,o)=>{var l=T(o)?a:o,d=Qa(r,t,i!==n?i:n,e,l);return i!==n&&d!=null&&(d=d.map(s=>L(L({},s),{},{position:L(L({},s.position),{},{offset:s.position.offset-i/2})}))),d},Za=S([qa,pe,We,Xe,Ha,ge,Ga],Ua),er=(e,a,r,t)=>C(e,"xAxis",a,t),ar=(e,a,r,t)=>C(e,"yAxis",r,t),rr=(e,a,r,t)=>D(e,"xAxis",a,t),tr=(e,a,r,t)=>D(e,"yAxis",r,t),nr=S([Za,K],(e,a)=>{if(!(e==null||a==null)){var r=e.find(t=>t.stackId===a.stackId&&a.dataKey!=null&&t.dataKeys.includes(a.dataKey));if(r!=null)return r.position}}),ir=(e,a)=>{var r=Ye(a);if(!(!e||r==null||a==null)){var{stackId:t}=a;if(t!=null){var i=e[t];if(i){var{stackedData:n}=i;if(n)return n.find(o=>o.key===r)}}}},or=S([Xa,K],ir),sr=S([$e,Ge,er,ar,rr,tr,nr,_,Ve,ge,or,K,Va],(e,a,r,t,i,n,o,l,d,s,u,v,m)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:h}=d;if(!(v==null||o==null||a==null||l!=="horizontal"&&l!=="vertical"||r==null||t==null||i==null||n==null||s==null)){var{data:f}=v,p;if(f!=null&&f.length>0?p=f:p=g?.slice(x,h+1),p!=null)return _a({layout:l,barSettings:v,pos:o,parentViewBox:a,bandSize:s,xAxis:r,yAxis:t,xAxisTicks:i,yAxisTicks:n,stackedData:u,displayedData:p,offset:e,cells:m})}});export{Ka as B};
