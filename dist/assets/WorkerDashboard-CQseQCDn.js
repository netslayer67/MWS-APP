import{c as X,j as e,e as C,b as Z,u as ee,a as te,r as s,d as B,W as se,f as ae,H as ne,m as L,g as ie,s as re,R as oe}from"./index-C96WXriC.js";import{B as E}from"./button-B2q69ZSZ.js";import{K as le}from"./KYCStatusBanner-Bo_2D9Bn.js";import{A as ce}from"./AnimatedPage-BiOSErwt.js";import{J as de}from"./JobCard-ByTLH4rS.js";import{N as me}from"./NegotiationModal-goQEHTIn.js";import{D as ue}from"./DepositSheet-BqQSptYB.js";import{E as pe}from"./EmptyState-CauibNHb.js";import{C as xe}from"./circle-check-rB70V139.js";import{C as fe}from"./clock-CWBDwclV.js";import"./shield-check-BQT1pw0g.js";import"./info-D5z3tZSe.js";import"./tag-BWrq9LkH.js";import"./calendar-DUd7nppF.js";import"./map-pin-BVZZ6dMW.js";import"./paperclip-BVJwzg3L.js";import"./circle-alert-BrInvySm.js";import"./arrow-right-C-VBOYAz.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],he=X("power",be);function ge({options:d=[],value:n,onChange:m,className:i="",size:N="md"}){const r=N==="sm";return e.jsx("div",{role:"tablist","aria-label":"Filter",className:C("inline-flex w-full items-center gap-2 rounded-2xl bg-card/50 p-1 backdrop-blur-md ring-1 ring-border",i),children:d.map(l=>{const h=l.key===n,g=l.icon;return e.jsx("button",{type:"button",role:"tab","aria-selected":h,onClick:()=>m?.(l.key),className:C("flex-1 rounded-xl px-3 py-1.5 font-medium transition-colors duration-300 hover:bg-card/60 hover:text-foreground",r?"text-xs":"text-sm",h?"bg-accent text-accent-foreground shadow":"text-muted-foreground"),children:e.jsxs("span",{className:"inline-flex items-center justify-center gap-1.5",children:[g?e.jsx(g,{className:C(r?"h-3.5 w-3.5":"h-4 w-4")}):null,e.jsx("span",{children:l.label})]})},l.key)})})}function je({rows:d=3,className:n=""}){return e.jsx("div",{className:`space-y-3 ${n}`,children:Array.from({length:d}).map((m,i)=>e.jsx("div",{className:"h-16 rounded-2xl border border-border/30 bg-card/30 backdrop-blur animate-pulse"},i))})}const w=[{id:1,title:"Beli Kopi Cepat",type:"onsite",description:"Ambil kopi di kedai depan komplek dan antar ke rumah.",client:"Budi S.",distance:"500 m",fee:15e3,feeLabel:"Rp 15.000",time:"10 menit",paymentMethod:"cash",attachments:[]},{id:2,title:"Desain Brosur Produk",type:"remote",description:"Desain brosur A4, 2 konsep draft. Final PDF & AI.",client:"Siti R.",distance:null,fee:2e5,feeLabel:"Rp 200.000",time:"2 hari",paymentMethod:"wallet",attachments:["brand-guideline.pdf"]}],S=({children:d,className:n=""})=>e.jsx("div",{className:`glass-strong rounded-2xl p-3 transition-all duration-320 ${n}`,children:d}),ke=oe.memo(function({label:n,value:m,icon:i}){return e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"rounded-lg p-1.5 sm:p-2 border border-border/40 bg-background/40",children:e.jsx(i,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-accent","aria-hidden":!0})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase text-muted-foreground",children:n}),e.jsx("p",{className:"text-sm sm:text-base font-semibold",children:m})]})]})})});function Ne({count:d=3}){return e.jsx(je,{rows:d})}function $e(){const d=Z(),{toast:n}=ee(),m=te(),[i,N]=s.useState(!1),[r,l]=s.useState([]),[h,g]=s.useState(1e3),[M,F]=s.useState(""),[x,j]=s.useState(!1),[I,$]=s.useState("L1"),[f,z]=s.useState("all"),[K,b]=s.useState(!1),[y,O]=s.useState({amount:0,jobId:null}),[c,D]=s.useState(null),[W,k]=s.useState({}),J=s.useRef(null),_=s.useMemo(()=>[{label:"Tersedia",value:r.length,icon:B},{label:"Saldo",value:ae(583500),icon:se},{label:"Selesai",value:128,icon:xe},{label:"Aktif",value:3,icon:fe}],[r]),v=s.useMemo(()=>f==="onsite"?r.filter(t=>t.type==="onsite"):f==="remote"?r.filter(t=>t.type==="remote"):r,[r,f]),H=s.useCallback(()=>{N(t=>!t),i?(n({title:"Offline",description:"Berhenti menerima tugas.",variant:"destructive"}),l([])):(j(!0),n({title:"Online",description:"Mencari pekerjaan..."}),setTimeout(()=>{l(w),j(!1),setTimeout(()=>J.current?.scrollTo?.({top:0,behavior:"smooth"}),80)},700))},[i,n]),R=s.useCallback(t=>{const a=r.find(o=>o.id===t);l(o=>o.filter(p=>p.id!==t)),n({title:"Job diterima",description:"Mulai kerjakan sekarang."}),a&&(a.paymentMethod==="cash"&&Number(a.fee||0)>=3e5?(O({amount:a.fee,jobId:a.id}),b(!0)):setTimeout(()=>m(`/job/${a.id}/track`),10))},[r,n,m]),A=s.useCallback(t=>{l(a=>a.filter(o=>o.id!==t)),n({title:"Job ditolak",description:"Job dihapus dari daftar."})},[n]),T=s.useCallback(t=>{D(t),k(a=>({...a,[t.id]:a[t.id]||[]}))},[]),V=s.useCallback(()=>D(null),[]),Y=s.useCallback((t,a,o)=>{k(p=>{const u=p[t]||[],Q={ts:Date.now(),from:a,amount:o,status:"pending"};return{...p,[t]:[Q,...u]}})},[]),G=s.useCallback((t,a)=>{k(o=>{const p=(o[t]||[]).map(u=>u.ts===a?{...u,status:"accepted"}:u);return{...o,[t]:p}}),n({title:"Penawaran diterima",description:"Dana dikunci (demo escrow)."})},[n]),U=s.useCallback((t,a)=>{k(o=>{const p=(o[t]||[]).map(u=>u.ts===a?{...u,status:"rejected"}:u);return{...o,[t]:p}})},[]);s.useEffect(()=>{if(i&&r.length===0&&!x){j(!0);const t=setTimeout(()=>{l(w),j(!1)},800);return()=>clearTimeout(t)}},[i,r.length,x]);const P=d?{initial:{},animate:{}}:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.32,ease:"easeOut"}},q=s.useMemo(()=>x?e.jsx(Ne,{count:3}):r.length?e.jsx("div",{className:"space-y-3",children:v.map(t=>e.jsx(de,{role:"worker",job:t,visible:!0,onClose:()=>A(t.id),onAcceptClick:()=>R(t.id),onNegotiationClick:a=>T(a)},t.id))}):e.jsx(pe,{icon:e.jsx(B,{className:"h-5 w-5"}),title:"Belum ada job terdekat",subtitle:"Aktifkan Online atau perbesar radius.",action:e.jsx(E,{size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90 transition duration-320",onClick:()=>{l(w),n({title:"Demo job",description:"Job simulasi ditambahkan."})},children:"Cari Job"})}),[v,r.length,x,R,A,T,n,f]);return e.jsxs(ce,{children:[e.jsx(ne,{children:e.jsx("title",{children:"Dashboard Pekerja — Kerjain"})}),e.jsxs("div",{className:"relative min-h-dvh w-full px-3 sm:px-4 py-4 sm:py-5",children:[e.jsxs(L.div,{...P,className:"mx-auto max-w-md space-y-3 sm:space-y-4",children:[e.jsx(le,{tier:I,onVerify:()=>$("L2"),className:"mb-2"}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-start justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:`h-3 w-3 sm:h-3.5 sm:w-3.5 rounded-full ring-2 ring-background/30 ${i?"bg-accent":"bg-muted"}`,"aria-hidden":!0}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm sm:text-base font-semibold",children:["Halo, ",e.jsx("span",{className:"text-accent",children:"Pekerja"})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-0.5",children:i?"Online — siap kerja":"Offline — tidak aktif"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1.5 sm:gap-2",children:[e.jsx("label",{htmlFor:"radius",className:"text-[10px] sm:text-[11px] text-muted-foreground",children:"Radius (m)"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("input",{id:"radius",type:"number",min:100,max:5e4,step:100,value:h,onChange:t=>g(ie(String(t.target.value).replace(/\D/g,""),100,5e4,1e3)),className:"w-20 sm:w-24 rounded-full border border-border/40 bg-background/40 px-2.5 py-1.5 text-[11px] sm:text-xs placeholder:text-muted-foreground focus:ring-2 focus:ring-accent transition duration-320","aria-label":"Radius pencarian pekerjaan dalam meter"}),e.jsxs(E,{size:"sm",onClick:H,className:`flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-1.5 rounded-full font-medium text-[11px] sm:text-xs transition-colors duration-320 ${i?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-accent text-accent-foreground hover:bg-accent/90"}`,"aria-pressed":i,"aria-label":i?"Matikan status online":"Aktifkan status online",children:[e.jsx(he,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{children:i?"Offline":"Online"})]})]})]})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-[11px] sm:text-xs font-medium",children:"Catatan ketersediaan"}),e.jsxs("span",{className:"text-[10px] sm:text-[11px] text-muted-foreground",children:[M.length,"/140"]})]}),e.jsx("textarea",{rows:2,value:M,onChange:t=>F(re(t.target.value,140)),placeholder:"Contoh: Siap antar Tebet, jam 10–14",maxLength:140,className:"mt-2 w-full resize-none rounded-md border border-border/40 bg-background/40 px-2.5 sm:px-3 py-1.5 sm:py-2 text-[11px] sm:text-sm placeholder:text-muted-foreground focus:ring-2 focus:ring-accent transition duration-320","aria-label":"Catatan ketersediaan"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:_.map(t=>e.jsx(ke,{...t},t.label))})]}),e.jsxs(L.div,{...P,className:"mx-auto max-w-md mt-4 sm:mt-5",ref:J,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.jsx("h2",{className:"text-[12px] sm:text-sm font-semibold",children:"Job Tersedia"}),x?e.jsx("span",{className:"text-[11px] sm:text-[12px] text-muted-foreground",children:"Memuat…"}):e.jsxs("span",{className:"text-[11px] sm:text-[12px] text-muted-foreground",children:[v.length," job"]})]}),e.jsx(ge,{value:f,onChange:z,size:"sm",options:[{key:"all",label:"Semua"},{key:"onsite",label:"Onsite"},{key:"remote",label:"Remote"}],className:"mb-2"}),q]}),c&&e.jsx(me,{role:"worker",job:c,isOpen:!!c,onClose:V,initialOffers:W[c.id]||[],onSendOffer:t=>Y(c.id,"worker",t),onAccept:t=>{G(c.id,t.ts);const a=t?.amount??c.fee;c.paymentMethod==="cash"&&Number(a||0)>=3e5&&(O({amount:a,jobId:c.id}),b(!0))},onReject:t=>U(c.id,t.ts),jobFee:c.fee}),e.jsx(ue,{open:K,onOpenChange:b,amount:y.amount,onWallet:()=>{b(!1),m("/wallet")},onContinue:()=>{b(!1),y.jobId&&m(`/job/${y.jobId}/track`)}})]})]})}export{$e as default};
