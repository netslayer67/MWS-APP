const f=.7142857142857143,m={today:1,week:5,month:20,semester:88,all:20},g=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},h=t=>t?t instanceof Date||typeof t=="string"||typeof t=="number"?t:t.date||t.day||t.timestamp||t.periodDay||t.period_date||t.calendarDate||t.checkinDate||null:null,p=(t=[])=>{if(!Array.isArray(t)||!t.length)return 0;const e=new Set;return t.forEach(r=>{const n=h(r),o=g(n);if(!o)return;const a=o.getDay();a===0||a===6||e.add(o.toDateString())}),e.size},A=(t=[],e=0,r="today")=>{const n=p(t);return n>0?n:Array.isArray(t)&&t.length>0?t.length:e?Math.max(1,Math.round(e*f)):m[r]||1},D=t=>typeof t!="number"||!Number.isFinite(t)?"0":t.toLocaleString("en-US"),S=(t={},e="today")=>{if(!t)return null;const r=t.totalUsers||0,n=t.totalCheckins||0,o=Array.isArray(t.periodTimeline)?t.periodTimeline:[],a=t.periodLengthDays||o.length||0,i=Math.max(A(o,a,e),1),s=r*i,d=s>0?Math.min(100,Math.round(n/s*100)):0,u=Array.isArray(t.notSubmittedUsers)?t.notSubmittedUsers:[],c=u.length||Math.max(0,r-Math.round(n/i)),l=Array.isArray(t.flaggedUsers)?t.flaggedUsers.length:t.flaggedUsersCount||0;return{totalUsers:r,totalCheckins:n,participationRate:d,workdayCount:i,expectedSubmissions:s,notSubmittedUsers:u,notSubmittedCount:c,flaggedUsersCount:l,period:e,lastUpdated:t.updatedAt||t.lastUpdated||null}};export{S as b,A as c,D as f};
