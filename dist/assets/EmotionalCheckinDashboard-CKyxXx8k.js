const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PrimaryNavButtons-BDwoqL8Q.js","assets/index-BbI_y0ug.js","assets/index-dKQWqH-A.css","assets/target-CyBq9pLt.js","assets/DashboardHeader-BfY_FAk7.js","assets/socketService-DK54WtJ1.js","assets/funnel-Dsb3vCJN.js","assets/users-DkG0Ga2y.js","assets/building-CNv5a0EY.js","assets/StatsGrid-CgMy8Z6E.js","assets/ContentSections-D1_j7NCH.js","assets/DecorativeElements-L5aP1uxx.js","assets/PerformanceMonitor-BiQ_Q3nJ.js"])))=>i.map(i=>d[i]);
import{c as U,r as s,j as e,X as _,G as O,C as F,a as L,b as K,d as A,I as D,J as j,K as W,N as q,_ as N}from"./index-BbI_y0ug.js";import{s as h}from"./socketService-DK54WtJ1.js";import{F as B}from"./funnel-Dsb3vCJN.js";import{U as V}from"./users-DkG0Ga2y.js";import{B as G}from"./building-CNv5a0EY.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$=U("triangle-alert",J),Y={today:{totalCheckins:65,averagePresence:7.1,averageCapacity:6.7,moodDistribution:{happy:18,excited:16,calm:12,hopeful:8,sad:2,anxious:8,angry:0,fear:1,tired:15,hungry:9,lonely:5,bored:0,overwhelmed:1,scattered:3},moodLists:{overwhelmed:["Nayandra Hasan Sudra"],fear:["Kholida Widyawati, S.Sos, MA","Nayandra Hasan Sudra"],hungry:["Fadholi Akbar","Reza Rizky Prayudha","Iis Asifah","belum sarapan","Tri Ayu Lestari","Bela Kartika Sari","Robby Noer Abjuny","Ika Rahayu","Chantika Nur Febryanti, S.Pd.","Derry Parmanto, S.S"],excited:["Muhammad Rayhan Ananta","Abdullah, SE, MM","Nur Muhamad Ismail","Alifananda Dhaffa Hanif Musyafa, S.Pd","Novia Syifaputri Ramadhan","Rifqi Satria Permana, S.Pd","Faisal Nur Hidayat","Galen Rasendriya","Ari Wibowo","Adiya Herisa","Mukron","Tria Fadilla","Tiastiningrum Nugrahanti, S.Pd","Hana Nuzula Fajria, S.Pd","Ferlyna Balqis","Irawan","Andrean Hadinata, S.Sos","Derry Parmanto, S.S"],happy:["Muhammad Rayhan Ananta","Tien Hadiningsih, S.S","Romasta Oryza Sativa Siagian, S.Pd","Reza Rizky Prayudha","Abdullah, SE, MM","Novia Syifaputri Ramadhan","Nazmi Kusumawantari","Rifqi Satria Permana, S.Pd","Faisal Nur Hidayat","Risma Galuh Pitaloka Fahdin","Nanda Citra Ryani, S.IP","Ari Wibowo","Adiya Herisa","Hana Nuzula Fajria, S.Pd","Abu Bakar Ali, S.Sos I"],anxious:["Adibah Hana Widjaya","Farhah Alya Nabilah","Prisy Dewanti","Annisa Fitri Tanjung","Maria Rosa Apriliana Jaftoran","Ferlyna Balqis","Nayandra Hasan Sudra","Hadi"],sad:["Almia Ester Kristiyany Sinabang, S.Pd","Himawan Rizky Syaputra"],hopeful:["Azalia Magdalena Septianti Tambi","Zavier Cloudya Mashareen, S.Psi","Bela Kartika Sari","Ari Wibowo","Muhammad Fathan Qorib","Tiastiningrum Nugrahanti, S.Pd","Hana Nuzula Fajria, S.Pd","Ferlyna Balqis","Vicki Aprinando"],lonely:["Fayza Julia Pramesti Hapsari Prayoga","Tri Ayu Lestari","Nadia","Nathasya Christine Prabowo, S.Si"],scattered:["Fayza Julia Pramesti Hapsari Prayoga","Kholida Widyawati, S.Sos, MA","Nayandra Hasan Sudra"],tired:["Adibah Hana Widjaya","Ratna Merlangen","Farhah Alya Nabilah","Novan Syaiful Rahman","Fadholi Akbar","Fayza Julia Pramesti Hapsari Prayoga","Dien Islami","Robby Noer Abjuny","Rizki Nurul Hayati,","Robby Anggara","Muhammad Farhan Sholeh Ramadhika","Faqiha Salma Achmada S.Psi.","Shahrani Fatimah Azzahrah","Nayandra Hasan Sudra","Krisalyssa Esna Rehulina Tarigan, S.K.Pm","Nathasya Christine Prabowo, S.Si"],calm:["Sarah Yuliana, SE","Muhammad Rayhan Ananta","Himawan Rizky Syaputra","Ni Made Ayu Juwitasari","Abdullah, SE, MM","Diya Pratiwi, S.S","Faisal Nur Hidayat","Aria Wisnuwardana, S.TP","Nanda Citra Ryani, S.IP","Faqiha Salma Achmada S.Psi.","Shahrani Fatimah Azzahrah","Muhammad Gibran Al Wali","Hana Nuzula Fajria, S.Pd","Susantika Nilasari","Anggie Ayu Setya Pradini, S.Pd"]},internalWeather:{sunny:25,cloudy:15,rain:12,storm:8,tornado:3,snow:2},checkInRequests:[{contact:"Pak Faisal",requestedBy:"Muhammad Rayhan Ananta"},{contact:"Ms. Kholida",requestedBy:"Abdullah, SE, MM"}],notSubmitted:["Aaliyah Haider Awesi","Abdul Mansyur","Afiyanti Hardiansari","Ahmad Haikal","Ardiansyah","Auliya Hasanatin Suwisto, S.IKom","Ayunda Primaputri","Berliana Gustina Siregar","Dara Kinanti, A.Md,OT","Delfiana Salsabila Komara","Devi Agriani, S.Pd.","Devi Larasati","Dina","Dini Meilani Pramesti","Dona","Erickson, SM","Fransiska Evasari, S.Pd","Gundah Basiswi, S.Pd","Khairul Anwar","Krisalyssa Esna Rehulina Tarigan, S.K.P.M.","Kurnia Sandi","Latifah Nur Restiningtyas, S.Pd","Mahrukh Bashir","Nilam Kusuma Wardani","Nopi Puji Astuti","Nurul Widyaningtyas Agustin","Pipiet Anggreiny, S.TP","Pricilla Cecil Leander, S.Pd","Putri Fitriyani, S.Pd","Raisa Ramadhani","Restia Widiasari","Rico Pratama Putra, Ph.D.","Rike Rahmawati S.Pd","Risma Ayu Angelita","Rizki Nurul Hayati","Robiatul Adawiah","Rohmatulloh","Salsabila Dhiyaussyifa Laela","Sendy Herdiansyah, S.S","Syawaludin","Udom Anatapong","Usep Saefurohman","Vinka Erawati, S.Pd","Yohana Setia Risli, S.S","Yosafat Imanuel Parlindungan, S.Sn","Zolla Firmalia Rossa, S.Pd."],thoughts:[{author:"Muhammad Rayhan Ananta",timestamp:"2 hours ago",content:"Feeling energized today! The team meeting went really well and I'm excited about the new projects coming up."},{author:"Abdullah, SE, MM",timestamp:"4 hours ago",content:"Had a challenging meeting this morning but feeling supported by the team. Grateful for the collaborative environment."},{author:"Hana Nuzula Fajria, S.Pd",timestamp:"6 hours ago",content:"A bit overwhelmed with the workload today, but taking it one step at a time. The support from colleagues helps a lot."},{author:"Tiastiningrum Nugrahanti, S.Pd",timestamp:"8 hours ago",content:"Reflecting on a productive week. Feeling hopeful about the positive changes we're implementing for our students."}]},weekly:[{day:"Mon",checkins:25,flagged:2},{day:"Tue",checkins:28,flagged:1},{day:"Wed",checkins:22,flagged:4},{day:"Thu",checkins:30,flagged:2},{day:"Fri",checkins:26,flagged:3},{day:"Sat",checkins:15,flagged:1},{day:"Sun",checkins:18,flagged:2}]},le={happy:{Icon:null,color:"emerald"},excited:{Icon:null,color:"gold"},okay:{Icon:null,color:"muted"},sad:{Icon:null,color:"primary"}},ne=[{id:"today",label:"Today"},{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"semester",label:"Semester"},{id:"all",label:"All Data"}],M=s.memo(({onFiltersChange:m,currentFilters:l={}})=>{const[o,r]=s.useState(!1),[c,p]=s.useState(l),y=[{value:"student",label:"Students"},{value:"staff",label:"Staff"},{value:"teacher",label:"Teachers"},{value:"admin",label:"Admins"},{value:"directorate",label:"Directorate"}],d=[{value:"Academic",label:"Academic"},{value:"Student Affairs",label:"Student Affairs"},{value:"Finance",label:"Finance"},{value:"HR",label:"Human Resources"},{value:"IT",label:"Information Technology"},{value:"Operations",label:"Operations"}],S=[{value:"happy",label:"Happy"},{value:"excited",label:"Excited"},{value:"calm",label:"Calm"},{value:"hopeful",label:"Hopeful"},{value:"tired",label:"Tired"},{value:"anxious",label:"Anxious"},{value:"sad",label:"Sad"},{value:"overwhelmed",label:"Overwhelmed"}],t=[{value:"sunny",label:"Sunny"},{value:"cloudy",label:"Cloudy"},{value:"rain",label:"Rain"},{value:"storm",label:"Storm"},{value:"tornado",label:"Tornado"},{value:"snow",label:"Snow"}],i=(a,f)=>{const u={...c};u[a]||(u[a]=[]),u[a].includes(f)?u[a]=u[a].filter(w=>w!==f):u[a].push(f),u[a].length===0&&delete u[a],p(u),m(u)},x=()=>{p({}),m({})},b=Object.values(c).reduce((a,f)=>a+f.length,0);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!o),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${b>0?"bg-primary text-primary-foreground border-primary":"bg-card text-foreground border-border hover:bg-card/80"}`,children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Advanced Filters"}),b>0&&e.jsx("span",{className:"bg-destructive text-destructive-foreground text-xs px-2 py-1 rounded-full",children:b})]}),o&&e.jsxs("div",{className:"absolute top-full mt-2 right-0 z-50 w-96 bg-card border border-border rounded-xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Filter Dashboard Data"}),e.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-muted rounded",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(V,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Role"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.role?.includes(a.value)||!1,onChange:()=>i("role",a.value),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:a.label})]},a.value))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(G,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Department"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:d.map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.department?.includes(a.value)||!1,onChange:()=>i("department",a.value),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:a.label})]},a.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Moods"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.mood?.includes(a.value)||!1,onChange:()=>i("mood",a.value),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:a.label})]},a.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Weather Types"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.weather?.includes(a.value)||!1,onChange:()=>i("weather",a.value),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:a.label})]},a.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Support Status"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.needsSupport?.includes("true")||!1,onChange:()=>i("needsSupport","true"),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:"Needs Support"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.needsSupport?.includes("false")||!1,onChange:()=>i("needsSupport","false"),className:"rounded border-border"}),e.jsx("span",{className:"text-sm text-foreground",children:"No Support Needed"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-border",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Clear All"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Apply Filters"})]})]})]})});M.displayName="AdvancedFilters";const H=s.memo(({socketService:m,user:l})=>{const[o,r]=s.useState([]),[c,p]=s.useState(!1);s.useEffect(()=>{if(!m||!l)return;const t=b=>{const a={id:Date.now(),type:"info",title:"New Check-in Submitted",message:`${b.userName||"Someone"} just submitted their emotional check-in`,timestamp:new Date,icon:F,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"};y(a)},i=b=>{const a={id:Date.now(),type:"warning",title:"Support Needed",message:`${b.userName} has indicated they need support`,timestamp:new Date,icon:$,color:"text-red-500",bgColor:"bg-red-50",borderColor:"border-red-200"};y(a)},x=b=>{const a={id:Date.now(),type:"success",title:"Dashboard Updated",message:"New data has been added to the dashboard",timestamp:new Date,icon:F,color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200"};y(a)};return m.onNewCheckin(t),m.onUserFlagged(i),m.onDashboardUpdate(x),()=>{m.offNewCheckin(t),m.offUserFlagged(i),m.offDashboardUpdate(x)}},[m,l]);const y=t=>{r(i=>[t,...i].slice(0,10)),p(!0),setTimeout(()=>{p(!1)},5e3)},d=t=>{r(i=>i.filter(x=>x.id!==t)),o.length<=1&&p(!1)},S=()=>{r([]),p(!1)};return o.length===0?null:e.jsxs("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("button",{onClick:()=>p(!c),className:"relative p-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:bg-primary/90 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),o.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground text-xs rounded-full w-5 h-5 flex items-center justify-center",children:o.length})]})}),c&&e.jsxs("div",{className:"glass glass-card shadow-2xl max-h-96 overflow-hidden",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Notifications"}),e.jsx("button",{onClick:S,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Clear all"})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:o.map(t=>{const i=t.icon;return e.jsx("div",{className:`p-4 border-b border-border/50 last:border-b-0 ${t.bgColor} transition-all duration-300`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:`w-4 h-4 mt-0.5 ${t.color}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:t.title}),e.jsx("button",{onClick:()=>d(t.id),className:"ml-2 p-1 rounded transition-colors hover:bg-secondary/25",children:e.jsx(_,{className:"w-3 h-3 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:t.timestamp.toLocaleTimeString()})]})]})},t.id)})}),e.jsx("div",{className:"p-3 bg-muted/20 border-t border-border",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Real-time updates active"})})]})]})]})});H.displayName="RealTimeNotifications";s.lazy(()=>N(()=>import("./PrimaryNavButtons-BDwoqL8Q.js"),__vite__mapDeps([0,1,2,3])));const Z=s.lazy(()=>N(()=>import("./DashboardHeader-BfY_FAk7.js"),__vite__mapDeps([4,1,2,5,6,7,8])));s.lazy(()=>N(()=>import("./StatsGrid-CgMy8Z6E.js"),__vite__mapDeps([9,1,2,7,5,6,8])));const Q=s.lazy(()=>N(()=>import("./ContentSections-D1_j7NCH.js"),__vite__mapDeps([10,1,2]))),X=s.lazy(()=>N(()=>import("./DecorativeElements-L5aP1uxx.js"),__vite__mapDeps([11,1,2]))),ee=s.lazy(()=>N(()=>import("./PerformanceMonitor-BiQ_Q3nJ.js"),__vite__mapDeps([12,1,2]))),T=s.memo(function(){const l=L(),o=K(),{user:r}=A(n=>n.auth),{stats:c,loading:p,error:y}=A(n=>n.dashboard),{selectedPeriod:d,selectedDate:S}=A(n=>n.dashboard),t=r?.role==="head_unit",i=r&&["directorate","admin","superadmin"].includes(r.role),[x,b]=s.useState(!1),[a,f]=s.useState({}),u=s.useRef(!1);s.useEffect(()=>{const n=setTimeout(()=>b(!0),100);return()=>clearTimeout(n)},[]),s.useEffect(()=>{if(r&&(r.role==="directorate"||r.role==="superadmin"||r.role==="admin"||r.role==="head_unit")){if(r?.role==="directorate"&&d==="today"&&!u.current){u.current=!0,l(D("all"));return}console.log("Fetching dashboard stats for period:",d,"User:",r),l(j({period:d})),h.connect(),h.joinDashboard(r.id);const k=g=>{console.log("Real-time dashboard update:",g),l(j({period:d}))},P=g=>{console.log("New check-in received:",g),l(j({period:d,force:!0})),console.log("Dashboard updated with new check-in data")},R=g=>{console.log("User flagged for support:",g)},C=g=>{console.log("Support request handled, removing from flagged users:",g),l(q(g))};return h.onDashboardUpdate(k),h.onNewCheckin(P),h.onUserFlagged(R),h.onSupportRequestHandled(C),()=>{h.offDashboardUpdate(k),h.offNewCheckin(P),h.offUserFlagged(R),h.offSupportRequestHandled(C),h.leaveDashboard()}}else console.log("User not authorized for dashboard:",{user:r})},[l,r,d]);const w=s.useCallback(n=>{l(D(n))},[l]),z=s.useCallback(n=>{l(W(n))},[l]),E=s.useCallback(n=>{f(n),l(j({period:d,filters:n}))},[l,d]);s.useCallback(()=>{o("/mtss")},[o]),s.useCallback(()=>{o("/select-role")},[o]);const v=s.memo(()=>e.jsxs("div",{className:"glass glass-card",children:[e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted/30 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted/20 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted/20 rounded w-2/3"})]})]}));v.displayName="LoadingFallback";const I=s.useMemo(()=>typeof window<"u"?window.innerWidth<768:!1,[]);return e.jsxs("div",{className:"min-h-screen text-foreground relative overflow-hidden",children:[e.jsx(s.Suspense,{fallback:null,children:e.jsx(X,{isMobile:I})}),e.jsxs("div",{className:"relative z-10 container-tight py-4 md:py-6",children:[e.jsx(s.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(Z,{selectedPeriod:d,onPeriodChange:w,selectedDate:S,onDateChange:z,isHeadUnit:t,userUnit:r?.unit||r?.department,isDirectorate:i})}),e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(M,{onFiltersChange:E,currentFilters:a})}),e.jsx(s.Suspense,{fallback:e.jsx(v,{})}),e.jsx(s.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(Q,{mockData:Y,realData:c,loading:p,selectedPeriod:d,userId:r?.id,isHeadUnit:t,isDirectorate:i})})]}),e.jsx(H,{socketService:h,user:r}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ee,{})})]})});T.displayName="EmotionalCheckinDashboard";const de=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{de as E,$ as T,le as m,ne as p};
