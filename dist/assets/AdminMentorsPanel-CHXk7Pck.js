import{r as o,b as $,j as t,q as N,m as P}from"./index-C4XCgjPq.js";const L=["teacher","homeroom","subject","special"],S=[{glass:"from-[#fdf2f8]/95 via-[#f5f3ff]/70 to-[#e0f2fe]/80 dark:from-white/10 dark:via-white/5 dark:to-[#0f172a]/60",accent:"from-[#ec4899] via-[#f97316] to-[#facc15]",tag:"from-[#ffe4e6]/85 via-[#fef3c7]/80 to-[#dbeafe]/80 text-rose-600",halo:"from-[#f472b6]/35 via-[#fef08a]/25 to-transparent"},{glass:"from-[#e0f2fe]/95 via-[#ccfbf1]/70 to-[#f5f5ff]/80 dark:from-[#0f172a]/70 dark:via-[#0b1220]/70 dark:to-[#111827]/80",accent:"from-[#3b82f6] via-[#22d3ee] to-[#a855f7]",tag:"from-[#bae6fd]/80 via-[#ccfbf1]/80 to-[#ede9fe]/80 text-sky-700",halo:"from-[#22d3ee]/30 via-[#6366f1]/30 to-transparent"},{glass:"from-[#fff7ed]/95 via-[#fef9c3]/70 to-[#e0f2fe]/80 dark:from-[#1f2937]/80 dark:via-[#0f172a]/80 dark:to-[#0f172a]/60",accent:"from-[#f97316] via-[#facc15] to-[#4ade80]",tag:"from-[#ffedd5]/90 via-[#fef3c7]/80 to-[#e0f2fe]/80 text-amber-700",halo:"from-[#fb923c]/30 via-[#fde047]/25 to-transparent"},{glass:"from-[#ede9fe]/95 via-[#e0f2fe]/70 to-[#fef3c7]/80 dark:from-[#0f172a]/70 dark:via-[#111827]/70 dark:to-[#1f2937]/70",accent:"from-[#a855f7] via-[#ec4899] to-[#f472b6]",tag:"from-[#ddd6fe]/90 via-[#f9a8d4]/80 to-[#fef3c7]/80 text-fuchsia-700",halo:"from-[#c084fc]/35 via-[#fb7185]/25 to-transparent"}],_=["fade-up","zoom-in","flip-left","fade-up-right","zoom-out-up","fade-up-left"],f=9,h=(l={})=>(l._id||l.id||l.email||l.name||"").toString().toLowerCase(),M=({mentorRoster:l=[],mentorDirectory:x=[]})=>{const m=$(),A=e=>{const a=(e.jobPosition||"").toLowerCase(),s=(e.role||"").toLowerCase(),i=Array.isArray(e.classes)?e.classes.some(c=>(c.role||"").toLowerCase().includes("teacher")):!1;return L.some(c=>a.includes(c))||i||s.includes("teacher")},R=x.filter(A),C=new Map(l.map(e=>[h(e),{activeStudents:e.activeStudents||e.students||0,successRate:e.successRate||"0%"}])),n=new Map;R.forEach(e=>{const a=h(e),s=C.get(a)||{activeStudents:0,successRate:"0%"};n.set(a,{_id:e._id||e.id||null,name:e.name,role:e.jobPosition||e.role||"Teacher",activeStudents:s.activeStudents,successRate:s.successRate})}),l.forEach(e=>{const a=h(e),s=n.get(a);n.set(a,{_id:e._id||e.id||n.get(a)?._id||null,name:e.name,role:e.role||s?.role||"Teacher",activeStudents:e.activeStudents||e.students||s?.activeStudents||0,successRate:e.successRate||s?.successRate||"0%"})});const r=Array.from(n.values()).sort((e,a)=>e.name.localeCompare(a.name)),[g,w]=o.useState(f),b=o.useRef(null);o.useEffect(()=>{w(f)},[r.length]),o.useEffect(()=>{if(!b.current)return;const e=new IntersectionObserver(a=>{const[s]=a;s.isIntersecting&&w(i=>i>=r.length?i:Math.min(r.length,i+f))},{threshold:.4});return e.observe(b.current),()=>e.disconnect()},[r.length]);const p=o.useMemo(()=>r.slice(0,Math.min(g,r.length)),[r,g]),v=o.useCallback(e=>{const a=h(e),s=x.find(i=>h(i)===a);return s?{...e,...s,_id:s._id||e._id||e.id||null}:e},[x]),E=o.useCallback(e=>{const a=v(e);if(!a?._id){console.warn("Mentor missing identifier, unable to assign",e);return}m(`/mtss/admin/assign/${a._id}`,{state:{mentor:a}})},[v,m]);return t.jsx("div",{className:"space-y-8","data-aos":"fade-up","data-aos-delay":"100",children:t.jsxs("div",{className:"glass glass-card mtss-card-surface p-8 rounded-[40px] shadow-[0_30px_90px_rgba(15,23,42,0.32)] border border-white/10 bg-gradient-to-br from-white/80 via-white/60 to-white/40 dark:from-white/5 dark:via-white/10 dark:to-white/5 backdrop-blur-2xl",children:[t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8","data-aos":"fade-up","data-aos-delay":"150",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-full bg-gradient-to-r from-[#e0f2fe] via-[#fef3c7] to-[#fbcfe8] text-sm font-semibold text-slate-700 dark:text-white shadow-inner",children:[t.jsx(N,{className:"w-4 h-4 text-rose-500"}),"Mentor Squad"]}),t.jsxs("div",{className:"rounded-[28px] bg-gradient-to-r from-white/95 via-white/70 to-white/40 dark:from-white/10 dark:via-white/5 dark:to-white/5 p-5 border border-white/60 dark:border-white/10 shadow-inner backdrop-blur-xl space-y-2",children:[t.jsx("h3",{className:"text-3xl font-black text-foreground dark:text-white bg-gradient-to-r from-[#14b8a6] via-[#3b82f6] to-[#a855f7] text-transparent bg-clip-text",children:"Manage Mentors"}),t.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-[#fee2e2]/80 via-[#fef9c3]/80 to-[#cffafe]/80 dark:from-white/10 dark:via-white/5 dark:to-white/5 px-4 py-2 text-xs font-semibold text-rose-500 flex items-center gap-2 shadow-sm",children:[t.jsx(N,{className:"w-4 h-4"}),"Tap “Assign students” to pair mentors with multiple kids instantly."]})]})]}),t.jsx("button",{className:"px-5 py-3 rounded-full bg-gradient-to-r from-[#fde68a] via-[#fca5a5] to-[#f472b6] text-sm font-semibold text-rose-700 shadow-lg hover:-translate-y-0.5 transition border border-white/70",children:"Add Mentor"})]}),t.jsx("div",{className:"grid gap-5 lg:gap-6 md:grid-cols-2 xl:grid-cols-3","data-aos":"fade-up","data-aos-delay":"180",children:p.map((e,a)=>{const s=S[a%S.length],i=_[(a+2)%_.length],c=Number(e.activeStudents)||0,u=Number(String(e.successRate??"0").replace(/[^\d.]/g,""))||0,T=u>=85?"text-emerald-400":u>=60?"text-amber-400":"text-rose-400",k=Array.isArray(e.classes)?e.classes.slice(0,3).map(d=>{const j=d.grade||e.unit||"MTSS",y=d.className||d.subject;return y?`${j} • ${y}`:j}):[];return t.jsxs(P.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:a%f*.05},className:`relative group overflow-hidden rounded-[24px] border border-white/40 dark:border-white/5 p-5 shadow-[0_18px_55px_rgba(15,23,42,0.16)] backdrop-blur-xl bg-gradient-to-br ${s.glass}`,"data-aos":i,"data-aos-delay":200+a%f*60,"data-aos-duration":650+a%4*120,children:[t.jsx("div",{className:`absolute -top-14 right-3 w-32 h-32 bg-gradient-to-br ${s.halo} blur-3xl opacity-60 group-hover:opacity-80 transition`}),t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-15 group-hover:opacity-30 transition bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),_transparent_60%)]"}),t.jsxs("div",{className:"relative space-y-5",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 rounded-2xl bg-white/85 text-slate-900 font-black flex items-center justify-center shadow-inner shadow-white/40",children:e.name.split(" ").map(d=>d[0]).slice(0,2).join("")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-white",children:e.name}),t.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-white/70",children:e.role})]})]}),t.jsxs("div",{className:"text-right text-[0.55rem] uppercase tracking-[0.3em] text-slate-500 dark:text-white/60",children:[t.jsx("p",{children:e.unit||"Unit"}),t.jsx("p",{className:"text-sm font-black tracking-normal text-slate-900 dark:text-white",children:e.role||"Teacher"})]})]}),k.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5 text-[0.65rem] font-semibold text-slate-600 dark:text-white/70",children:k.map(d=>t.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/85 dark:bg-white/5",children:d},`${e.name}-${d}`))}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs font-semibold text-slate-600 dark:text-white/70",children:[t.jsxs("div",{className:"rounded-2xl border border-white/40 dark:border-white/10 px-3 py-3 bg-white/80 dark:bg-white/5 backdrop-blur text-center",children:[t.jsx("p",{className:"text-[0.55rem] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:"Active"}),t.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:c})]}),t.jsxs("div",{className:"rounded-2xl border border-white/40 dark:border-white/10 px-3 py-3 bg-white/80 dark:bg-white/5 backdrop-blur text-center",children:[t.jsx("p",{className:"text-[0.55rem] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:"Success"}),t.jsx("p",{className:`text-2xl font-black ${T}`,children:e.successRate})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 text-[0.65rem] font-semibold text-slate-600 dark:text-white/70",children:[t.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:c>=12?"High load":"Balanced load"}),t.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:"SEL friendly"}),t.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:u>=90?"Spotlight":"Steady growth"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:`flex-1 px-4 py-2.5 rounded-full text-sm font-semibold text-white shadow-lg shadow-primary/30 hover:-translate-y-0.5 transition bg-gradient-to-r ${s.accent}`,children:"Pulse profile"}),t.jsx("button",{className:"flex-1 px-4 py-2.5 rounded-full border border-white/60 dark:border-white/20 text-slate-900 dark:text-white bg-white/85 dark:bg-white/5 shadow-inner hover:-translate-y-0.5 transition",onClick:()=>E(e),children:"Assign"})]})]})]},e.name)})}),t.jsxs("div",{ref:b,className:"mt-8 flex flex-col items-center gap-2 text-xs font-semibold text-muted-foreground","data-aos":"fade-up",children:[t.jsxs("span",{children:["Showing ",p.length," of ",r.length," mentors"]}),p.length<r.length?t.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/10 bg-white/70 dark:bg-white/5 text-[0.65rem] uppercase tracking-[0.3em]",children:"Scroll to load more"}):t.jsx("span",{className:"px-3 py-1 rounded-full border border-emerald-200/60 bg-emerald-50 text-emerald-600 text-[0.65rem] uppercase tracking-[0.3em]",children:"All mentors loaded"})]})]})})};M.displayName="AdminMentorsPanel";const H=o.memo(M);export{H as default};
