const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardOverview-DpYKCb-a.js","assets/index-BN59IPuR.js","assets/index-CrbAaxen.css","assets/StudentsTable-CaTlKhLM.js","assets/interventionSelection-Vcld4Os_.js","assets/CategoricalChart-CzuH2uZD.js","assets/LineChart-PTTZ-EsJ.js","assets/CartesianChart-ZQlXXoYZ.js","assets/Line-DNdpdA0Y.js","assets/ActivePoints-4jvxxq2L.js","assets/ErrorBarContext-BsywKOhW.js","assets/chevron-left-BRDCcyUU.js","assets/StudentsPanel-NTWNjfzw.js","assets/teacherGradeUtils-CER7NXSQ.js","assets/funnel-DdD_yu91.js","assets/search-57XYSJ22.js","assets/users-round-BEx4EheJ.js","assets/teacherSegmentUtils-BVrsE_0u.js","assets/teacherMappingUtils-BmcrCFBd.js","assets/shield-check-BRd4wDSg.js","assets/arrow-right-DfS9GNWZ.js","assets/StatusPills-CjLIIXkX.js","assets/InterventionFormPanel-SfL9vpoP.js","assets/ProgressFormPanel-DjGYXITg.js"])))=>i.map(i=>d[i]);
import{c as W,e as J,I as te,r as s,j as e,E as ae,m as F,X as se,_ as A,L as re,b as ne,P as oe}from"./index-BN59IPuR.js";import{C as ie,U as le}from"./users-round-BEx4EheJ.js";import{b as de,a as ce,f as ue,c as me,u as Q}from"./teacherGradeUtils-CER7NXSQ.js";import{d as he}from"./teacherSegmentUtils-BVrsE_0u.js";import{g as pe,b as R,m as xe,a as be}from"./teacherMappingUtils-BmcrCFBd.js";import{A as ge}from"./arrow-right-DfS9GNWZ.js";import{P as q,T as H}from"./StatusPills-CjLIIXkX.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ve=W("circle-plus",fe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],we=W("file-check-2",ye),O=[{key:"dashboard",label:"Dashboard",icon:ie},{key:"students",label:"My Students",icon:le},{key:"create",label:"Create Intervention",icon:ve},{key:"submit",label:"Submit Progress",icon:we}],D={base:"px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground dark:text-white placeholder:text-muted-foreground/70 dark:placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all"};D.textarea=`${D.base} min-h-[80px]`;D.notes=`${D.base} min-h-[120px]`;const z=()=>({studentId:"",studentName:"",grade:"",type:"",strategyId:"",tier:"Tier 2",goal:"",notes:"",startDate:"",duration:"",monitorFrequency:"",monitorMethod:"",baselineValue:"",baselineUnit:"score",targetValue:"",targetUnit:"score"}),G=()=>({studentId:"",assignmentId:"",studentName:"",date:"",performed:"yes",scoreValue:"",scoreUnit:"score",badge:"ðŸŽ‰ Progress Party",notes:""}),ke=a=>{const{toast:t}=J(),r=te(),[i,c]=s.useState("dashboard"),[o,u]=s.useState(()=>z()),[m,p]=s.useState(()=>G()),[n,h]=s.useState(!1),[l,d]=s.useState(!1);s.useEffect(()=>{const x=new URLSearchParams(r.search).get("tab");x&&a.some(y=>y.key===x)&&c(x)},[r.search,a]);const f=s.useCallback((g,x)=>{u(y=>({...y,[g]:x}))},[]),k=s.useCallback((g,x)=>{p(y=>({...y,[g]:x}))},[]),w=s.useCallback(async(g,x)=>{if(g.preventDefault(),n)return;if(["studentId","type","tier","startDate","monitorFrequency","monitorMethod"].filter(j=>!(x?.[j]||o[j])).length){t({title:"Complete the required fields",description:"Student, type, tier, start date, frequency, and method are required.",variant:"destructive"});return}try{h(!0),await new Promise(j=>setTimeout(j,600)),t({title:"Intervention saved",description:"Student plan locked inâ€”keep tracking their joyful progress."})}finally{h(!1)}},[o,n,t]),v=s.useCallback(g=>{g.preventDefault(),t({title:"Progress submitted",description:"Your monitoring update is live on the MTSS dashboard."})},[t]),b=s.useCallback(()=>{u(z())},[]),N=s.useCallback(()=>{p(G())},[]);return{activeTab:i,setActiveTab:c,interventionForm:o,progressForm:m,handleInterventionChange:f,handleProgressChange:k,handleSavePlan:w,handleSubmitProgress:v,resetInterventionForm:b,resetProgressForm:N,submittingPlan:n,setSubmittingPlan:h,submittingProgress:l,setSubmittingProgress:d}},je={male:"Mr.",female:"Ms."},K=a=>je[a?.toLowerCase?.()]||"",Y=a=>{const t=["Hey %NAME%, let's light up today's boosts.","Morning %NAME%, ready to spark joyful wins?","%NAME%, today's plan is setâ€”let's uplift every student.","Cheers %NAME%, another day to glow-up kids' progress.","Let's dive in %NAME%, the boost studio is humming."],r=new Date,i=(r.getDate()+r.getMonth())%t.length;return t[i].replace("%NAME%",a)},Ne=a=>{const t=a?.username||a?.name||"MTSS Mentor",r=K(a?.gender),i=r?`${r} ${t}`:t;return{teacher:i,school:a?.jobPosition||a?.unit||"Millennia21 Schools",tierFocus:"Personalized supports",greeting:Y(i),gradeLabel:a?.unit||"All Grades"}},Se=()=>{const a=s.useMemo(()=>pe(),[]),t=s.useMemo(()=>Ne(a),[a]),r=s.useMemo(()=>he(a),[a]),[i,c]=s.useState(()=>R()),[o,u]=s.useState([]),[m,p]=s.useState([]),[n,h]=s.useState(t),[l,d]=s.useState(!0),[f,k]=s.useState(null),w=s.useCallback(async v=>{d(!0),k(null);try{const b=de(r),N=ce(r),g=b.length&&(r.shouldFilterServer||r.unit!=="Junior High"),x={limit:r.unit==="Junior High"?500:200};g&&(x.grade=b.join(",")),N.length&&(x.className=N.join(","));const[y,_]=await Promise.all([ue({limit:150},v?{signal:v}:{}),me(x,v?{signal:v}:{})]),j=y.assignments||y||[],E=R(j),T=a?.username||a?.name||t.teacher,V=a?.gender,S=xe(j,T),L=_?.students||[],M=be(L,S.students,r),I=K(V),U=I?`${I} ${T}`:T;c(E);const C=M.length?M:S.students;u(C),p(S.spotlightChart.length?S.spotlightChart:[{label:"Start",date:"Start",reading:0,goal:100,value:0}]),h($=>({...$,...t,teacher:U||t.teacher,greeting:Y(U||t.teacher),tierFocus:S.focusLabel||$.tierFocus||"Tiered Supports",gradeLabel:r.label}))}catch(b){b?.name!=="CanceledError"&&b?.name!=="AbortError"&&k(b?.response?.data?.message||b?.message||"Failed to load MTSS data")}finally{d(!1)}},[t,r]);return s.useEffect(()=>{const v=new AbortController;return w(v.signal),()=>v.abort()},[w]),{statCards:i,students:o,progressData:m.length?m:[{label:"Start",date:"Start",reading:0,goal:100,value:0}],heroBadge:n,loading:l,error:f,refresh:()=>w()}},B=({heroBadge:a,tabs:t,activeTab:r,onTabChange:i})=>e.jsx("div",{className:"relative rounded-[40px] p-[1.5px] bg-gradient-to-r from-[#fb7185]/50 via-[#60a5fa]/50 to-[#34d399]/50 shadow-[0_35px_90px_rgba(15,23,42,0.28)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[38px] border border-white/40 dark:border-white/10 bg-white/70 dark:bg-slate-900/60 backdrop-blur-2xl",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -left-16 w-72 h-72 bg-gradient-to-br from-[#f472b6]/25 via-[#60a5fa]/15 to-transparent blur-[140px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-[#22d3ee]/25 via-[#a855f7]/15 to-transparent blur-[160px]"}),e.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.6),_transparent_60%)]"})]}),e.jsxs("div",{className:"relative px-5 py-7 sm:px-8 text-slate-900 dark:text-white",children:[e.jsxs("div",{className:"grid gap-5 lg:grid-cols-[minmax(0,1fr)_auto] lg:items-end",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-slate-200 bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/15 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-white/90 dark:bg-white/15 text-rose-500",children:e.jsx(ae,{className:"w-3.5 h-3.5"})}),"MTSS Studio"]}),e.jsx("span",{className:"hidden sm:inline-flex px-3 py-1 rounded-full bg-gradient-to-r from-white/90 via-white/70 to-white/60 dark:from-white/10 dark:via-white/5 dark:to-white/5 border border-white/60 dark:border-white/15 tracking-[0.3em] uppercase text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:a.school}),e.jsx("span",{className:"hidden md:inline-flex px-3 py-1 rounded-full bg-gradient-to-r from-emerald-100/80 to-sky-100/80 dark:from-emerald-900/40 dark:to-sky-900/30 text-[11px] font-semibold text-emerald-700 dark:text-emerald-200",children:a.gradeLabel})]}),e.jsx("h1",{className:"text-2xl sm:text-4xl font-black leading-tight bg-gradient-to-r from-[#0f172a] via-[#334155] to-[#1d4ed8] dark:from-white dark:via-[#c7d2fe] dark:to-[#f472b6] text-transparent bg-clip-text",children:a.greeting||`Hey ${a.teacher}, let's light up today's boosts.`}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-200 max-w-xl",children:["Focus today: ",e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:a.tierFocus})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[e.jsxs("div",{className:"px-4 py-3 rounded-3xl bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/15 shadow-inner text-sm font-semibold",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-300 text-[11px] uppercase tracking-[0.3em]",children:"Teacher"}),e.jsx("div",{className:"text-base font-semibold",children:a.teacher})]}),e.jsxs("div",{className:"px-4 py-3 rounded-3xl bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/15 shadow-inner text-sm font-semibold",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-300 text-[11px] uppercase tracking-[0.3em]",children:"Today"}),e.jsx("div",{className:"text-base font-semibold",children:a.dateLabel||"Ready to roll"})]})]})]}),e.jsx("div",{className:"mt-7 rounded-3xl bg-white/70 dark:bg-white/5 border border-white/60 dark:border-white/10 p-2 shadow-inner",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:t.map(c=>{const o=c.icon,u=r===c.key;return e.jsxs("button",{onClick:()=>i(c.key),className:`group flex items-center justify-between gap-3 rounded-2xl px-3 py-3 text-sm font-semibold transition border shadow-[0_10px_30px_rgba(15,23,42,0.12)] ${u?"bg-gradient-to-r from-[#22d3ee] via-[#3b82f6] to-[#a855f7] text-white border-transparent shadow-[0_18px_45px_rgba(59,130,246,0.35)]":"bg-white/80 dark:bg-white/10 text-slate-600 dark:text-slate-200 border-white/70 dark:border-white/15 hover:bg-white hover:dark:bg-white/20"}`,"aria-pressed":u,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center rounded-full ${u?"bg-white/25 text-white":"bg-white/90 dark:bg-white/10 text-slate-500 dark:text-slate-200"}`,children:e.jsx(o,{className:"w-4 h-4"})}),c.label]}),e.jsx(ge,{className:`w-4 h-4 transition-transform ${u?"translate-x-1":"group-hover:translate-x-1"}`})]},c.key)})})})]})]})});B.displayName="TeacherHeroSection";const Ce=s.memo(B),P="px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground placeholder:text-muted-foreground/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all w-full",Pe=["wpm","%","pts","score"],X=s.memo(({student:a,onClose:t,onSubmit:r,submitting:i=!1})=>{const c=s.useMemo(()=>new Date().toISOString().split("T")[0],[]),[o,u]=s.useState({date:c,performed:"yes",scoreValue:"",scoreUnit:"score",notes:"",badge:"ðŸŽ‰ Progress Party"});if(!a)return null;const m=(n,h)=>{u(l=>({...l,[n]:h}))},p=n=>{n.preventDefault(),r?.(a,o)};return e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center px-4 mtss-theme",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:t,"aria-hidden":"true"}),e.jsxs(F.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl rounded-[28px] overflow-hidden border border-white/40 bg-white/95 dark:bg-slate-900/90 shadow-[0_25px_80px_rgba(15,23,42,0.35)]",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#34d399]/80 via-[#22d3ee]/80 to-[#60a5fa]/80 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase text-xs tracking-[0.4em] opacity-80",children:"Quick Update"}),e.jsx("h3",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-sm opacity-90",children:"Share today's check-in and celebrations"})]}),e.jsx("button",{onClick:t,"aria-label":"Close",className:"p-2 bg-white/30 rounded-full hover:bg-white/50 transition",disabled:i,children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("form",{className:"p-6 space-y-4",onSubmit:p,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Date"}),e.jsx("input",{type:"date",className:P,value:o.date,onChange:n=>m("date",n.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Performed?"}),e.jsxs("select",{className:P,value:o.performed,onChange:n=>m("performed",n.target.value),children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Status or Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:`${P} flex-1`,placeholder:"e.g. 78",value:o.scoreValue,onChange:n=>m("scoreValue",n.target.value)}),e.jsx("select",{className:`${P} w-28`,value:o.scoreUnit,onChange:n=>m("scoreUnit",n.target.value),children:Pe.map(n=>e.jsx("option",{value:n,children:n},n))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Celebration Emoji"}),e.jsxs("select",{className:P,value:o.badge,onChange:n=>m("badge",n.target.value),children:[e.jsx("option",{value:"ðŸŽ‰ Progress Party",children:"ðŸŽ‰ Progress Party"}),e.jsx("option",{value:"âœ¨ Stellar Boost",children:"âœ¨ Stellar Boost"}),e.jsx("option",{value:"ðŸŒˆ Focus Mode",children:"ðŸŒˆ Focus Mode"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes & Observations"}),e.jsx("textarea",{className:`${P} min-h-[120px]`,placeholder:"Describe the student's progress, challenges, or celebrations...",value:o.notes,onChange:n=>m("notes",n.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.jsx(F.button,{type:"submit",className:"px-5 py-3 rounded-full bg-gradient-to-r from-[#ff58c2] to-[#ffb347] text-white font-semibold shadow-[0_15px_40px_rgba(255,88,194,0.25)] disabled:opacity-60",whileHover:{scale:i?1:1.03},whileTap:{scale:i?1:.97},disabled:i,children:i?"Saving...":"Save Update"}),e.jsx("button",{type:"button",onClick:t,className:"px-5 py-3 rounded-full bg-white/80 dark:bg-white/10 text-foreground font-semibold border border-border/60 disabled:opacity-60",disabled:i,children:"Cancel"})]})]})]})]})});X.displayName="QuickUpdateModal";const _e=s.lazy(()=>A(()=>import("./DashboardOverview-DpYKCb-a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Te=s.lazy(()=>A(()=>import("./StudentsPanel-NTWNjfzw.js"),__vite__mapDeps([12,1,2,3,4,13,14,15,16,17,18,19,20,21]))),Me=s.lazy(()=>A(()=>import("./InterventionFormPanel-SfL9vpoP.js"),__vite__mapDeps([22,1,2,13]))),De=s.lazy(()=>A(()=>import("./ProgressFormPanel-DjGYXITg.js"),__vite__mapDeps([23,1,2,18,13,19]))),Ie=()=>e.jsx("div",{className:"glass glass-card p-8 text-center text-muted-foreground animate-pulse",children:"Loading panel..."}),Z=s.memo(({activeTab:a,statCards:t,students:r,progressData:i,interventionForm:c,progressForm:o,handleInterventionChange:u,handleProgressChange:m,handleSavePlan:p,handleProgressSubmitForm:n,baseFieldClass:h,textareaClass:l,notesTextareaClass:d,submittingPlan:f,submittingProgress:k,onViewStudent:w,onQuickUpdate:v,refresh:b})=>{const N=s.useMemo(()=>{switch(a){case"dashboard":return e.jsx(_e,{statCards:t,students:r,progressData:i,TierPill:H,ProgressBadge:q,onView:w,onUpdate:v});case"students":return e.jsx(Te,{students:r,TierPill:H,ProgressBadge:q,onRefresh:b});case"create":return e.jsx(Me,{formState:c,onChange:u,onSubmit:g=>p(g,c),baseFieldClass:h,textareaClass:l,students:r,submitting:f});case"submit":return e.jsx(De,{formState:o,onChange:m,onSubmit:n,baseFieldClass:h,textareaClass:d,students:r,submitting:k});default:return null}},[a,h,u,m,n,p,c,d,v,w,i,o,b,t,r,f,k,l]);return e.jsx(s.Suspense,{fallback:e.jsx(Ie,{}),children:N})});Z.displayName="TeacherDashboardPanels";const Ue=({loading:a,error:t,onRetry:r})=>!a&&!t?null:e.jsxs("div",{className:"rounded-2xl border border-border/50 bg-white/60 dark:bg-white/5 px-4 py-3 flex items-center justify-between gap-4 text-sm text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(re,{className:"w-4 h-4 animate-spin text-primary"}),e.jsx("span",{children:t||"Syncing live MTSS data..."})]}),t&&e.jsx("button",{onClick:r,className:"text-primary font-semibold hover:underline",children:"Retry"})]}),Ae=({students:a,progressForm:t,resetProgressForm:r,refresh:i,setSubmittingProgress:c,toast:o,setSavingQuickUpdate:u,onCloseQuickUpdate:m})=>{const p=s.useCallback(async h=>{if(h.preventDefault(),!t.studentId||!t.date||t.scoreValue===""){o({title:"Complete the required fields",description:"Student, date, and score are required to submit progress.",variant:"destructive"});return}const l=a.find(d=>d.id===t.studentId);if(!l){o({title:"Select a student",description:"Choose a student before logging progress.",variant:"destructive"});return}if(!l.assignmentId){o({title:"No active intervention",description:`${l.name} is not linked to an active intervention yet.`,variant:"destructive"});return}try{const d=t.notes?.trim()||"",f=t.scoreValue!==""?Number(t.scoreValue):void 0;c(!0),await Q(l.assignmentId,{checkIns:[{date:t.date||new Date,summary:d||"Progress update logged via dashboard",nextSteps:d||void 0,value:Number.isFinite(f)?f:void 0,unit:t.scoreUnit,performed:t.performed==="yes"}]}),o({title:"Progress saved",description:`${l.name}'s update is now on the dashboard.`}),r(),i()}catch(d){o({title:"Failed to save progress",description:d?.response?.data?.message||d.message||"Unable to record update now.",variant:"destructive"})}finally{c(!1)}},[t,a,o,r,i,c]),n=s.useCallback(async(h,l)=>{if(!h?.assignmentId){o({title:"No active intervention",description:`${h?.name||"Student"} isn't linked to an active intervention yet.`,variant:"destructive"});return}u(!0);try{const d=l.notes?.trim()||"",f=l.scoreValue!==""?Number(l.scoreValue):void 0;await Q(h.assignmentId,{checkIns:[{date:l.date,summary:d||"Quick update",nextSteps:d||void 0,value:Number.isFinite(f)?f:void 0,unit:l.scoreUnit,performed:l.performed==="yes",celebration:l.badge}]}),o({title:"Progress update saved",description:`${h.name}'s update was recorded!`}),m(),i()}catch(d){o({title:"Failed to save update",description:d?.response?.data?.message||d.message||"Please try again in a moment.",variant:"destructive"})}finally{u(!1)}},[o,m,i,u]);return{handleProgressSubmitForm:p,handleQuickUpdateSubmit:n}},ee=s.memo(()=>{const{toast:a}=J(),t=ne(),{statCards:r,students:i,progressData:c,heroBadge:o,loading:u,error:m,refresh:p}=Se(),{activeTab:n,setActiveTab:h,interventionForm:l,progressForm:d,handleInterventionChange:f,handleProgressChange:k,handleSavePlan:w,resetProgressForm:v,submittingPlan:b,setSubmittingProgress:N,submittingProgress:g}=ke(O),[x,y]=s.useState(null),[_,j]=s.useState(!1),{base:E,textarea:T,notes:V}=D,S=s.useCallback(C=>{C?.slug&&t(`/mtss/student/${C.slug}`)},[t]),L=s.useCallback(C=>y(C),[]),M=s.useCallback(()=>y(null),[]),{handleProgressSubmitForm:I,handleQuickUpdateSubmit:U}=Ae({students:i,progressForm:d,resetProgressForm:v,refresh:p,setSubmittingProgress:N,toast:a,setSavingQuickUpdate:j,onCloseQuickUpdate:M});return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white transition-colors",children:[(b||g||_)&&e.jsx(oe,{}),e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-64 bg-gradient-to-b from-white/70 via-[#fef2f2]/40 to-transparent dark:from-white/10 dark:via-white/5"}),e.jsx("div",{className:"absolute -bottom-24 left-12 w-[28rem] h-[28rem] bg-gradient-to-br from-[#22d3ee]/35 via-[#a855f7]/25 to-[#f472b6]/20 dark:from-[#0ea5e9]/25 dark:via-[#a855f7]/20 dark:to-[#f472b6]/15 blur-[200px]"})]}),e.jsxs("div",{className:"relative z-20 container-tight px-4 sm:px-6 py-8 lg:py-14 space-y-8 lg:space-y-10",children:[e.jsx("section",{className:"mtss-gradient-border overflow-hidden rounded-3xl border border-white/40 dark:border-white/10 shadow-[0_25px_60px_rgba(148,163,184,0.25)]","data-aos":"fade-up","data-aos-duration":"700",children:e.jsx(Ce,{heroBadge:o,tabs:O,activeTab:n,onTabChange:h})}),e.jsx(Ue,{loading:u,error:m,onRetry:p}),e.jsx(Z,{activeTab:n,statCards:r,students:i,progressData:c,interventionForm:l,progressForm:d,handleInterventionChange:f,handleProgressChange:k,handleSavePlan:w,handleProgressSubmitForm:I,baseFieldClass:E,textareaClass:T,notesTextareaClass:V,submittingPlan:b,submittingProgress:g,onViewStudent:S,onQuickUpdate:L,refresh:p})]}),x&&e.jsx(X,{student:x,onClose:M,onSubmit:U,submitting:_})]})});ee.displayName="TeacherDashboardPage";const qe=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{X as Q,qe as T};
