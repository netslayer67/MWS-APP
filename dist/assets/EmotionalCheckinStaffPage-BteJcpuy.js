const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WelcomeSection-CufFaMob.js","assets/index-C84qGWMf.js","assets/index-DM8HD4bI.css","assets/heart-DgDzCFCl.js","assets/sparkles-f64jWC-r.js","assets/WeatherSelector-DzCNcoPi.js","assets/flame-CfHS5JzJ.js","assets/wind-Cx4Mo4LB.js","assets/snowflake-YQ8_ssKa.js","assets/tornado-B_ahTZLW.js","assets/zap-BG5xV4Zr.js","assets/MoodSelector-Bw3OFsft.js","assets/shield-C7NTbCoa.js","assets/brain-kzbfILSC.js","assets/circle-x-DCh-dwXm.js","assets/users-CjeQhNyl.js","assets/circle-alert-CFTccQZr.js","assets/frown-DR2alFky.js","assets/smile-DXFzbDua.js","assets/DetailsInput-DDvxgweo.js","assets/circle-check-BcjTGJ6h.js","assets/PresenceSlider-Cwi72n2Z.js","assets/FeedbackCard-Bszoqi4l.js","assets/CapacitySlider-4NAfc4oR.js","assets/SupportSelector-CNjW5GZb.js","assets/chevron-down-BcB7QQeT.js","assets/user-check-PKZHa1M7.js","assets/message-circle-BRW37lLP.js","assets/SubmitSection-noEOZ7Db.js","assets/send-CNjnP9KV.js","assets/circle-check-big-0a8sB_2g.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,m as T,u as z,a as O,b as w,d as M,H as R,_ as n,z as C}from"./index-C84qGWMf.js";import{A as V}from"./AnimatedPage-5awoaHE4.js";const u=t.memo(({className:x,animate:p,delay:r=0})=>e.jsx(T.div,{className:`absolute rounded-full blur-3xl pointer-events-none ${x}`,animate:p?{scale:[1,1.1,1],opacity:[.03,.08,.03]}:{},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:r}})),W=t.memo(()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-[0.015] dark:opacity-[0.025]",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"luxury-grid",width:"32",height:"32",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 32 0 L 0 0 0 32",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#luxury-grid)",className:"text-foreground"})]})})),P=t.memo(()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(u,{className:"-top-32 -left-32 w-80 h-80 md:w-96 md:h-96 bg-primary/8",animate:!0,delay:0}),e.jsx(u,{className:"-bottom-32 -right-32 w-72 h-72 md:w-80 md:h-80 bg-accent/6",animate:!0,delay:.8}),e.jsx(u,{className:"top-1/3 right-1/4 w-64 h-64 md:w-72 md:h-72 bg-gold/5",animate:!0,delay:1.6}),e.jsx(u,{className:"bottom-1/3 left-1/4 w-56 h-56 md:w-64 md:h-64 bg-emerald/5",animate:!0,delay:2.4})]}));P.displayName="DecorativeElements";const U=t.lazy(()=>n(()=>import("./WelcomeSection-CufFaMob.js"),__vite__mapDeps([0,1,2,3,4]))),$=t.lazy(()=>n(()=>import("./WeatherSelector-DzCNcoPi.js"),__vite__mapDeps([5,1,2,6,7,8,9,10]))),F=t.lazy(()=>n(()=>import("./MoodSelector-Bw3OFsft.js"),__vite__mapDeps([11,1,2,12,6,4,13,14,15,16,10,17,18]))),H=t.lazy(()=>n(()=>import("./DetailsInput-DDvxgweo.js"),__vite__mapDeps([19,1,2,16,20]))),B=t.lazy(()=>n(()=>import("./PresenceSlider-Cwi72n2Z.js"),__vite__mapDeps([21,1,2,22,3]))),G=t.lazy(()=>n(()=>import("./CapacitySlider-4NAfc4oR.js"),__vite__mapDeps([23,1,2,22,10]))),Y=t.lazy(()=>n(()=>import("./SupportSelector-CNjW5GZb.js"),__vite__mapDeps([24,1,2,15,25,26,27,20]))),q=t.lazy(()=>n(()=>import("./SubmitSection-noEOZ7Db.js"),__vite__mapDeps([28,1,2,4,29,16,12,3,30]))),o=t.memo(()=>e.jsxs("div",{className:"glass glass-card animate-pulse",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"p-5 md:p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-muted/20 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted/20 rounded animate-pulse"}),e.jsx("div",{className:"h-32 bg-muted/20 rounded animate-pulse"})]})]}));o.displayName="ComponentLoader";const J=t.memo(function(){const p=z(),r=O(),{loading:D}=w(s=>s.checkin),{contacts:f}=w(s=>s.support),[i,j]=t.useState(null),[c,y]=t.useState([]),[_,v]=t.useState(""),[S,b]=t.useState([5]),[k,N]=t.useState([5]),[h,E]=t.useState(""),I=s=>{y(l=>l.includes(s)?l.filter(d=>d!==s):[...l,s])},{toast:g}=M(),A=async()=>{if(!i||c.length===0)return;const s=f.find(a=>a.name===h),l=s&&s.id!=="no-need"?s.id:null,d={weatherType:i,selectedMoods:c,details:_,presenceLevel:S[0],capacityLevel:k[0],supportContactUserId:l};console.log("Selected support contact:",s),console.log("Support contact user ID:",l),console.log("Support contact name from state:",h),console.log("Available support contacts:",f),console.log("Weather type:",i),console.log("Moods:",c),console.log("Complete checkin data:",d);try{const a=await p(C(d));C.fulfilled.match(a)?(g({title:"Check-in Submitted Successfully! ðŸŽ‰",description:"Thank you for sharing your feelings. Your well-being matters to us.",duration:5e3}),setTimeout(()=>{const m=a.payload?.data?.checkin?.id;console.log("Navigation: checkinId from payload:",m),console.log("Navigation: full payload:",a.payload),console.log("Navigation: data.checkin:",a.payload?.data?.checkin),m?(console.log("Navigating to:",`/emotional-checkin/rate/${m}`),r(`/emotional-checkin/rate/${m}`)):(console.log("No checkinId found, navigating to general rate page"),r("/emotional-checkin/rate"))},2e3),j(null),y([]),v(""),b([5]),N([5]),E("")):g({title:"Submission Failed",description:a.payload||"Please try again. If the problem persists, contact support.",variant:"destructive",duration:5e3})}catch{g({title:"Submission Error",description:"An unexpected error occurred. Please try again.",variant:"destructive",duration:5e3})}},L=i&&c.length>0;return e.jsxs(V,{children:[e.jsxs(R,{children:[e.jsx("title",{children:"Staff Emotional Check-in â€” MWS"}),e.jsx("meta",{name:"description",content:"Daily emotional wellness check-in for Millennia World School staff"})]}),e.jsxs("div",{className:"relative min-h-screen text-foreground overflow-hidden",children:[e.jsx(P,{}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4 md:p-6",children:e.jsxs("div",{className:"w-full max-w-2xl space-y-6 md:space-y-8",children:[e.jsx(U,{}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx($,{selectedWeather:i,onWeatherSelect:j})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(F,{selectedMoods:c,onMoodToggle:I})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(H,{details:_,onDetailsChange:v})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(B,{presence:S,onPresenceChange:b})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(G,{capacity:k,onCapacityChange:N})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(Y,{supportContact:h,onSupportChange:E})}),e.jsx(t.Suspense,{fallback:e.jsx(o,{}),children:e.jsx(q,{onSubmit:A,isSubmitting:D,isValid:L})})]})]})})]})]})});J.displayName="EmotionalCheckinStaffPage";export{J as default};
