import{c as k,r as p,a as j,d as f,o as w,j as e,m as v,v as y}from"./index-Z8dj6zX8.js";import{G as C}from"./graduation-cap-B1aV-mKr.js";import{C as N}from"./circle-check-BBuiTMoS.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$=k("circle-user",S);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],M=k("school",L),O={classTeacher:{label:"Your Teachers",icon:C,gradient:"from-sky-400 to-blue-500",bgLight:"bg-sky-50 dark:bg-sky-900/20",borderLight:"border-sky-200 dark:border-sky-700/40"},principal:{label:"Your Principal",icon:M,gradient:"from-amber-400 to-orange-500",bgLight:"bg-amber-50 dark:bg-amber-900/20",borderLight:"border-amber-200 dark:border-amber-700/40"},psychologist:{label:"School Counselor",icon:y,gradient:"from-pink-400 to-rose-500",bgLight:"bg-pink-50 dark:bg-pink-900/20",borderLight:"border-pink-200 dark:border-pink-700/40"}},I=p.memo(({supportContact:s,onSupportChange:o})=>{const h=j(),{contacts:l,loading:m}=f(r=>r.support),{isAuthenticated:x}=f(r=>r.auth);p.useEffect(()=>{l.length===0&&x&&h(w())},[h,x,l.length]);const c=p.useCallback(r=>{r.id==="no-need"?o?.("No Need"):o?.(r.name||r.id)},[o]),d=p.useMemo(()=>{const r={classTeacher:[],principal:[],psychologist:[],other:[]},a=l.find(t=>t.id==="no-need");return l.forEach(t=>{if(t.id==="no-need")return;const g=t.isClassTeacher?"classTeacher":t.contactCategory||"other";r[g]?r[g].push(t):r.other.push(t)}),{groups:r,noNeedOption:a}},[l]),n=r=>r.id==="no-need"?s==="No Need":s===r.name||s===r.id,b=r=>{const a=r.displayName||r.preferredName||r.name||"";return r.gender==="female"&&!a.startsWith("Ms.")&&!a.startsWith("Mrs.")?`Ms. ${a.split(" ")[0]}`:r.gender==="male"&&!a.startsWith("Mr.")?`Mr. ${a.split(" ")[0]}`:a};return e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"backdrop-blur-xl bg-white/60 dark:bg-white/5 border border-white/40 dark:border-white/10 rounded-2xl p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center shadow-md",children:e.jsx(y,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-bold text-foreground",children:"Need Support?"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose someone to talk to"})]})]}),m?e.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"Loading your support team..."}):e.jsxs("div",{className:"space-y-4",children:[Object.entries(d.groups).map(([r,a])=>{if(a.length===0)return null;const t=O[r];if(!t)return a.map(i=>e.jsx(u,{contact:i,selected:n(i),onSelect:c,displayName:b(i)},i.id));const g=t.icon;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${t.gradient} flex items-center justify-center`,children:e.jsx(g,{className:"w-3.5 h-3.5 text-white"})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:t.label})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:a.map(i=>e.jsx(u,{contact:i,selected:n(i),onSelect:c,displayName:b(i),categoryConfig:t},i.id))})]},r)}),d.noNeedOption&&e.jsxs("button",{onClick:()=>c(d.noNeedOption),className:`w-full flex items-center gap-3 rounded-xl border px-4 py-3 transition-all duration-200 ${n(d.noNeedOption)?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-300 dark:border-emerald-600 shadow-sm":"bg-white/40 dark:bg-white/5 border-white/50 dark:border-white/10 hover:bg-white/60"}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center ${n(d.noNeedOption)?"bg-emerald-100 dark:bg-emerald-800/30":"bg-gray-100 dark:bg-gray-800/30"}`,children:e.jsx(N,{className:`w-4.5 h-4.5 ${n(d.noNeedOption)?"text-emerald-600 dark:text-emerald-400":"text-gray-400"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`text-sm font-semibold ${n(d.noNeedOption)?"text-emerald-700 dark:text-emerald-300":"text-foreground"}`,children:"I'm feeling supported"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No support needed right now"})]})]})]})]})}),u=p.memo(({contact:s,selected:o,onSelect:h,displayName:l,categoryConfig:m})=>{const x=(s.name||"").split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2),c=s.displayRole||s.classInfo||s.jobPosition||s.role;return e.jsxs("button",{onClick:()=>h(s),className:`flex items-center gap-3 rounded-xl border px-3 py-2.5 transition-all duration-200 text-left ${o?`${m?.bgLight||"bg-purple-50 dark:bg-purple-900/20"} ${m?.borderLight||"border-purple-200 dark:border-purple-700/40"} shadow-sm`:"bg-white/40 dark:bg-white/5 border-white/50 dark:border-white/10 hover:bg-white/60"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-xl flex items-center justify-center text-xs font-bold ${o?`bg-gradient-to-br ${m?.gradient||"from-purple-400 to-pink-500"} text-white`:"bg-gray-100 dark:bg-gray-800/50 text-muted-foreground"}`,children:s.avatar&&s.avatar!=="âœ“"?s.avatar:x||e.jsx($,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold truncate text-foreground",children:l}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:c})]}),o&&e.jsx(N,{className:"w-4 h-4 text-emerald-500 flex-shrink-0"})]})});u.displayName="ContactCard";I.displayName="StudentSupportSelector";export{I as S};
