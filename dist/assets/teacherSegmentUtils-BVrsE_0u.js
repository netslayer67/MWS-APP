import{n as f,K as h,s as u,d as C}from"./teacherGradeUtils-CER7NXSQ.js";const m={abu:["Grade 7"],yosa:["Grade 7"],nadia:["Grade 7"],novan:["Grade 7"],rifqi:["Grade 8"],"rizki nurul hayati":["Grade 8"],anggie:["Grade 8"],dhaffa:["Grade 9"],tyas:["Grade 9"],vicki:["Grade 9"],zolla:["Grade 9"],hasan:["Grade 7","Grade 8","Grade 9"],hadi:["Grade 7","Grade 8","Grade 9"],himawan:["Grade 7","Grade 8","Grade 9"],"aria wisnuwardana":["Grade 7","Grade 8","Grade 9"],gundah:["Grade 1"],"krisalyssa esna rehulina tarigan":["Grade 1"],almia:["Grade 1"],romasta:["Grade 1"],"zavier cloudya mashareen":["Grade 1"],novia:["Grade 1"],alin:["Grade 2"],bela:["Grade 2"],maria:["Grade 2"],tria:["Grade 2"],laras:["Grade 2"],dini:["Grade 2"],restia:["Grade 2"],reza:["Grade 2"],berliana:["Grade 3"],raisa:["Grade 3"],cecil:["Grade 3"],putri:["Grade 3"],galen:["Grade 3"],salsabila:["Grade 3"],dien:["Grade 3"],ika:["Grade 3"],eva:["Grade 4"],nathasya:["Grade 4"],rike:["Grade 4"],prisy:["Grade 4"],risma:["Grade 4"],galuh:["Grade 4"],annisa:["Grade 4"],iis:["Grade 4"],tri:["Grade 5"],robby:["Grade 5"],nazmi:["Grade 5"],fadholi:["Grade 5"],devi:["Grade 6"],pipiet:["Grade 6"],afi:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],ayunda:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],diya:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],nanda:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],widya:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],yohana:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],ferlyna:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],vinka:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],kholi:["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],latifah:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"]},L={"Junior High":["Grade 7","Grade 8","Grade 9"],Elementary:["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],Kindergarten:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],Pelangi:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"]},b=(e={})=>{const a=new Set;(e.classes||[]).forEach(n=>{if(n?.className){const i=C(n.className),K=n.className.toLowerCase(),o=/kindy|kindergarten|pre[-\s]?k|k\s*1|k\s*2/.test(K),G=i.toLowerCase()==="kindergarten"||!i.startsWith("Kindergarten -");o&&G?h.forEach(d=>a.add(d)):i&&a.add(i)}});const r=(e.unit||"").toLowerCase();return!a.size&&(r==="kindergarten"||r==="pelangi")&&h.forEach(n=>a.add(n)),Array.from(a).filter(Boolean)},P=(e={})=>{const a=[];if(e.username&&a.push(e.username.toLowerCase()),e.name){a.push(e.name.toLowerCase());const r=e.name.split(/[\s,]+/)[0];r&&a.push(r.toLowerCase())}if(e.email){const r=e.email.split("@")[0];r&&a.push(r.toLowerCase())}for(const r of a)if(m[r])return m[r];return[]},A=(e="")=>{if(!e)return[];const a=[],r=e.match(/grade\s*\d+/gi);if(r&&r.forEach(n=>a.push(n.trim().replace(/\s+/g," ").replace(/grade/i,"Grade").trim())),/kindy|kindergarten/i.test(e)){const n=e.match(/kindy\s*[a-z0-9'\-\s]+/i);n?a.push(n[0].trim()):a.push("Kindergarten Pre-K","Kindergarten K1","Kindergarten K2")}return a},S=(e={})=>{const r=(Array.isArray(e?.classes)?e.classes:[]).map(s=>f(s.grade)).filter(Boolean),n=A(e?.jobPosition).map(f).filter(Boolean),i=L[e?.unit]||[],K=(e?.username||e?.name||"").toLowerCase(),o=m[K]||[],G=o.length?o:P(e);let d="all",l=[];r.length?(d="classes",l=r):n.length?(d="job",l=n):G.length?(d="fallback",l=G):i.length&&(d="unit",l=i);let t=Array.from(new Set(l.map(f).filter(Boolean)));!t.some(s=>/^grade\s*\d+/i.test(s)||s.toLowerCase().startsWith("kindergarten")||s.toLowerCase().startsWith("kindy"))&&i.length&&(t=i.slice());const g=new Set(b(e)),c=(e?.unit||"").toLowerCase();(c==="kindergarten"||c==="pelangi")&&!t.some(s=>s.toLowerCase()==="kindergarten")&&t.push("Kindergarten"),(c==="kindergarten"||c==="pelangi")&&!g.size&&h.forEach(s=>g.add(s));const y=Array.from(g),k=u(e?.unit||"",t),p=k?y:[],w=!!p.length||!!(t.length&&(d==="classes"||d==="job"));return{allowedGrades:t,allowedClasses:p,strictClassFilter:k,source:d,shouldFilterServer:w,unit:e?.unit||"",label:t.length?t.join(", "):e?.unit||"All Grades"}};export{S as d};
