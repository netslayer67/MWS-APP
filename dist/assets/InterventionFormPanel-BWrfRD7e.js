import{r as n,j as e,x as f,L as I}from"./index-DcybHeOi.js";import{j as E}from"./teacherDashboardUtils-DMNGSgDv.js";import"./shield-check-K0Cq4BX6.js";const T=[{label:"English",value:"english"},{label:"Math",value:"math"},{label:"Behavior",value:"behavior"},{label:"SEL",value:"sel"},{label:"Attendance",value:"attendance"},{label:"Universal Supports",value:"universal"}],D=["Tier 1","Tier 2","Tier 3"],_=["4 weeks","6 weeks","8 weeks"],L=["Daily","Weekly","Bi-weekly"],M=["Option 1 - Direct Observation","Option 2 - Student Self-Report","Option 3 - Assessment Data"],j=["wpm","%","pts","score"],S=n.memo(({formState:s,onChange:l,onSubmit:N,baseFieldClass:t,textareaClass:u,students:i=[],submitting:o=!1})=>{const[c,p]=n.useState([]),[m,g]=n.useState(!1);n.useEffect(()=>{let a=!0;g(!0);const d=s.type?{type:s.type}:{};return E(d).then(r=>{a&&p(r?.strategies||[])}).catch(()=>{a&&p([])}).finally(()=>{a&&g(!1)}),()=>{a=!1}},[s.type]);const b=n.useMemo(()=>{if(!s.type)return c;const a=s.type.toLowerCase();return c.filter(d=>d.bestFor?.some(r=>r?.toLowerCase().includes(a))||d.tags?.some?.(r=>r?.toLowerCase().includes(a)))},[s.type,c]),h=n.useMemo(()=>i.find(a=>a.id===s.studentId),[i,s.studentId]),y=a=>{const d=a.target.value,r=i.find(x=>x.id===d);l("studentId",d),l("studentName",r?.name||""),l("grade",r?.grade||"")},w=a=>{const d=a.target.value,r=c.find(x=>x._id===d);l("strategyId",d),r?.name&&l("goal",r.overview||s.goal)},v=`${t} flex-1`,k=!!(s.studentId&&s.type&&s.tier&&s.startDate&&s.monitorFrequency&&s.monitorMethod);return e.jsxs("section",{className:"mtss-theme rounded-[32px] border border-white/40 bg-white/90 dark:bg-slate-900/40 shadow-[0_25px_80px_rgba(15,23,42,0.15)] p-6 space-y-6","data-aos":"fade-up","data-aos-duration":"700",children:[e.jsxs("header",{className:"space-y-1","data-aos":"fade-up","data-aos-delay":"60",children:[e.jsxs("p",{className:"uppercase text-xs tracking-[0.4em] text-muted-foreground flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-primary"}),"Plan Builder"]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Set up a playful boost"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drop a mini plan for the kids who need a little more spark this week."})]}),e.jsxs("form",{className:"space-y-5",onSubmit:N,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"90",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsxs("select",{className:t,value:s.studentId,onChange:y,children:[e.jsx("option",{value:"",children:"Select student"}),i.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Class Scope"}),e.jsx("div",{className:"px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",children:h?.className||h?.grade||s.grade||"Filtered to your classes"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"120",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Type"}),e.jsxs("select",{className:t,value:s.type,onChange:a=>l("type",a.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),T.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Tier Level"}),e.jsx("select",{className:t,value:s.tier,onChange:a=>l("tier",a.target.value),children:D.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"150",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Strategy Library"}),e.jsxs("select",{className:t,value:s.strategyId||"",onChange:w,disabled:m,children:[e.jsx("option",{value:"",children:m?"Loading strategies...":"Select strategy"}),b.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suggestions filtered by intervention type."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Duration"}),e.jsxs("select",{className:t,value:s.duration,onChange:a=>l("duration",a.target.value),children:[e.jsx("option",{value:"",children:"Select duration"}),_.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2","data-aos":"fade-up","data-aos-delay":"170",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Goal"}),e.jsx("textarea",{className:u,placeholder:"Describe the intervention goal...",value:s.goal,onChange:a=>l("goal",a.target.value)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"190",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Start Date"}),e.jsx("input",{type:"date",className:t,value:s.startDate,onChange:a=>l("startDate",a.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Frequency"}),e.jsxs("select",{className:t,value:s.monitorFrequency,onChange:a=>l("monitorFrequency",a.target.value),children:[e.jsx("option",{value:"",children:"Select frequency"}),L.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"210",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Method"}),e.jsxs("select",{className:t,value:s.monitorMethod,onChange:a=>l("monitorMethod",a.target.value),children:[e.jsx("option",{value:"",children:"Select method"}),M.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes"}),e.jsx("textarea",{className:u,placeholder:"Add context or reminders...",value:s.notes,onChange:a=>l("notes",a.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"230",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Baseline Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:v,placeholder:"e.g. 45",value:s.baselineValue,onChange:a=>l("baselineValue",a.target.value)}),e.jsx("select",{className:`${t} w-28`,value:s.baselineUnit,onChange:a=>l("baselineUnit",a.target.value),children:j.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Target Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:v,placeholder:"e.g. 70",value:s.targetValue,onChange:a=>l("targetValue",a.target.value)}),e.jsx("select",{className:`${t} w-28`,value:s.targetUnit,onChange:a=>l("targetUnit",a.target.value),children:j.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-3","data-aos":"fade-up","data-aos-delay":"260",children:[e.jsxs("button",{type:"submit",disabled:!k||o,className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-[#ff58c2] to-[#ffb347] text-white font-semibold shadow-[0_15px_40px_rgba(255,88,194,0.25)] transition hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(f,{className:"w-4 h-4"}),o?"Saving...":"Save Intervention Plan"]}),e.jsx("button",{type:"button",className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-white/90 dark:bg-white/10 text-foreground font-semibold border border-border/60",children:"Cancel"})]})]})]})});S.displayName="InterventionFormPanel";export{S as default};
