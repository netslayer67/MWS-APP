import{r as s,a as C,d as S,j as e,H as w,m as i,w as m}from"./index-C84qGWMf.js";import{B as y}from"./button-Cqxj3HF2.js";import{T as I}from"./textarea-Bo_R_aTN.js";import{A}from"./AnimatedPage-5awoaHE4.js";import{S as M}from"./smile-DXFzbDua.js";import{H as E}from"./heart-DgDzCFCl.js";import{M as T}from"./meh-C0cgIxaK.js";import{F as B}from"./frown-DR2alFky.js";import{C as f}from"./circle-check-big-0a8sB_2g.js";import{C as b}from"./circle-x-DCh-dwXm.js";import{S as F}from"./save-DIAZbAac.js";import{S as H}from"./send-CNjnP9KV.js";import{B as P}from"./brain-kzbfILSC.js";import{C as L}from"./camera-c0hZHeez.js";const $=[{icon:M,label:"Happy",value:"happy",color:"text-green-500"},{icon:E,label:"Excited",value:"excited",color:"text-red-500"},{icon:T,label:"Okay",value:"okay",color:"text-yellow-500"},{icon:B,label:"Sad",value:"sad",color:"text-blue-500"}],u=s.memo(({className:o,animate:n})=>e.jsx(i.div,{className:`absolute rounded-full blur-3xl ${o}`,animate:n?{scale:[1,1.1,1],opacity:[.3,.5,.3]}:{},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})),O=o=>String(o||"").replace(/<[^>]*>?/gm,"").replace(/https?:\/\/\S+/g,"").replace(/(script|onerror|onload|data:|vbscript:)/gi,"").trim().slice(0,500),Y=s.memo(function(){const[n,h]=s.useState(null),[c,x]=s.useState(""),[d,p]=s.useState(!1),[a,g]=s.useState(null),[z,j]=s.useState(!0),v=C(),{toast:l}=S();s.useEffect(()=>{(async()=>{try{const r=await m.getTodayCheckinStatus();g(r.data.status)}catch(r){console.error("Failed to load check-in status:",r),l({title:"Error",description:"Failed to load check-in status. Please refresh the page.",variant:"destructive"})}finally{j(!1)}})()},[l]);const N=async()=>{if(n){p(!0);try{const t={weatherType:"sunny",selectedMoods:[n],details:c,presenceLevel:7,capacityLevel:7,supportContactUserId:"no_need"};await m.submitCheckin(t),l({title:"Check-in Successful",description:"Your manual check-in has been saved successfully!"});const r=await m.getTodayCheckinStatus();g(r.data.status),h(null),x("")}catch(t){console.error("Check-in submission failed:",t),l({title:"Check-in Failed",description:t.response?.data?.message||"Failed to save your check-in. Please try again.",variant:"destructive"})}finally{p(!1)}}};return e.jsxs(A,{children:[e.jsx(w,{children:e.jsx("title",{children:"Student Emotional Check-in â€” Kerjain"})}),e.jsxs("div",{className:"min-h-screen text-foreground relative overflow-hidden",children:[e.jsx(u,{className:"-top-40 -left-40 w-96 h-96 bg-primary/10",animate:!0}),e.jsx(u,{className:"-bottom-40 -right-40 w-80 h-80 bg-accent/10",animate:!0}),e.jsx(u,{className:"top-1/2 left-1/2 w-64 h-64 bg-gold/10",animate:!0}),e.jsx("div",{className:"absolute inset-0 bg-grid-small opacity-5 dark:opacity-10"}),e.jsx("div",{className:"container mx-auto px-4 py-8 relative z-10",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2 bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent",children:"ðŸŒŸ How are you feeling today?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your feelings matter! Share how you're doing so we can support you."})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"glass-strong rounded-2xl p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Select your mood"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:$.map(t=>{const r=t.icon,k=n===t.value;return e.jsxs(i.button,{whileTap:{scale:.95},onClick:()=>h(t.value),className:`p-4 rounded-xl border-2 transition-all duration-300 ${k?"border-primary bg-primary/10 shadow-lg":"border-border/40 bg-card/50 hover:border-border/60"}`,children:[e.jsx(r,{className:`w-8 h-8 mx-auto mb-2 ${t.color}`}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:t.label})]},t.value)})})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"glass-strong rounded-2xl p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Share your thoughts (optional)"}),e.jsx(I,{value:c,onChange:t=>x(O(t.target.value)),placeholder:"What's on your mind today?",className:"min-h-[100px] resize-none transition-all duration-300",maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[c.length,"/500 characters"]})]}),a&&e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.25},className:"glass-strong rounded-2xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Today's Check-in Status"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${a.hasManualCheckin?"bg-green-500/10 border border-green-500/30":"bg-muted/50 border border-border/40"}`,children:[a.hasManualCheckin?e.jsx(f,{className:"w-4 h-4 text-green-500"}):e.jsx(b,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:"Manual Check-in"})]}),e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${a.hasAICheckin?"bg-green-500/10 border border-green-500/30":"bg-muted/50 border border-border/40"}`,children:[a.hasAICheckin?e.jsx(f,{className:"w-4 h-4 text-green-500"}):e.jsx(b,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:"AI Analysis"})]})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{onClick:N,disabled:!n||d||a&&a.hasManualCheckin,className:"w-full bg-gradient-to-r from-primary to-accent text-primary-foreground hover-card transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[d?e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(H,{className:"w-4 h-4 mr-2"}),d?"Saving...":a?.hasManualCheckin?"Manual Check-in Completed":"Manual Check-in"]}),a?.hasManualCheckin&&e.jsx("p",{className:"text-xs text-green-600 text-center font-medium",children:"âœ… You have already completed manual check-in today"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{onClick:()=>v("/emotional-checkin/face-scan"),disabled:a&&a.hasAICheckin,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:opacity-90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",variant:"outline",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),e.jsx(L,{className:"w-4 h-4 mr-2"}),a?.hasAICheckin?"AI Analysis Completed":"AI Emotional Analysis"]}),a?.hasAICheckin&&e.jsx("p",{className:"text-xs text-green-600 text-center font-medium",children:"âœ… You have already completed AI analysis today"}),!a?.hasAICheckin&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Advanced AI facial analysis for accurate emotional insights"})]})]})]})})]})]})});Y.displayName="EmotionalCheckinPage";export{Y as default};
