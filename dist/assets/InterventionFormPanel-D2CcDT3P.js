import{r as c,j as e,q as y,L as A}from"./index-84ghxoiZ.js";import{o as _}from"./teacherDashboardUtils-StyvLZ3_.js";import"./shield-check-Cz4BhPil.js";const D=[{label:"English",value:"english"},{label:"Math",value:"math"},{label:"Behavior",value:"behavior"},{label:"SEL",value:"sel"},{label:"Attendance",value:"attendance"},{label:"Universal Supports",value:"universal"}],L={english:["english","ela","literacy","reading","ela/reading","ela & reading","sight words"],math:["math","mathematics","numeracy","stem"],behavior:["behavior","behaviour","conduct","regulation","sel"],sel:["sel","social emotional","social-emotional","behavior","wellness"],attendance:["attendance","present","absent","absences","engagement"],universal:["universal","schoolwide","all","tier 1"]},M=["Tier 1","Tier 2","Tier 3"],O=["4 weeks","6 weeks","8 weeks"],R=["Daily","Weekly","Bi-weekly"],U=["Option 1 - Direct Observation","Option 2 - Student Self-Report","Option 3 - Assessment Data"],w=["wpm","%","pts","score"],P=c.memo(({formState:s,onChange:l,onSubmit:k,baseFieldClass:t,textareaClass:h,students:x=[],submitting:m=!1})=>{const[u,v]=c.useState([]),[f,j]=c.useState(!1);c.useEffect(()=>{let a=!0;j(!0);const r=s.type?{type:s.type}:{};return _(r).then(n=>{a&&v(n?.strategies||[])}).catch(()=>{a&&v([])}).finally(()=>{a&&j(!1)}),()=>{a=!1}},[s.type]);const I=c.useMemo(()=>{if(!s.type)return u;const a=s.type.toLowerCase(),r=L[a]||[a],n=new Set(r.map(d=>d.toLowerCase())),i=(d="")=>{const o=d.toString().toLowerCase();return o?Array.from(n).some(p=>o===p||o.includes(p)):!1};return u.filter(d=>{const o=Array.isArray(d.bestFor)?d.bestFor.some(g=>i(g)):!1,p=Array.isArray(d.tags)?d.tags.some(g=>i(g)):!1;return o||p})},[s.type,u]),N=c.useMemo(()=>x.find(a=>a.id===s.studentId),[x,s.studentId]),E=a=>{const r=a.target.value,n=x.find(i=>i.id===r);l("studentId",r),l("studentName",n?.name||""),l("grade",n?.grade||"")},T=a=>{const r=a.target.value,n=u.find(i=>i._id===r);l("strategyId",r),n?.name&&l("goal",n.overview||s.goal)},b=`${t} flex-1`,S=!!(s.studentId&&s.type&&s.tier&&s.startDate&&s.monitorFrequency&&s.monitorMethod);return e.jsxs("section",{className:"mtss-theme rounded-[32px] border border-white/40 bg-white/90 dark:bg-slate-900/40 shadow-[0_25px_80px_rgba(15,23,42,0.15)] p-6 space-y-6","data-aos":"fade-up","data-aos-duration":"700",children:[e.jsxs("header",{className:"space-y-1","data-aos":"fade-up","data-aos-delay":"60",children:[e.jsxs("p",{className:"uppercase text-xs tracking-[0.4em] text-muted-foreground flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-primary"}),"Plan Builder"]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Set up a playful boost"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drop a mini plan for the kids who need a little more spark this week."})]}),e.jsxs("form",{className:"space-y-5",onSubmit:k,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"90",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsxs("select",{className:t,value:s.studentId,onChange:E,children:[e.jsx("option",{value:"",children:"Select student"}),x.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Class Scope"}),e.jsx("div",{className:"px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",children:N?.className||N?.grade||s.grade||"Filtered to your classes"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"120",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Type"}),e.jsxs("select",{className:t,value:s.type,onChange:a=>l("type",a.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),D.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Tier Level"}),e.jsx("select",{className:t,value:s.tier,onChange:a=>l("tier",a.target.value),children:M.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"150",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Strategy Library"}),e.jsxs("select",{className:t,value:s.strategyId||"",onChange:T,disabled:f,children:[e.jsx("option",{value:"",children:f?"Loading strategies...":"Select strategy"}),I.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suggestions filtered by intervention type."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Duration"}),e.jsxs("select",{className:t,value:s.duration,onChange:a=>l("duration",a.target.value),children:[e.jsx("option",{value:"",children:"Select duration"}),O.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2","data-aos":"fade-up","data-aos-delay":"170",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Goal"}),e.jsx("textarea",{className:h,placeholder:"Describe the intervention goal...",value:s.goal,onChange:a=>l("goal",a.target.value)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"190",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Start Date"}),e.jsx("input",{type:"date",className:t,value:s.startDate,onChange:a=>l("startDate",a.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Frequency"}),e.jsxs("select",{className:t,value:s.monitorFrequency,onChange:a=>l("monitorFrequency",a.target.value),children:[e.jsx("option",{value:"",children:"Select frequency"}),R.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"210",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Method"}),e.jsxs("select",{className:t,value:s.monitorMethod,onChange:a=>l("monitorMethod",a.target.value),children:[e.jsx("option",{value:"",children:"Select method"}),U.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes"}),e.jsx("textarea",{className:h,placeholder:"Add context or reminders...",value:s.notes,onChange:a=>l("notes",a.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"230",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Baseline Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:b,placeholder:"e.g. 45",value:s.baselineValue,onChange:a=>l("baselineValue",a.target.value)}),e.jsx("select",{className:`${t} w-28`,value:s.baselineUnit,onChange:a=>l("baselineUnit",a.target.value),children:w.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Target Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:b,placeholder:"e.g. 70",value:s.targetValue,onChange:a=>l("targetValue",a.target.value)}),e.jsx("select",{className:`${t} w-28`,value:s.targetUnit,onChange:a=>l("targetUnit",a.target.value),children:w.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-3 pt-3","data-aos":"fade-up","data-aos-delay":"260",children:e.jsxs("button",{type:"submit",disabled:!S||m,className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-[#ff58c2] to-[#ffb347] text-white font-semibold shadow-[0_15px_40px_rgba(255,88,194,0.25)] transition hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?e.jsx(A,{className:"w-4 h-4 animate-spin"}):e.jsx(y,{className:"w-4 h-4"}),m?"Saving...":"Save Intervention Plan"]})})]})]})});P.displayName="InterventionFormPanel";export{P as default};
