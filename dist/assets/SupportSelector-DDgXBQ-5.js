import{r as t,a as g,d as N,q as b,j as e}from"./index-B1azmWwg.js";import{U as v}from"./users-B-1Atc9_.js";import{C as y}from"./chevron-down-DOBLdJMM.js";import{U as w}from"./user-check-CH1cjIU1.js";import{C as S}from"./circle-check-lUgokG-M.js";const k=s=>{if(!s)return"";const a=String(s).toLowerCase();return a==="f"||a==="female"?"Ms.":a==="m"||a==="male"?"Mr.":""},C=s=>{if(s?.displayName)return s.displayName;const a=k(s?.gender),i=s?.username||s?.name||"";return`${a?`${a} `:""}${i}`.trim()},A=t.memo(()=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-emerald/10 border border-emerald/20 flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-emerald"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Need Support?"}),e.jsx("p",{className:"text-xs text-foreground/70",children:"Select someone to check in with you today"})]})]})),U=t.memo(({internalSelection:s,onInternalChange:a,hasSelection:i,supportContacts:l,loading:m})=>e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s,onChange:d=>a(d.target.value),disabled:m||l.length===0,className:`w-full px-3 py-2.5 bg-card/50 border border-border/60 rounded-lg text-sm text-foreground appearance-none cursor-pointer transition-all duration-300 ${i?"border-emerald/50 bg-emerald/5":"hover:border-emerald/30"} focus:outline-none focus:border-emerald focus:ring-1 focus:ring-emerald/20 ${m||l.length===0?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:m?"Loading...":l.length===0?"No contacts available":"Choose a team member..."}),l.map(d=>e.jsx("option",{value:d.value,children:d.displayValue},d.id))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(y,{className:`w-4 h-4 transition-colors ${i?"text-emerald":"text-foreground/50"}`})})]})),$=t.memo(({selectedPerson:s})=>e.jsx("div",{className:"p-3 rounded-lg bg-emerald/5 border border-emerald/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-emerald/20 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-emerald",children:s.avatar})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-3.5 h-3.5 text-emerald flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium text-emerald truncate",children:s.displayValue||s.displayName||s.name})]}),e.jsxs("p",{className:"text-xs text-foreground/70",children:["We'll arrange for ",s.displayValue||s.displayName||s.name," to connect with you today."]})]})]})})),E=t.memo(()=>e.jsx("div",{className:"p-3 rounded-lg bg-emerald/5 border border-emerald/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-emerald flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-emerald",children:"Great! You're feeling supported"}),e.jsx("p",{className:"text-xs text-foreground/70",children:"Remember, our team is always here when you need us."})]})]})})),V=t.memo(()=>e.jsx("div",{className:"p-3 rounded-lg bg-card/30 border border-border/40",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ’¬"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-xs text-foreground/70 leading-relaxed",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Tip:"}),` Select a team member if you'd like someone to check in with you, or choose "No Need" if you're feeling well-supported today.`]})})]})})),D=t.memo(()=>e.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald animate-pulse"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Our support team is available today"})]})),M=t.memo(({supportContact:s,onSupportChange:a})=>{const i=g(),{contacts:l,loading:m}=N(r=>r.support),{isAuthenticated:d}=N(r=>r.auth),[n,x]=t.useState(s||"");t.useEffect(()=>{if(l.length===0&&d&&!m){const r=setTimeout(()=>{i(b())},100);return()=>clearTimeout(r)}},[i,l.length,d,m]);const c=t.useMemo(()=>(console.log("SupportSelector contacts:",l),l.length===0?[]:l.map(r=>{const o=C(r);return{...r,displayValue:o,value:o,avatar:r.avatar||o.charAt(0).toUpperCase()}})),[l]);t.useEffect(()=>{if(!s){x("");return}const r=c.find(o=>o.name===s||o.value===s);x(r?r.value:s)},[s,c]);const u=t.useMemo(()=>{const r=c.find(p=>p.value===n||p.name===n);if(r)return r;const o=n;return{name:n,displayValue:o,value:o,role:"Support Contact",department:"N/A",jobLevel:"N/A",unit:"N/A",jobPosition:"N/A",avatar:n?n.charAt(0).toUpperCase():"?"}},[n,c]),f=n==="No Need",h=!!n,j=r=>{x(r),a&&a(r)};return e.jsxs("div",{className:"bg-card/30 border border-border/40 rounded-lg p-4 space-y-4",children:[e.jsx(A,{}),e.jsx(U,{internalSelection:n,onInternalChange:j,hasSelection:h,supportContacts:c,loading:m}),h&&!f&&u&&u.id!=="no-need"&&e.jsx($,{selectedPerson:u}),f&&e.jsx(E,{}),!h&&e.jsx(V,{}),e.jsx(D,{})]})});M.displayName="SupportSelector";export{M as default};
