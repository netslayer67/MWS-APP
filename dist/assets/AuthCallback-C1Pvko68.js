import{a as c,e as l,u as n,r as i,j as u,P as g,f as h}from"./index-By89xKr2.js";const f=()=>{const a=c(),[t]=l(),o=n();return i.useEffect(()=>{(async()=>{try{const e=t.get("token"),r=t.get("user");if(!e||!r){console.error("Missing token or user data"),a("/login?error=missing_data");return}const s=JSON.parse(decodeURIComponent(r));console.log("üîê OAuth login successful:",s.email),localStorage.setItem("token",e),localStorage.setItem("auth_token",e),localStorage.setItem("auth_user",JSON.stringify(s)),o(h({user:s,token:e})),console.log("üîÑ Redirecting to role selection after OAuth login"),a("/select-role")}catch(e){console.error("Auth callback error:",e),a("/login?error=callback_failed")}})()},[a,t,o]),u.jsx(g,{})};export{f as default};
