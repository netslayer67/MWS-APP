const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardOverview-C25djjgZ.js","assets/index-B1rSvVjj.js","assets/index-_qceslZx.css","assets/StudentsTable-Dhb8vXgm.js","assets/interventionSelection-Vcld4Os_.js","assets/eye-vvhvhBva.js","assets/chevron-down-DVaBXe7n.js","assets/circle-check-CDMX92-w.js","assets/CategoricalChart-DTqJ0OnW.js","assets/LineChart-D5zPiFrI.js","assets/CartesianChart-BKAn3MkZ.js","assets/Line-qCXLBAiz.js","assets/ActivePoints-BuDQvKDM.js","assets/ErrorBarContext-dP0IcuSr.js","assets/chevron-left-B3fXy9kp.js","assets/StudentsPanel-cU87wEsU.js","assets/funnel-BBwpUQlz.js","assets/search-xoxB2D8c.js","assets/users-round-B2CWZFEI.js","assets/teacherGradeUtils-COfj_G-K.js","assets/teacherSegmentUtils-BaJgF7HQ.js","assets/teacherMappingUtils-CzV_VARO.js","assets/shield-check-Dkdptd2z.js","assets/arrow-right-DJag8ZQe.js","assets/StatusPills-itge4cy0.js","assets/InterventionFormPanel-CPHdimBW.js","assets/ProgressFormPanel-nM4OHVzH.js"])))=>i.map(i=>d[i]);
import{c as ae,e as J,z as re,r as n,d as ne,ac as oe,ad as q,ae as ie,af as le,j as e,w as de,Z as ce,m as z,X as me,_ as V,L as ue,b as ge,P as pe}from"./index-B1rSvVjj.js";import{C as xe,U as be}from"./users-round-B2CWZFEI.js";import{b as he,a as fe}from"./teacherGradeUtils-COfj_G-K.js";import{d as ve}from"./teacherSegmentUtils-BaJgF7HQ.js";import{g as ye,b as R,m as Ne,a as je,C as ke,n as we}from"./teacherMappingUtils-CzV_VARO.js";import{A as Se}from"./arrow-right-DJag8ZQe.js";import{P as H,T as G}from"./StatusPills-itge4cy0.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ie=ae("circle-plus",_e),B=[{key:"dashboard",label:"Dashboard",icon:xe},{key:"students",label:"My Students",icon:be},{key:"create",label:"Create Intervention",icon:Ie}],A={base:"px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground dark:text-white placeholder:text-muted-foreground/70 dark:placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all"};A.textarea=`${A.base} min-h-[80px]`;A.notes=`${A.base} min-h-[120px]`;const E=()=>({studentId:"",studentName:"",grade:"",className:"",type:"",strategyId:"",strategyName:"",tier:"tier2",goal:"",notes:"",startDate:"",duration:"",monitorFrequency:"",monitorMethod:"",baselineValue:"",baselineUnit:"score",targetValue:"",targetUnit:"score"}),O=()=>({studentId:"",assignmentId:"",studentName:"",date:"",performed:"yes",scoreValue:"",scoreUnit:"score",badge:"ðŸŽ‰ Progress Party",notes:""}),Ce=t=>{const{toast:s}=J(),a=re(),[o,u]=n.useState("dashboard"),[i,b]=n.useState(()=>E()),[l,g]=n.useState(()=>O()),[N,d]=n.useState(!1),[c,h]=n.useState(!1),m=ne(p=>p.auth?.user);n.useEffect(()=>{const x=new URLSearchParams(a.search).get("tab");x&&t.some(r=>r.key===x)&&u(x)},[a.search,t]);const f=n.useCallback((p,x)=>{b(r=>({...r,[p]:x}))},[]),k=n.useCallback((p,x)=>{g(r=>({...r,[p]:x}))},[]),j=n.useCallback(async(p,x)=>{if(p.preventDefault(),N)return;const r=x||i;if(["studentId","type","tier","startDate","monitorFrequency","monitorMethod"].filter(y=>!r[y]).length){s({title:"Complete the required fields",description:"Student, type, tier, start date, frequency, and method are required.",variant:"destructive"});return}try{d(!0);const M={mentorId:m?.id||m?._id,studentIds:[r.studentId],tier:r.tier,focusAreas:r.type?[r.type]:["Universal Supports"],startDate:r.startDate||new Date().toISOString(),duration:r.duration||void 0,strategyId:r.strategyId||void 0,strategyName:r.strategyName||void 0,monitoringMethod:r.monitorMethod||void 0,monitoringFrequency:r.monitorFrequency||void 0,metricLabel:r.baselineUnit||r.targetUnit||"score",baselineScore:r.baselineValue?{value:Number(r.baselineValue),unit:r.baselineUnit||"score"}:void 0,targetScore:r.targetValue?{value:Number(r.targetValue),unit:r.targetUnit||"score"}:void 0,notes:r.notes||void 0,goals:r.goal?[{description:r.goal,successCriteria:""}]:void 0};await oe(M),s({title:"Intervention saved",description:"Student plan created successfully. Track their progress!"}),b(E())}catch(y){console.error("Failed to save intervention plan:",y),s({title:"Failed to save plan",description:y?.response?.data?.message||y?.message||"Please try again.",variant:"destructive"})}finally{d(!1)}},[i,N,s,m]),v=n.useCallback(async p=>{if(p.preventDefault(),!c){if(!l.assignmentId||!l.notes){s({title:"Complete the required fields",description:"Please select a student and provide progress notes.",variant:"destructive"});return}try{h(!0);const x={checkIns:[{date:l.date||new Date().toISOString(),summary:l.notes||"Progress update",value:l.scoreValue?Number(l.scoreValue):void 0,unit:l.scoreUnit||"score",performed:l.performed==="yes"||l.performed===!0,celebration:l.badge||void 0}]};await q(l.assignmentId,x),s({title:"Progress submitted",description:"Your monitoring update is live on the MTSS dashboard."}),g(O())}catch(x){console.error("Failed to submit progress:",x),s({title:"Failed to submit progress",description:x?.response?.data?.message||x?.message||"Please try again.",variant:"destructive"})}finally{h(!1)}}},[l,c,s]),w=n.useCallback(()=>{b(E())},[]),S=n.useCallback(()=>{g(O())},[]);return{activeTab:o,setActiveTab:u,interventionForm:i,progressForm:l,handleInterventionChange:f,handleProgressChange:k,handleSavePlan:j,handleSubmitProgress:v,resetInterventionForm:w,resetProgressForm:S,submittingPlan:N,setSubmittingPlan:d,submittingProgress:c,setSubmittingProgress:h}},Pe={male:"Mr.",female:"Ms."},K=t=>Pe[t?.toLowerCase?.()]||"",Y=t=>{const s=["Hey %NAME%, let's light up today's boosts.","Morning %NAME%, ready to spark joyful wins?","%NAME%, today's plan is setâ€”let's uplift every student.","Cheers %NAME%, another day to glow-up kids' progress.","Let's dive in %NAME%, the boost studio is humming."],a=new Date,o=(a.getDate()+a.getMonth())%s.length;return s[o].replace("%NAME%",t)},Te=t=>{const s=t?.username||t?.name||"MTSS Mentor",a=K(t?.gender),o=a?`${a} ${s}`:s;return{teacher:o,school:t?.jobPosition||t?.unit||"Millennia21 Schools",tierFocus:"Personalized supports",greeting:Y(o),gradeLabel:t?.unit||"All Grades"}},De=()=>{const t=n.useMemo(()=>ye(),[]),s=n.useMemo(()=>Te(t),[t]),a=n.useMemo(()=>ve(t),[t]),[o,u]=n.useState(()=>R()),[i,b]=n.useState([]),[l,g]=n.useState([]),[N,d]=n.useState(s),[c,h]=n.useState(!0),[m,f]=n.useState(null),k=n.useCallback(async j=>{h(!0),f(null);try{const v=he(a),w=fe(a),S=v.length&&(a.shouldFilterServer||a.unit!=="Junior High"),p={limit:a.unit==="Junior High"?500:200};S&&(p.grade=v.join(",")),w.length&&(p.className=w.join(","));const[x,r]=await Promise.all([ie({limit:150},j?{signal:j}:{}),le(p,j?{signal:j}:{})]),_=x.assignments||x||[],I=R(_),y=t?.username||t?.name||s.teacher,M=t?.gender,P=Ne(_,y),F=r?.students||[],L=je(F,P.students,a),U=K(M),$=U?`${U} ${y}`:y;u(I);const T=L.length?L:P.students;b(T),g(P.spotlightChart.length?P.spotlightChart:[{label:"Start",date:"Start",reading:0,goal:100,value:0}]),d(Q=>({...Q,...s,teacher:$||s.teacher,greeting:Y($||s.teacher),tierFocus:P.focusLabel||Q.tierFocus||"Tiered Supports",gradeLabel:a.label}))}catch(v){v?.name!=="CanceledError"&&v?.name!=="AbortError"&&f(v?.response?.data?.message||v?.message||"Failed to load MTSS data")}finally{h(!1)}},[s,a]);return n.useEffect(()=>{const j=new AbortController;return k(j.signal),()=>j.abort()},[k]),{statCards:o,students:i,progressData:l.length?l:[{label:"Start",date:"Start",reading:0,goal:100,value:0}],heroBadge:N,loading:c,error:m,refresh:()=>k()}},X=({heroBadge:t,tabs:s,activeTab:a,onTabChange:o})=>e.jsx("div",{className:"relative rounded-[32px] sm:rounded-[40px] p-[1.5px] bg-gradient-to-br from-[#f472b6]/60 via-[#818cf8]/50 to-[#34d399]/60 shadow-[0_30px_80px_rgba(99,102,241,0.2)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[30px] sm:rounded-[38px] border border-white/40 dark:border-white/10 bg-white/80 dark:bg-slate-900/70 backdrop-blur-2xl",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 sm:w-80 sm:h-80 bg-gradient-to-br from-[#f472b6]/20 via-[#a78bfa]/15 to-transparent blur-[100px] sm:blur-[140px]"}),e.jsx("div",{className:"absolute -bottom-16 -right-16 w-72 h-72 sm:w-96 sm:h-96 bg-gradient-to-tl from-[#22d3ee]/20 via-[#818cf8]/10 to-transparent blur-[120px] sm:blur-[160px]"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-[#fbbf24]/8 blur-[100px] rounded-full"}),e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_left,_rgba(255,255,255,0.7),_transparent_50%)]"})]}),e.jsxs("div",{className:"relative px-4 py-6 sm:px-7 sm:py-8 lg:px-9 text-slate-900 dark:text-white",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-[10px] sm:text-[11px] font-bold uppercase tracking-[0.35em] text-white bg-gradient-to-r from-[#f472b6] via-[#a78bfa] to-[#818cf8] px-3 py-1.5 rounded-full shadow-[0_4px_20px_rgba(168,85,247,0.35)]",children:[e.jsx(de,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),"MTSS Studio"]}),e.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full bg-white/90 dark:bg-white/10 border border-white/60 dark:border-white/15 text-[10px] sm:text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-600 dark:text-slate-200 shadow-sm",children:t.school}),e.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full bg-gradient-to-r from-emerald-400/20 to-cyan-400/20 dark:from-emerald-500/20 dark:to-cyan-500/20 border border-emerald-300/40 dark:border-emerald-500/20 text-[10px] sm:text-[11px] font-bold text-emerald-700 dark:text-emerald-300",children:t.gradeLabel})]}),e.jsxs("div",{className:"flex flex-col gap-5 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsx("h1",{className:"text-[22px] sm:text-3xl lg:text-[2.5rem] font-black leading-[1.15] bg-gradient-to-r from-[#1e1b4b] via-[#6366f1] to-[#ec4899] dark:from-[#e0e7ff] dark:via-[#c4b5fd] dark:to-[#f9a8d4] text-transparent bg-clip-text",children:t.greeting||`Hey ${t.teacher}, let's light up today's boosts.`}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 rounded-full bg-gradient-to-r from-amber-400/15 to-orange-400/15 dark:from-amber-500/15 dark:to-orange-500/15 border border-amber-300/40 dark:border-amber-500/20",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-amber-500"})]}),e.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-amber-700 dark:text-amber-300",children:["Focus today: ",t.tierFocus]})]})]}),e.jsxs("div",{className:"flex gap-2.5 sm:gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-3.5 sm:px-4 py-2.5 sm:py-3 rounded-2xl bg-gradient-to-br from-indigo-50/90 to-purple-50/90 dark:from-indigo-900/30 dark:to-purple-900/20 border border-indigo-200/50 dark:border-indigo-500/15 shadow-sm",children:[e.jsx("span",{className:"hidden sm:inline-flex h-8 w-8 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 text-white shadow-[0_4px_12px_rgba(99,102,241,0.35)]",children:e.jsx(ce,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-semibold uppercase tracking-[0.25em] text-indigo-400 dark:text-indigo-300",children:"Teacher"}),e.jsx("span",{className:"block text-sm sm:text-base font-bold text-slate-800 dark:text-white leading-tight",children:t.teacher})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5 px-3.5 sm:px-4 py-2.5 sm:py-3 rounded-2xl bg-gradient-to-br from-emerald-50/90 to-teal-50/90 dark:from-emerald-900/30 dark:to-teal-900/20 border border-emerald-200/50 dark:border-emerald-500/15 shadow-sm",children:[e.jsx("span",{className:"hidden sm:inline-flex h-8 w-8 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-400 to-teal-500 text-white shadow-[0_4px_12px_rgba(52,211,153,0.35)]",children:e.jsx(ke,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-semibold uppercase tracking-[0.25em] text-emerald-500 dark:text-emerald-300",children:"Today"}),e.jsx("span",{className:"block text-sm sm:text-base font-bold text-slate-800 dark:text-white leading-tight",children:t.dateLabel||"Ready to roll"})]})]})]})]}),e.jsx("div",{className:"mt-6 sm:mt-7",children:e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:s.map(u=>{const i=u.icon,b=a===u.key;return e.jsxs("button",{onClick:()=>o(u.key),className:`group flex items-center justify-between gap-2 rounded-2xl px-3.5 sm:px-4 py-3 sm:py-3.5 text-sm font-semibold transition-all duration-200 border ${b?"bg-gradient-to-r from-[#6366f1] via-[#8b5cf6] to-[#d946ef] text-white border-transparent shadow-[0_12px_35px_rgba(99,102,241,0.4)] scale-[1.02]":"bg-white/80 dark:bg-slate-800/80 text-slate-600 dark:text-white border-white/70 dark:border-slate-600/60 hover:bg-white dark:hover:bg-slate-700/80 hover:border-indigo-200/50 dark:hover:border-indigo-400/40 hover:shadow-[0_8px_25px_rgba(99,102,241,0.12)] dark:hover:shadow-[0_8px_25px_rgba(99,102,241,0.2)]"}`,"aria-pressed":b,children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center rounded-xl transition-all ${b?"bg-white/25 text-white":"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-600 text-slate-500 dark:text-slate-200 group-hover:from-indigo-50 group-hover:to-purple-50 group-hover:text-indigo-500 dark:group-hover:from-indigo-800 dark:group-hover:to-purple-800 dark:group-hover:text-indigo-300"}`,children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx("span",{className:"truncate",children:u.label})]}),e.jsx(Se,{className:`w-4 h-4 flex-shrink-0 transition-transform duration-200 ${b?"translate-x-0.5":"opacity-0 -translate-x-1 group-hover:opacity-100 group-hover:translate-x-0"}`})]},u.key)})})})]})]})});X.displayName="TeacherHeroSection";const Me=n.memo(X),D="px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground placeholder:text-muted-foreground/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all w-full",C="px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",Z=t=>t!=null&&t!=="",Le=t=>{if(!t)return null;if(Z(t.goal))return t.goal;const s=t.goals;if(typeof s=="string")return s;if(!Array.isArray(s)||s.length===0)return null;const a=s.find(o=>o);return a?typeof a=="string"?a:a.description||a.goal||a.title||a.name||null:null},W=(t,s)=>{if(t==null||t==="")return null;if(typeof t=="number"||typeof t=="string"){const u=`${t}`.trim();return u?`${u}${s?` ${s}`:""}`:null}const a=t?.value??t?.score??t?.amount;if(a==null||a==="")return null;const o=t?.unit||s;return`${a}${o?` ${o}`:""}`},Ae=t=>{const s=[t?.monitoringMethod,t?.monitoringFrequency].filter(a=>Z(a));return s.length?s.join(" / "):"Not set"},Ue=t=>{const s=W(t?.baselineScore,t?.metricLabel),a=W(t?.targetScore,t?.metricLabel);return!s&&!a?"Not set":`${s||"Not set"} to ${a||"Not set"}`},$e=t=>{if(!t)return[];const s=Array.isArray(t.assignmentOptions)?t.assignmentOptions:[];return s.length?s:t.assignmentId?[{assignmentId:t.assignmentId,focus:t.type||"Focused Support",tier:t.tier||"Tier 1",tierCode:we(t.tier)||"tier1",statusLabel:t.progress||"On Track"}]:[]},Ve=(t=[])=>{const s=t.filter(a=>a.tierCode&&a.tierCode!=="tier1");return s.length?s:t},Fe=t=>{const s=t.focus||t.label||"Focused Support",a=t.tier||"Tier 1";return`${s} - ${a}`},ee=n.memo(({student:t,onClose:s,onSubmit:a,submitting:o=!1})=>{const u=n.useMemo(()=>new Date().toISOString().split("T")[0],[]),i=n.useMemo(()=>Ve($e(t)),[t]),b=i[0],l=b?.assignmentId||"",[g,N]=n.useState({date:u,performed:"yes",scoreValue:"",scoreUnit:b?.metricLabel||"score",notes:"",badge:"ðŸŽ‰ Progress Party",assignmentId:l}),d=i.find(r=>r.assignmentId===g.assignmentId),c=d?.metricLabel||g.scoreUnit||"score",h=d?.strategyName||d?.strategy||d?.focus||"Not set",m=Le(d)||"Not set",f=d?.duration||"Ongoing",k=Ae(d),j=Ue(d);if(!t)return null;const v=t.grade||t.currentGrade||"Grade",w=t.tier||t.primaryIntervention?.tier||"Tier 1",S=`${v} - ${w}`,p=(r,_)=>{if(r==="assignmentId"){const I=i.find(y=>y.assignmentId===_);N(y=>({...y,assignmentId:_,scoreUnit:I?.metricLabel||y.scoreUnit}));return}N(I=>({...I,[r]:_}))},x=r=>{r.preventDefault(),a?.(t,g)};return e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center px-4 mtss-theme",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:s,"aria-hidden":"true"}),e.jsxs(z.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl rounded-[28px] overflow-hidden border border-white/40 bg-white/95 dark:bg-slate-900/90 shadow-[0_25px_80px_rgba(15,23,42,0.35)]",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#34d399]/80 via-[#22d3ee]/80 to-[#60a5fa]/80 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase text-xs tracking-[0.4em] opacity-80",children:"Quick Update"}),e.jsx("h3",{className:"text-2xl font-bold",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:"Share today's check-in and celebrations"})]}),e.jsx("button",{onClick:s,"aria-label":"Close",className:"p-2 bg-white/30 rounded-full hover:bg-white/50 transition",disabled:o,children:e.jsx(me,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-white/40 bg-white/80 dark:bg-white/5",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Details"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Strategy"}),e.jsx("div",{className:C,children:h})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Goal"}),e.jsx("div",{className:C,children:m})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Duration"}),e.jsx("div",{className:C,children:f})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Method / Frequency"}),e.jsx("div",{className:C,children:k})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Baseline to Target"}),e.jsx("div",{className:C,children:j})]})]})]}),e.jsxs("form",{className:"p-6 space-y-4",onSubmit:x,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsx("div",{className:C,children:t.name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Grade / Tier"}),e.jsx("div",{className:C,children:S})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Focus Subject (Tier 2/3)"}),e.jsx("select",{className:D,value:g.assignmentId,onChange:r=>p("assignmentId",r.target.value),disabled:!i.length,children:i.length?i.map(r=>e.jsx("option",{value:r.assignmentId,children:Fe(r)},r.assignmentId)):e.jsx("option",{value:"",children:"No Tier 2/3 subjects available"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Date"}),e.jsx("input",{type:"date",className:D,value:g.date,onChange:r=>p("date",r.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Performed?"}),e.jsxs("select",{className:D,value:g.performed,onChange:r=>p("performed",r.target.value),children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Status or Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:`${D} flex-1`,placeholder:"e.g. 78",value:g.scoreValue,onChange:r=>p("scoreValue",r.target.value)}),e.jsx("div",{className:`${C} w-28 flex items-center`,children:c})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Celebration Emoji"}),e.jsxs("select",{className:D,value:g.badge,onChange:r=>p("badge",r.target.value),children:[e.jsx("option",{value:"ðŸŽ‰ Progress Party",children:"ðŸŽ‰ Progress Party"}),e.jsx("option",{value:"âœ¨ Stellar Boost",children:"âœ¨ Stellar Boost"}),e.jsx("option",{value:"ðŸŒˆ Focus Mode",children:"ðŸŒˆ Focus Mode"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes & Observations"}),e.jsx("textarea",{className:`${D} min-h-[120px]`,placeholder:"Describe the student's progress, challenges, or celebrations...",value:g.notes,onChange:r=>p("notes",r.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.jsx(z.button,{type:"submit",className:"px-5 py-3 rounded-full bg-gradient-to-r from-[#ff58c2] to-[#ffb347] text-white font-semibold shadow-[0_15px_40px_rgba(255,88,194,0.25)] disabled:opacity-60",whileHover:{scale:o?1:1.03},whileTap:{scale:o?1:.97},disabled:o,children:o?"Saving...":"Save Update"}),e.jsx("button",{type:"button",onClick:s,className:"px-5 py-3 rounded-full bg-white/80 dark:bg-white/10 text-foreground font-semibold border border-border/60 disabled:opacity-60",disabled:o,children:"Cancel"})]})]})]})]})});ee.displayName="QuickUpdateModal";const Ee=n.lazy(()=>V(()=>import("./DashboardOverview-C25djjgZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),Oe=n.lazy(()=>V(()=>import("./StudentsPanel-cU87wEsU.js"),__vite__mapDeps([15,1,2,3,4,5,16,17,18,19,20,21,22,23,24]))),qe=n.lazy(()=>V(()=>import("./InterventionFormPanel-CPHdimBW.js"),__vite__mapDeps([25,1,2]))),Qe=n.lazy(()=>V(()=>import("./ProgressFormPanel-nM4OHVzH.js"),__vite__mapDeps([26,1,2,21,19,22]))),ze=()=>e.jsx("div",{className:"glass glass-card p-8 text-center text-muted-foreground animate-pulse",children:"Loading panel..."}),te=n.memo(({activeTab:t,statCards:s,students:a,progressData:o,interventionForm:u,progressForm:i,handleInterventionChange:b,handleProgressChange:l,handleSavePlan:g,handleProgressSubmitForm:N,baseFieldClass:d,textareaClass:c,notesTextareaClass:h,submittingPlan:m,submittingProgress:f,onViewStudent:k,onQuickUpdate:j,refresh:v})=>{const w=n.useMemo(()=>{switch(t){case"dashboard":return e.jsx(Ee,{statCards:s,students:a,progressData:o,TierPill:G,ProgressBadge:H,onView:k,onUpdate:j});case"students":return e.jsx(Oe,{students:a,TierPill:G,ProgressBadge:H,onRefresh:v});case"create":return e.jsx(qe,{formState:u,onChange:b,onSubmit:S=>g(S,u),baseFieldClass:d,textareaClass:c,students:a,submitting:m});case"submit":return e.jsx(Qe,{formState:i,onChange:l,onSubmit:N,baseFieldClass:d,textareaClass:h,students:a,submitting:f});default:return null}},[t,d,b,l,N,g,u,h,j,k,o,i,v,s,a,m,f,c]);return e.jsx(n.Suspense,{fallback:e.jsx(ze,{}),children:w})});te.displayName="TeacherDashboardPanels";const Re=({loading:t,error:s,onRetry:a})=>!t&&!s?null:e.jsxs("div",{className:"rounded-2xl border border-border/50 bg-white/60 dark:bg-white/5 px-4 py-3 flex items-center justify-between gap-4 text-sm text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx(ue,{className:"w-4 h-4 animate-spin text-primary"}),e.jsx("span",{children:s||"Syncing live MTSS data..."})]}),s&&e.jsx("button",{onClick:a,className:"text-primary font-semibold hover:underline",children:"Retry"})]}),He=({students:t,progressForm:s,resetProgressForm:a,refresh:o,setSubmittingProgress:u,toast:i,setSavingQuickUpdate:b,onCloseQuickUpdate:l})=>{const g=n.useCallback(async d=>{if(d.preventDefault(),!s.studentId||!s.date||s.scoreValue===""){i({title:"Complete the required fields",description:"Student, date, and score are required to submit progress.",variant:"destructive"});return}const c=t.find(m=>m.id===s.studentId);if(!c){i({title:"Select a student",description:"Choose a student before logging progress.",variant:"destructive"});return}const h=s.assignmentId||c.assignmentId;if(!h){i({title:"No active intervention",description:`${c.name} is not linked to an active intervention yet.`,variant:"destructive"});return}try{const m=s.notes?.trim()||"",f=s.scoreValue!==""?Number(s.scoreValue):void 0;u(!0),await q(h,{checkIns:[{date:s.date||new Date,summary:m||"Progress update logged via dashboard",nextSteps:m||void 0,value:Number.isFinite(f)?f:void 0,unit:s.scoreUnit,performed:s.performed==="yes"}]}),i({title:"Progress saved",description:`${c.name}'s update is now on the dashboard.`}),a(),o()}catch(m){i({title:"Failed to save progress",description:m?.response?.data?.message||m.message||"Unable to record update now.",variant:"destructive"})}finally{u(!1)}},[s,t,i,a,o,u]),N=n.useCallback(async(d,c)=>{const h=c?.assignmentId||d?.assignmentId;if(!h){i({title:"No active intervention",description:`${d?.name||"Student"} isn't linked to an active intervention yet.`,variant:"destructive"});return}b(!0);try{const m=c.notes?.trim()||"",f=c.scoreValue!==""?Number(c.scoreValue):void 0;await q(h,{checkIns:[{date:c.date,summary:m||"Quick update",nextSteps:m||void 0,value:Number.isFinite(f)?f:void 0,unit:c.scoreUnit,performed:c.performed==="yes",celebration:c.badge}]}),i({title:"Progress update saved",description:`${d.name}'s update was recorded!`}),l(),o()}catch(m){i({title:"Failed to save update",description:m?.response?.data?.message||m.message||"Please try again in a moment.",variant:"destructive"})}finally{b(!1)}},[i,l,o,b]);return{handleProgressSubmitForm:g,handleQuickUpdateSubmit:N}},se=n.memo(()=>{const{toast:t}=J(),s=ge(),{statCards:a,students:o,progressData:u,heroBadge:i,loading:b,error:l,refresh:g}=De(),{activeTab:N,setActiveTab:d,interventionForm:c,progressForm:h,handleInterventionChange:m,handleProgressChange:f,handleSavePlan:k,resetProgressForm:j,submittingPlan:v,setSubmittingProgress:w,submittingProgress:S}=Ce(B),[p,x]=n.useState(null),[r,_]=n.useState(!1),{base:I,textarea:y,notes:M}=A,P=n.useCallback(T=>{T?.slug&&s(`/mtss/student/${T.slug}`)},[s]),F=n.useCallback(T=>x(T),[]),L=n.useCallback(()=>x(null),[]),{handleProgressSubmitForm:U,handleQuickUpdateSubmit:$}=He({students:o,progressForm:h,resetProgressForm:j,refresh:g,setSubmittingProgress:w,toast:t,setSavingQuickUpdate:_,onCloseQuickUpdate:L});return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white transition-colors",children:[(v||S||r)&&e.jsx(pe,{}),e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{zIndex:0},children:[e.jsx("div",{className:"absolute -top-20 left-[10%] w-[26rem] h-[26rem] rounded-full bg-[#6366f1] opacity-[0.22] dark:opacity-[0.14] blur-[90px]"}),e.jsx("div",{className:"absolute -top-32 right-[5%] w-[30rem] h-[30rem] rounded-full bg-[#c084fc] opacity-[0.20] dark:opacity-[0.13] blur-[100px]"}),e.jsx("div",{className:"absolute top-[15%] right-[30%] w-[22rem] h-[22rem] rounded-full bg-[#22d3ee] opacity-[0.18] dark:opacity-[0.10] blur-[80px]"}),e.jsx("div",{className:"absolute top-[40%] left-[45%] w-[28rem] h-[28rem] rounded-full bg-[#fbbf24] opacity-[0.14] dark:opacity-[0.08] blur-[120px]"}),e.jsx("div",{className:"absolute -bottom-32 -left-20 w-[30rem] h-[30rem] rounded-full bg-[#22d3ee] opacity-[0.20] dark:opacity-[0.12] blur-[100px]"}),e.jsx("div",{className:"absolute -bottom-20 right-[15%] w-[24rem] h-[24rem] rounded-full bg-[#f472b6] opacity-[0.18] dark:opacity-[0.11] blur-[100px]"}),e.jsx("div",{className:"absolute top-[60%] left-[5%] w-[20rem] h-[20rem] rounded-full bg-[#10b981] opacity-[0.14] dark:opacity-[0.09] blur-[90px]"})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{zIndex:2},children:[e.jsx("div",{className:"mtss-orb mtss-orb-1"}),e.jsx("div",{className:"mtss-orb mtss-orb-2"}),e.jsx("div",{className:"mtss-orb mtss-orb-3"}),e.jsx("div",{className:"mtss-orb mtss-orb-4"}),e.jsx("div",{className:"mtss-orb mtss-orb-5"}),e.jsx("div",{className:"mtss-orb mtss-orb-6"}),e.jsx("div",{className:"mtss-orb mtss-orb-7"})]}),e.jsxs("div",{className:"relative z-20 container-tight px-4 sm:px-6 py-8 lg:py-14 space-y-8 lg:space-y-10",children:[e.jsx("section",{className:"mtss-gradient-border overflow-hidden rounded-3xl border border-white/40 dark:border-white/10 shadow-[0_25px_60px_rgba(148,163,184,0.25)]","data-aos":"fade-up","data-aos-duration":"700",children:e.jsx(Me,{heroBadge:i,tabs:B,activeTab:N,onTabChange:d})}),e.jsx(Re,{loading:b,error:l,onRetry:g}),e.jsx(te,{activeTab:N,statCards:a,students:o,progressData:u,interventionForm:c,progressForm:h,handleInterventionChange:m,handleProgressChange:f,handleSavePlan:k,handleProgressSubmitForm:U,baseFieldClass:I,textareaClass:y,notesTextareaClass:M,submittingPlan:v,submittingProgress:S,onViewStudent:P,onQuickUpdate:F,refresh:g})]}),p&&e.jsx(ee,{student:p,onClose:L,onSubmit:$,submitting:r})]})});se.displayName="TeacherDashboardPage";const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{ee as Q,Ze as T};
