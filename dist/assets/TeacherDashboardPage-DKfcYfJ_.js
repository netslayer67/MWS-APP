const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardOverview-CLZQQ-46.js","assets/index-DcybHeOi.js","assets/index-CJQ2ExeA.css","assets/StudentsTable-C1NjD7AP.js","assets/chevron-left-DdHlQb9l.js","assets/CategoricalChart-CADNFipI.js","assets/LineChart-DfZgOpRS.js","assets/ActivePoints-D4BuIiJM.js","assets/ErrorBarContext-CLYS6RGp.js","assets/CartesianChart-C82B0y2m.js","assets/StudentsPanel-BomFMc47.js","assets/teacherDashboardUtils-DMNGSgDv.js","assets/shield-check-K0Cq4BX6.js","assets/funnel-7EYNfR1c.js","assets/search-CybY9qxe.js","assets/InterventionFormPanel-BWrfRD7e.js","assets/ProgressFormPanel-BHwMv138.js"])))=>i.map(i=>d[i]);
import{c as U,e as V,B as W,r as s,j as e,x as B,P as K,L as Y,_ as M}from"./index-DcybHeOi.js";import{P as F,T as E}from"./StatusPills-Dyx589k7.js";import{C as J,U as Q}from"./users-round-CyjgFHlH.js";import{g as X,d as Z,b as L,f as ee,a as te,m as se,c as ae,u as re}from"./teacherDashboardUtils-DMNGSgDv.js";import{A as ne}from"./arrow-right-CIJz6gLR.js";import"./shield-check-K0Cq4BX6.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ie=U("circle-plus",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],le=U("file-check-2",de),$=[{key:"dashboard",label:"Dashboard",icon:J},{key:"students",label:"My Students",icon:Q},{key:"create",label:"Create Intervention",icon:ie},{key:"submit",label:"Submit Progress",icon:le}],T={base:"px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground dark:text-white placeholder:text-muted-foreground/70 dark:placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all"};T.textarea=`${T.base} min-h-[80px]`;T.notes=`${T.base} min-h-[120px]`;const R=()=>({studentId:"",studentName:"",grade:"",type:"",strategyId:"",tier:"Tier 2",goal:"",notes:"",startDate:"",duration:"",monitorFrequency:"",monitorMethod:"",baselineValue:"",baselineUnit:"score",targetValue:"",targetUnit:"score"}),q=()=>({studentId:"",assignmentId:"",studentName:"",date:"",performed:"yes",scoreValue:"",scoreUnit:"score",badge:"ðŸŽ‰ Progress Party",notes:""}),ce=t=>{const{toast:r}=V(),a=W(),[l,c]=s.useState("dashboard"),[b,i]=s.useState(()=>R()),[g,p]=s.useState(()=>q()),[v,x]=s.useState(!1),[n,w]=s.useState(!1);s.useEffect(()=>{const o=new URLSearchParams(a.search).get("tab");o&&t.some(h=>h.key===o)&&c(o)},[a.search,t]);const _=s.useCallback((d,o)=>{i(h=>({...h,[d]:o}))},[]),S=s.useCallback((d,o)=>{p(h=>({...h,[d]:o}))},[]),y=s.useCallback(async(d,o)=>{if(d.preventDefault(),v)return;if(["studentId","type","tier","startDate","monitorFrequency","monitorMethod"].filter(k=>!(o?.[k]||b[k])).length){r({title:"Complete the required fields",description:"Student, type, tier, start date, frequency, and method are required.",variant:"destructive"});return}try{x(!0),await new Promise(k=>setTimeout(k,600)),r({title:"Intervention saved",description:"Student plan locked inâ€”keep tracking their joyful progress."})}finally{x(!1)}},[b,v,r]),m=s.useCallback(d=>{d.preventDefault(),r({title:"Progress submitted",description:"Your monitoring update is live on the MTSS dashboard."})},[r]),u=s.useCallback(()=>{i(R())},[]),j=s.useCallback(()=>{p(q())},[]);return{activeTab:l,setActiveTab:c,interventionForm:b,progressForm:g,handleInterventionChange:_,handleProgressChange:S,handleSavePlan:y,handleSubmitProgress:m,resetInterventionForm:u,resetProgressForm:j,submittingPlan:v,setSubmittingPlan:x,submittingProgress:n,setSubmittingProgress:w}},me={male:"Mr.",female:"Ms."},H=t=>me[t?.toLowerCase?.()]||"",z=t=>{const r=["Hey %NAME%, let's light up today's boosts.","Morning %NAME%, ready to spark joyful wins?","%NAME%, today's plan is setâ€”let's uplift every student.","Cheers %NAME%, another day to glow-up kids' progress.","Let's dive in %NAME%, the boost studio is humming."],a=new Date,l=(a.getDate()+a.getMonth())%r.length;return r[l].replace("%NAME%",t)},ue=t=>{const r=t?.username||t?.name||"MTSS Mentor",a=H(t?.gender),l=a?`${a} ${r}`:r;return{teacher:l,school:t?.jobPosition||t?.unit||"Millennia21 Schools",tierFocus:"Personalized supports",greeting:z(l),gradeLabel:t?.unit||"All Grades"}},ge=()=>{const t=s.useMemo(()=>X(),[]),r=s.useMemo(()=>ue(t),[t]),a=s.useMemo(()=>Z(t),[t]),[l,c]=s.useState(()=>L()),[b,i]=s.useState([]),[g,p]=s.useState([]),[v,x]=s.useState(r),[n,w]=s.useState(!0),[_,S]=s.useState(null),y=s.useCallback(async m=>{w(!0),S(null);try{const u=a.allowedGrades.length?{grade:a.allowedGrades.join(","),limit:100}:{limit:100},[j,d]=await Promise.all([ee({limit:150},m?{signal:m}:{}),te(u,m?{signal:m}:{})]),o=j.assignments||j||[],h=L(o),N=t?.username||t?.name||r.teacher,k=t?.gender,f=se(o,N),P=d?.students||[],C=ae(P,f.students,a),D=H(k),I=D?`${D} ${N}`:N;c(h);const G=C.length?C:f.students;i(G),p(f.spotlightChart.length?f.spotlightChart:[{label:"Start",date:"Start",reading:0,goal:100,value:0}]),x(A=>({...A,...r,teacher:I||r.teacher,greeting:z(I||r.teacher),tierFocus:f.focusLabel||A.tierFocus||"Tiered Supports",gradeLabel:a.label}))}catch(u){u?.name!=="CanceledError"&&u?.name!=="AbortError"&&S(u?.response?.data?.message||u?.message||"Failed to load MTSS data")}finally{w(!1)}},[r,a]);return s.useEffect(()=>{const m=new AbortController;return y(m.signal),()=>m.abort()},[y]),{statCards:l,students:b,progressData:g.length?g:[{label:"Start",date:"Start",reading:0,goal:100,value:0}],heroBadge:v,loading:n,error:_,refresh:()=>y()}},O=({heroBadge:t,tabs:r,activeTab:a,onTabChange:l})=>e.jsxs("div",{className:"relative overflow-hidden rounded-[44px] border border-white/20 dark:border-white/5 bg-gradient-to-br from-[#dbeafe] via-[#fdf2f8] to-[#fef3c7] dark:from-[#111827] dark:via-[#1f2937] dark:to-[#312e81] shadow-[0_45px_120px_rgba(15,23,42,0.35)]",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-10 -left-6 w-64 h-64 bg-gradient-to-br from-[#f472b6]/40 via-transparent to-transparent blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-[#22d3ee]/30 via-transparent to-transparent blur-[120px]"})]}),e.jsxs("div",{className:"relative px-6 py-8 sm:px-10 text-slate-900 dark:text-white",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_auto] lg:items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-slate-300",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-white/70 dark:bg-white/10 text-rose-500",children:e.jsx(B,{className:"w-3.5 h-3.5"})}),"MTSS Studio"]}),e.jsx("div",{className:"inline-flex px-3 py-1 rounded-full bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/20 tracking-[0.3em] uppercase text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:t.school}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-black leading-tight bg-gradient-to-r from-[#0f172a] via-[#334155] to-[#1d4ed8] dark:from-white dark:via-[#c7d2fe] dark:to-[#f472b6] text-transparent bg-clip-text",children:t.greeting||`Hey ${t.teacher}, let's light up today's boosts.`})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 px-4 py-3 rounded-3xl bg-white/70 dark:bg-white/5 border border-white/50 dark:border-white/10 shadow-inner max-w-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-slate-500 dark:text-slate-300",children:"Teacher"}),e.jsx("p",{className:"text-base font-semibold",children:t.teacher})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-slate-500 dark:text-slate-300",children:"Today"}),e.jsx("p",{className:"text-base font-semibold",children:t.dateLabel||"Ready to roll"})]})]})]}),e.jsx("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-4 gap-3",children:r.map(c=>{const b=c.icon,i=a===c.key;return e.jsxs("button",{onClick:()=>l(c.key),className:`flex items-center justify-between gap-2 rounded-3xl px-4 py-3 text-sm font-semibold transition shadow-[0_12px_35px_rgba(15,23,42,0.15)] border ${i?"bg-gradient-to-r from-[#22d3ee] via-[#3b82f6] to-[#a855f7] text-white border-transparent":"bg-white/75 dark:bg-white/10 text-slate-600 dark:text-slate-200 border-white/70 dark:border-white/15 hover:bg-white hover:dark:bg-white/15"}`,"aria-pressed":i,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center rounded-full ${i?"bg-white/30 text-white":"bg-white/80 dark:bg-white/10 text-slate-500 dark:text-slate-200"}`,children:e.jsx(b,{className:"w-4 h-4"})}),c.label]}),e.jsx(ne,{className:`w-4 h-4 transition-transform ${i?"translate-x-1":""}`})]},c.key)})})]})]});O.displayName="TeacherHeroSection";const he=s.memo(O),be=s.lazy(()=>M(()=>import("./DashboardOverview-CLZQQ-46.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),pe=s.lazy(()=>M(()=>import("./StudentsPanel-BomFMc47.js"),__vite__mapDeps([10,1,2,3,11,12,13,14]))),xe=s.lazy(()=>M(()=>import("./InterventionFormPanel-BWrfRD7e.js"),__vite__mapDeps([15,1,2,11,12]))),fe=s.lazy(()=>M(()=>import("./ProgressFormPanel-BHwMv138.js"),__vite__mapDeps([16,1,2,11,12]))),ve=()=>e.jsx("div",{className:"glass glass-card p-8 text-center text-muted-foreground animate-pulse",children:"Loading panel..."}),ye=s.memo(()=>{const{toast:t}=V(),{statCards:r,students:a,progressData:l,heroBadge:c,loading:b,error:i,refresh:g}=ge(),{activeTab:p,setActiveTab:v,interventionForm:x,progressForm:n,handleInterventionChange:w,handleProgressChange:_,handleSavePlan:S,resetProgressForm:y,submittingPlan:m,setSubmittingProgress:u,submittingProgress:j}=ce($),{base:d,textarea:o,notes:h}=T,N=s.useCallback(async f=>{if(f.preventDefault(),!n.studentId||!n.date||n.scoreValue===""){t({title:"Complete the required fields",description:"Student, date, and score are required to submit progress.",variant:"destructive"});return}const P=a.find(C=>C.id===n.studentId);if(!P){t({title:"Select a student",description:"Choose a student before logging progress.",variant:"destructive"});return}if(!P.assignmentId){t({title:"No active intervention",description:`${P.name} is not linked to an active intervention yet.`,variant:"destructive"});return}try{u(!0),await re(P.assignmentId,{checkIns:[{date:n.date||new Date,summary:n.notes||"Progress update logged via dashboard",nextSteps:n.notes,value:n.scoreValue?Number(n.scoreValue):void 0,unit:n.scoreUnit,performed:n.performed==="yes"}]}),t({title:"Progress saved",description:`${P.name}'s update is now on the dashboard.`}),y(),g()}catch(C){t({title:"Failed to save progress",description:C?.response?.data?.message||C.message||"Unable to record update now.",variant:"destructive"})}finally{u(!1)}},[n,a,t,y,g,u]),k=s.useMemo(()=>{switch(p){case"dashboard":return e.jsx(be,{statCards:r,students:a,progressData:l,TierPill:E,ProgressBadge:F});case"students":return e.jsx(pe,{students:a,TierPill:E,ProgressBadge:F,onRefresh:g});case"create":return e.jsx(xe,{formState:x,onChange:w,onSubmit:f=>S(f,x),baseFieldClass:d,textareaClass:o,students:a,submitting:m});case"submit":return e.jsx(fe,{formState:n,onChange:_,onSubmit:N,baseFieldClass:d,textareaClass:h,students:a,submitting:j});default:return null}},[p,x,n,w,_,S,N,d,o,h,r,a,l,g]);return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white transition-colors",children:[(m||j)&&e.jsx(K,{}),e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-64 bg-gradient-to-b from-white/70 via-[#fef2f2]/40 to-transparent dark:from-white/10 dark:via-white/5"}),e.jsx("div",{className:"absolute -bottom-24 left-12 w-[28rem] h-[28rem] bg-gradient-to-br from-[#22d3ee]/35 via-[#a855f7]/25 to-[#f472b6]/20 dark:from-[#0ea5e9]/25 dark:via-[#a855f7]/20 dark:to-[#f472b6]/15 blur-[200px]"})]}),e.jsxs("div",{className:"relative z-20 container-tight px-4 sm:px-6 py-8 lg:py-14 space-y-8 lg:space-y-10",children:[e.jsx("section",{className:"mtss-gradient-border overflow-hidden rounded-3xl border border-white/40 dark:border-white/10 shadow-[0_25px_60px_rgba(148,163,184,0.25)]","data-aos":"fade-up","data-aos-duration":"700",children:e.jsx(he,{heroBadge:c,tabs:$,activeTab:p,onTabChange:v})}),(b||i)&&e.jsxs("div",{className:"rounded-2xl border border-border/50 bg-white/60 dark:bg-white/5 px-4 py-3 flex items-center justify-between gap-4 text-sm text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsx(Y,{className:"w-4 h-4 animate-spin text-primary"}),e.jsx("span",{children:i||"Syncing live MTSS data..."})]}),i&&e.jsx("button",{onClick:g,className:"text-primary font-semibold hover:underline",children:"Retry"})]}),e.jsx(s.Suspense,{fallback:e.jsx(ve,{}),children:k})]})]})});ye.displayName="TeacherDashboardPage";export{ye as default};
