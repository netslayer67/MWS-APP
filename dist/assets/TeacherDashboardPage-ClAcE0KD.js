const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardOverview--A7K9L7a.js","assets/index-D2rZlo4J.js","assets/index-BMWanOc6.css","assets/StudentsTable-DiXVOlmk.js","assets/interventionSelection-Vcld4Os_.js","assets/chevron-down-BTfdqjhj.js","assets/circle-check-DcTRw1UX.js","assets/CategoricalChart-Cf9d4Gs_.js","assets/LineChart-Bfpkf45V.js","assets/CartesianChart-kmLnIqT1.js","assets/Line-35KelT03.js","assets/ActivePoints-DclT1874.js","assets/ErrorBarContext-C__XMjeI.js","assets/chevron-left-DmZs9iV3.js","assets/StudentsPanel-yPI8rnb_.js","assets/funnel-D662ROXN.js","assets/search-Djs8Wm4d.js","assets/users-round-BG7_TFG6.js","assets/teacherGradeUtils-COfj_G-K.js","assets/teacherSegmentUtils-BaJgF7HQ.js","assets/teacherMappingUtils-C7N1X8nf.js","assets/shield-check-DZFn7leu.js","assets/arrow-right-CkU_4ilH.js","assets/StatusPills-DlW3t5hA.js","assets/InterventionFormPanel-OHTEFTc9.js","assets/ProgressFormPanel-DWGvz4xf.js"])))=>i.map(i=>d[i]);
import{c as te,e as J,z as ae,r as s,d as se,ac as re,ad as q,ae as ne,af as oe,j as e,w as ie,Z as le,m as R,X as de,_ as V,L as ce,b as me,P as ue}from"./index-D2rZlo4J.js";import{C as ge,U as pe}from"./users-round-BG7_TFG6.js";import{b as xe,a as be}from"./teacherGradeUtils-COfj_G-K.js";import{d as he}from"./teacherSegmentUtils-BaJgF7HQ.js";import{g as fe,b as z,m as ve,a as ye,C as je,n as Ne}from"./teacherMappingUtils-C7N1X8nf.js";import{A as ke}from"./arrow-right-CkU_4ilH.js";import{P as H,T as G}from"./StatusPills-DlW3t5hA.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Se=te("circle-plus",we),W=[{key:"dashboard",label:"Dashboard",icon:ge},{key:"students",label:"My Students",icon:pe},{key:"create",label:"Create Intervention",icon:Se}],M={base:"px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground dark:text-white placeholder:text-muted-foreground/70 dark:placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all"};M.textarea=`${M.base} min-h-[80px]`;M.notes=`${M.base} min-h-[120px]`;const E=()=>({studentId:"",studentName:"",grade:"",className:"",type:"",strategyId:"",strategyName:"",tier:"tier2",goal:"",notes:"",startDate:"",duration:"",monitorFrequency:"",monitorMethod:"",baselineValue:"",baselineUnit:"score",targetValue:"",targetUnit:"score"}),$=()=>({studentId:"",assignmentId:"",studentName:"",date:"",performed:"yes",scoreValue:"",scoreUnit:"score",badge:"ðŸŽ‰ Progress Party",notes:""}),_e=t=>{const{toast:a}=J(),r=ae(),[l,g]=s.useState("dashboard"),[i,p]=s.useState(()=>E()),[d,u]=s.useState(()=>$()),[j,f]=s.useState(!1),[c,h]=s.useState(!1),m=se(x=>x.auth?.user);s.useEffect(()=>{const b=new URLSearchParams(r.search).get("tab");b&&t.some(o=>o.key===b)&&g(b)},[r.search,t]);const v=s.useCallback((x,b)=>{p(o=>({...o,[x]:b}))},[]),y=s.useCallback((x,b)=>{u(o=>({...o,[x]:b}))},[]),N=s.useCallback(async(x,b)=>{if(x.preventDefault(),j)return;const o=b||i;if(["studentId","type","tier","startDate","monitorFrequency","monitorMethod"].filter(S=>!o[S]).length){a({title:"Complete the required fields",description:"Student, type, tier, start date, frequency, and method are required.",variant:"destructive"});return}try{f(!0);const T={mentorId:m?.id||m?._id,studentIds:[o.studentId],tier:o.tier,focusAreas:o.type?[o.type]:["Universal Supports"],startDate:o.startDate||new Date().toISOString(),duration:o.duration||void 0,strategyId:o.strategyId||void 0,strategyName:o.strategyName||void 0,monitoringMethod:o.monitorMethod||void 0,monitoringFrequency:o.monitorFrequency||void 0,metricLabel:o.baselineUnit||o.targetUnit||"score",baselineScore:o.baselineValue?{value:Number(o.baselineValue),unit:o.baselineUnit||"score"}:void 0,targetScore:o.targetValue?{value:Number(o.targetValue),unit:o.targetUnit||"score"}:void 0,notes:o.notes||void 0,goals:o.goal?[{description:o.goal,successCriteria:""}]:void 0};await re(T),a({title:"Intervention saved",description:"Student plan created successfully. Track their progress!"}),p(E())}catch(S){console.error("Failed to save intervention plan:",S),a({title:"Failed to save plan",description:S?.response?.data?.message||S?.message||"Please try again.",variant:"destructive"})}finally{f(!1)}},[i,j,a,m]),n=s.useCallback(async x=>{if(x.preventDefault(),!c){if(!d.assignmentId||!d.notes){a({title:"Complete the required fields",description:"Please select a student and provide progress notes.",variant:"destructive"});return}try{h(!0);const b={checkIns:[{date:d.date||new Date().toISOString(),summary:d.notes||"Progress update",value:d.scoreValue?Number(d.scoreValue):void 0,unit:d.scoreUnit||"score",performed:d.performed==="yes"||d.performed===!0,celebration:d.badge||void 0}]};await q(d.assignmentId,b),a({title:"Progress submitted",description:"Your monitoring update is live on the MTSS dashboard."}),u($())}catch(b){console.error("Failed to submit progress:",b),a({title:"Failed to submit progress",description:b?.response?.data?.message||b?.message||"Please try again.",variant:"destructive"})}finally{h(!1)}}},[d,c,a]),k=s.useCallback(()=>{p(E())},[]),w=s.useCallback(()=>{u($())},[]);return{activeTab:l,setActiveTab:g,interventionForm:i,progressForm:d,handleInterventionChange:v,handleProgressChange:y,handleSavePlan:N,handleSubmitProgress:n,resetInterventionForm:k,resetProgressForm:w,submittingPlan:j,setSubmittingPlan:f,submittingProgress:c,setSubmittingProgress:h}},Ce={male:"Mr.",female:"Ms."},K=t=>Ce[t?.toLowerCase?.()]||"",Y=t=>{const a=["Hey %NAME%, let's light up today's boosts.","Morning %NAME%, ready to spark joyful wins?","%NAME%, today's plan is setâ€”let's uplift every student.","Cheers %NAME%, another day to glow-up kids' progress.","Let's dive in %NAME%, the boost studio is humming."],r=new Date,l=(r.getDate()+r.getMonth())%a.length;return a[l].replace("%NAME%",t)},Pe=t=>{const a=t?.username||t?.name||"MTSS Mentor",r=K(t?.gender),l=r?`${r} ${a}`:a;return{teacher:l,school:t?.jobPosition||t?.unit||"Millennia21 Schools",tierFocus:"Personalized supports",greeting:Y(l),gradeLabel:t?.unit||"All Grades"}},Ie=()=>{const t=s.useMemo(()=>fe(),[]),a=s.useMemo(()=>Pe(t),[t]),r=s.useMemo(()=>he(t),[t]),[l,g]=s.useState(()=>z()),[i,p]=s.useState([]),[d,u]=s.useState([]),[j,f]=s.useState(a),[c,h]=s.useState(!0),[m,v]=s.useState(null),y=s.useCallback(async N=>{h(!0),v(null);try{const n=xe(r),k=be(r),w=n.length&&(r.shouldFilterServer||r.unit!=="Junior High"),x={limit:r.unit==="Junior High"?500:200};w&&(x.grade=n.join(",")),k.length&&(x.className=k.join(","));const[b,o]=await Promise.all([ne({limit:150},N?{signal:N}:{}),oe(x,N?{signal:N}:{})]),I=b.assignments||b||[],U=z(I),S=t?.username||t?.name||a.teacher,T=t?.gender,_=ve(I,S),F=o?.students||[],D=ye(F,_.students,r),L=K(T),A=L?`${L} ${S}`:S;g(U);const C=D.length?D:_.students;p(C),u(_.spotlightChart.length?_.spotlightChart:[{label:"Start",date:"Start",reading:0,goal:100,value:0}]),f(Q=>({...Q,...a,teacher:A||a.teacher,greeting:Y(A||a.teacher),tierFocus:_.focusLabel||Q.tierFocus||"Tiered Supports",gradeLabel:r.label}))}catch(n){n?.name!=="CanceledError"&&n?.name!=="AbortError"&&v(n?.response?.data?.message||n?.message||"Failed to load MTSS data")}finally{h(!1)}},[a,r]);return s.useEffect(()=>{const N=new AbortController;return y(N.signal),()=>N.abort()},[y]),{statCards:l,students:i,progressData:d.length?d:[{label:"Start",date:"Start",reading:0,goal:100,value:0}],heroBadge:j,loading:c,error:m,refresh:()=>y()}},B=({heroBadge:t,tabs:a,activeTab:r,onTabChange:l})=>e.jsx("div",{className:"relative rounded-[32px] sm:rounded-[40px] p-[1.5px] bg-gradient-to-br from-[#f472b6]/60 via-[#818cf8]/50 to-[#34d399]/60 shadow-[0_30px_80px_rgba(99,102,241,0.2)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[30px] sm:rounded-[38px] border border-white/40 dark:border-white/10 bg-white/80 dark:bg-slate-900/70 backdrop-blur-2xl",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 sm:w-80 sm:h-80 bg-gradient-to-br from-[#f472b6]/20 via-[#a78bfa]/15 to-transparent blur-[100px] sm:blur-[140px]"}),e.jsx("div",{className:"absolute -bottom-16 -right-16 w-72 h-72 sm:w-96 sm:h-96 bg-gradient-to-tl from-[#22d3ee]/20 via-[#818cf8]/10 to-transparent blur-[120px] sm:blur-[160px]"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-[#fbbf24]/8 blur-[100px] rounded-full"}),e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_left,_rgba(255,255,255,0.7),_transparent_50%)]"})]}),e.jsxs("div",{className:"relative px-4 py-6 sm:px-7 sm:py-8 lg:px-9 text-slate-900 dark:text-white",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-[10px] sm:text-[11px] font-bold uppercase tracking-[0.35em] text-white bg-gradient-to-r from-[#f472b6] via-[#a78bfa] to-[#818cf8] px-3 py-1.5 rounded-full shadow-[0_4px_20px_rgba(168,85,247,0.35)]",children:[e.jsx(ie,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),"MTSS Studio"]}),e.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full bg-white/90 dark:bg-white/10 border border-white/60 dark:border-white/15 text-[10px] sm:text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-600 dark:text-slate-200 shadow-sm",children:t.school}),e.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full bg-gradient-to-r from-emerald-400/20 to-cyan-400/20 dark:from-emerald-500/20 dark:to-cyan-500/20 border border-emerald-300/40 dark:border-emerald-500/20 text-[10px] sm:text-[11px] font-bold text-emerald-700 dark:text-emerald-300",children:t.gradeLabel})]}),e.jsxs("div",{className:"flex flex-col gap-5 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsx("h1",{className:"text-[22px] sm:text-3xl lg:text-[2.5rem] font-black leading-[1.15] bg-gradient-to-r from-[#1e1b4b] via-[#6366f1] to-[#ec4899] dark:from-[#e0e7ff] dark:via-[#c4b5fd] dark:to-[#f9a8d4] text-transparent bg-clip-text",children:t.greeting||`Hey ${t.teacher}, let's light up today's boosts.`}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 rounded-full bg-gradient-to-r from-amber-400/15 to-orange-400/15 dark:from-amber-500/15 dark:to-orange-500/15 border border-amber-300/40 dark:border-amber-500/20",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-amber-500"})]}),e.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-amber-700 dark:text-amber-300",children:["Focus today: ",t.tierFocus]})]})]}),e.jsxs("div",{className:"flex gap-2.5 sm:gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-3.5 sm:px-4 py-2.5 sm:py-3 rounded-2xl bg-gradient-to-br from-indigo-50/90 to-purple-50/90 dark:from-indigo-900/30 dark:to-purple-900/20 border border-indigo-200/50 dark:border-indigo-500/15 shadow-sm",children:[e.jsx("span",{className:"hidden sm:inline-flex h-8 w-8 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 text-white shadow-[0_4px_12px_rgba(99,102,241,0.35)]",children:e.jsx(le,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-semibold uppercase tracking-[0.25em] text-indigo-400 dark:text-indigo-300",children:"Teacher"}),e.jsx("span",{className:"block text-sm sm:text-base font-bold text-slate-800 dark:text-white leading-tight",children:t.teacher})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5 px-3.5 sm:px-4 py-2.5 sm:py-3 rounded-2xl bg-gradient-to-br from-emerald-50/90 to-teal-50/90 dark:from-emerald-900/30 dark:to-teal-900/20 border border-emerald-200/50 dark:border-emerald-500/15 shadow-sm",children:[e.jsx("span",{className:"hidden sm:inline-flex h-8 w-8 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-400 to-teal-500 text-white shadow-[0_4px_12px_rgba(52,211,153,0.35)]",children:e.jsx(je,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-semibold uppercase tracking-[0.25em] text-emerald-500 dark:text-emerald-300",children:"Today"}),e.jsx("span",{className:"block text-sm sm:text-base font-bold text-slate-800 dark:text-white leading-tight",children:t.dateLabel||"Ready to roll"})]})]})]})]}),e.jsx("div",{className:"mt-6 sm:mt-7",children:e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-3 gap-2 sm:gap-3",children:a.map(g=>{const i=g.icon,p=r===g.key;return e.jsxs("button",{onClick:()=>l(g.key),className:`group flex items-center justify-between gap-2 rounded-2xl px-3.5 sm:px-4 py-3 sm:py-3.5 text-sm font-semibold transition-all duration-200 border ${p?"bg-gradient-to-r from-[#6366f1] via-[#8b5cf6] to-[#d946ef] text-white border-transparent shadow-[0_12px_35px_rgba(99,102,241,0.4)] scale-[1.02]":"bg-white/80 dark:bg-slate-800/80 text-slate-600 dark:text-white border-white/70 dark:border-slate-600/60 hover:bg-white dark:hover:bg-slate-700/80 hover:border-indigo-200/50 dark:hover:border-indigo-400/40 hover:shadow-[0_8px_25px_rgba(99,102,241,0.12)] dark:hover:shadow-[0_8px_25px_rgba(99,102,241,0.2)]"}`,"aria-pressed":p,children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center rounded-xl transition-all ${p?"bg-white/25 text-white":"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-600 text-slate-500 dark:text-slate-200 group-hover:from-indigo-50 group-hover:to-purple-50 group-hover:text-indigo-500 dark:group-hover:from-indigo-800 dark:group-hover:to-purple-800 dark:group-hover:text-indigo-300"}`,children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx("span",{className:"truncate",children:g.label})]}),e.jsx(ke,{className:`w-4 h-4 flex-shrink-0 transition-transform duration-200 ${p?"translate-x-0.5":"opacity-0 -translate-x-1 group-hover:opacity-100 group-hover:translate-x-0"}`})]},g.key)})})})]})]})});B.displayName="TeacherHeroSection";const Te=s.memo(B),P="px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground placeholder:text-muted-foreground/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all w-full",O="px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",De=t=>{if(!t)return[];const a=Array.isArray(t.assignmentOptions)?t.assignmentOptions:[];return a.length?a:t.assignmentId?[{assignmentId:t.assignmentId,focus:t.type||"Focused Support",tier:t.tier||"Tier 1",tierCode:Ne(t.tier)||"tier1",statusLabel:t.progress||"On Track"}]:[]},Me=(t=[])=>{const a=t.filter(r=>r.tierCode&&r.tierCode!=="tier1");return a.length?a:t},Ue=t=>{const a=t.focus||t.label||"Focused Support",r=t.tier||"Tier 1";return`${a} - ${r}`},X=s.memo(({student:t,onClose:a,onSubmit:r,submitting:l=!1})=>{const g=s.useMemo(()=>new Date().toISOString().split("T")[0],[]),i=s.useMemo(()=>Me(De(t)),[t]),p=i[0],d=p?.assignmentId||"",[u,j]=s.useState({date:g,performed:"yes",scoreValue:"",scoreUnit:p?.metricLabel||"score",notes:"",badge:"ðŸŽ‰ Progress Party",assignmentId:d}),c=i.find(n=>n.assignmentId===u.assignmentId)?.metricLabel||u.scoreUnit||"score";if(!t)return null;const h=t.grade||t.currentGrade||"Grade",m=t.tier||t.primaryIntervention?.tier||"Tier 1",v=`${h} - ${m}`,y=(n,k)=>{if(n==="assignmentId"){const w=i.find(x=>x.assignmentId===k);j(x=>({...x,assignmentId:k,scoreUnit:w?.metricLabel||x.scoreUnit}));return}j(w=>({...w,[n]:k}))},N=n=>{n.preventDefault(),r?.(t,u)};return e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center px-4 mtss-theme",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:a,"aria-hidden":"true"}),e.jsxs(R.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl rounded-[28px] overflow-hidden border border-white/40 bg-white/95 dark:bg-slate-900/90 shadow-[0_25px_80px_rgba(15,23,42,0.35)]",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#34d399]/80 via-[#22d3ee]/80 to-[#60a5fa]/80 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase text-xs tracking-[0.4em] opacity-80",children:"Quick Update"}),e.jsx("h3",{className:"text-2xl font-bold",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:"Share today's check-in and celebrations"})]}),e.jsx("button",{onClick:a,"aria-label":"Close",className:"p-2 bg-white/30 rounded-full hover:bg-white/50 transition",disabled:l,children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("form",{className:"p-6 space-y-4",onSubmit:N,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsx("div",{className:O,children:t.name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Grade / Tier"}),e.jsx("div",{className:O,children:v})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Focus Subject (Tier 2/3)"}),e.jsx("select",{className:P,value:u.assignmentId,onChange:n=>y("assignmentId",n.target.value),disabled:!i.length,children:i.length?i.map(n=>e.jsx("option",{value:n.assignmentId,children:Ue(n)},n.assignmentId)):e.jsx("option",{value:"",children:"No Tier 2/3 subjects available"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Date"}),e.jsx("input",{type:"date",className:P,value:u.date,onChange:n=>y("date",n.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Performed?"}),e.jsxs("select",{className:P,value:u.performed,onChange:n=>y("performed",n.target.value),children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Status or Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:`${P} flex-1`,placeholder:"e.g. 78",value:u.scoreValue,onChange:n=>y("scoreValue",n.target.value)}),e.jsx("div",{className:`${O} w-28 flex items-center`,children:c})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Celebration Emoji"}),e.jsxs("select",{className:P,value:u.badge,onChange:n=>y("badge",n.target.value),children:[e.jsx("option",{value:"ðŸŽ‰ Progress Party",children:"ðŸŽ‰ Progress Party"}),e.jsx("option",{value:"âœ¨ Stellar Boost",children:"âœ¨ Stellar Boost"}),e.jsx("option",{value:"ðŸŒˆ Focus Mode",children:"ðŸŒˆ Focus Mode"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes & Observations"}),e.jsx("textarea",{className:`${P} min-h-[120px]`,placeholder:"Describe the student's progress, challenges, or celebrations...",value:u.notes,onChange:n=>y("notes",n.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.jsx(R.button,{type:"submit",className:"px-5 py-3 rounded-full bg-gradient-to-r from-[#ff58c2] to-[#ffb347] text-white font-semibold shadow-[0_15px_40px_rgba(255,88,194,0.25)] disabled:opacity-60",whileHover:{scale:l?1:1.03},whileTap:{scale:l?1:.97},disabled:l,children:l?"Saving...":"Save Update"}),e.jsx("button",{type:"button",onClick:a,className:"px-5 py-3 rounded-full bg-white/80 dark:bg-white/10 text-foreground font-semibold border border-border/60 disabled:opacity-60",disabled:l,children:"Cancel"})]})]})]})]})});X.displayName="QuickUpdateModal";const Le=s.lazy(()=>V(()=>import("./DashboardOverview--A7K9L7a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Ae=s.lazy(()=>V(()=>import("./StudentsPanel-yPI8rnb_.js"),__vite__mapDeps([14,1,2,3,4,15,16,17,18,19,20,21,22,23]))),Ve=s.lazy(()=>V(()=>import("./InterventionFormPanel-OHTEFTc9.js"),__vite__mapDeps([24,1,2]))),Fe=s.lazy(()=>V(()=>import("./ProgressFormPanel-DWGvz4xf.js"),__vite__mapDeps([25,1,2,20,18,21]))),Ee=()=>e.jsx("div",{className:"glass glass-card p-8 text-center text-muted-foreground animate-pulse",children:"Loading panel..."}),Z=s.memo(({activeTab:t,statCards:a,students:r,progressData:l,interventionForm:g,progressForm:i,handleInterventionChange:p,handleProgressChange:d,handleSavePlan:u,handleProgressSubmitForm:j,baseFieldClass:f,textareaClass:c,notesTextareaClass:h,submittingPlan:m,submittingProgress:v,onViewStudent:y,onQuickUpdate:N,refresh:n})=>{const k=s.useMemo(()=>{switch(t){case"dashboard":return e.jsx(Le,{statCards:a,students:r,progressData:l,TierPill:G,ProgressBadge:H,onView:y,onUpdate:N});case"students":return e.jsx(Ae,{students:r,TierPill:G,ProgressBadge:H,onRefresh:n});case"create":return e.jsx(Ve,{formState:g,onChange:p,onSubmit:w=>u(w,g),baseFieldClass:f,textareaClass:c,students:r,submitting:m});case"submit":return e.jsx(Fe,{formState:i,onChange:d,onSubmit:j,baseFieldClass:f,textareaClass:h,students:r,submitting:v});default:return null}},[t,f,p,d,j,u,g,h,N,y,l,i,n,a,r,m,v,c]);return e.jsx(s.Suspense,{fallback:e.jsx(Ee,{}),children:k})});Z.displayName="TeacherDashboardPanels";const $e=({loading:t,error:a,onRetry:r})=>!t&&!a?null:e.jsxs("div",{className:"rounded-2xl border border-border/50 bg-white/60 dark:bg-white/5 px-4 py-3 flex items-center justify-between gap-4 text-sm text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx(ce,{className:"w-4 h-4 animate-spin text-primary"}),e.jsx("span",{children:a||"Syncing live MTSS data..."})]}),a&&e.jsx("button",{onClick:r,className:"text-primary font-semibold hover:underline",children:"Retry"})]}),Oe=({students:t,progressForm:a,resetProgressForm:r,refresh:l,setSubmittingProgress:g,toast:i,setSavingQuickUpdate:p,onCloseQuickUpdate:d})=>{const u=s.useCallback(async f=>{if(f.preventDefault(),!a.studentId||!a.date||a.scoreValue===""){i({title:"Complete the required fields",description:"Student, date, and score are required to submit progress.",variant:"destructive"});return}const c=t.find(m=>m.id===a.studentId);if(!c){i({title:"Select a student",description:"Choose a student before logging progress.",variant:"destructive"});return}const h=a.assignmentId||c.assignmentId;if(!h){i({title:"No active intervention",description:`${c.name} is not linked to an active intervention yet.`,variant:"destructive"});return}try{const m=a.notes?.trim()||"",v=a.scoreValue!==""?Number(a.scoreValue):void 0;g(!0),await q(h,{checkIns:[{date:a.date||new Date,summary:m||"Progress update logged via dashboard",nextSteps:m||void 0,value:Number.isFinite(v)?v:void 0,unit:a.scoreUnit,performed:a.performed==="yes"}]}),i({title:"Progress saved",description:`${c.name}'s update is now on the dashboard.`}),r(),l()}catch(m){i({title:"Failed to save progress",description:m?.response?.data?.message||m.message||"Unable to record update now.",variant:"destructive"})}finally{g(!1)}},[a,t,i,r,l,g]),j=s.useCallback(async(f,c)=>{const h=c?.assignmentId||f?.assignmentId;if(!h){i({title:"No active intervention",description:`${f?.name||"Student"} isn't linked to an active intervention yet.`,variant:"destructive"});return}p(!0);try{const m=c.notes?.trim()||"",v=c.scoreValue!==""?Number(c.scoreValue):void 0;await q(h,{checkIns:[{date:c.date,summary:m||"Quick update",nextSteps:m||void 0,value:Number.isFinite(v)?v:void 0,unit:c.scoreUnit,performed:c.performed==="yes",celebration:c.badge}]}),i({title:"Progress update saved",description:`${f.name}'s update was recorded!`}),d(),l()}catch(m){i({title:"Failed to save update",description:m?.response?.data?.message||m.message||"Please try again in a moment.",variant:"destructive"})}finally{p(!1)}},[i,d,l,p]);return{handleProgressSubmitForm:u,handleQuickUpdateSubmit:j}},ee=s.memo(()=>{const{toast:t}=J(),a=me(),{statCards:r,students:l,progressData:g,heroBadge:i,loading:p,error:d,refresh:u}=Ie(),{activeTab:j,setActiveTab:f,interventionForm:c,progressForm:h,handleInterventionChange:m,handleProgressChange:v,handleSavePlan:y,resetProgressForm:N,submittingPlan:n,setSubmittingProgress:k,submittingProgress:w}=_e(W),[x,b]=s.useState(null),[o,I]=s.useState(!1),{base:U,textarea:S,notes:T}=M,_=s.useCallback(C=>{C?.slug&&a(`/mtss/student/${C.slug}`)},[a]),F=s.useCallback(C=>b(C),[]),D=s.useCallback(()=>b(null),[]),{handleProgressSubmitForm:L,handleQuickUpdateSubmit:A}=Oe({students:l,progressForm:h,resetProgressForm:N,refresh:u,setSubmittingProgress:k,toast:t,setSavingQuickUpdate:I,onCloseQuickUpdate:D});return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white transition-colors",children:[(n||w||o)&&e.jsx(ue,{}),e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-64 bg-gradient-to-b from-white/70 via-[#fef2f2]/40 to-transparent dark:from-white/10 dark:via-white/5"}),e.jsx("div",{className:"absolute -bottom-24 left-12 w-[28rem] h-[28rem] bg-gradient-to-br from-[#22d3ee]/35 via-[#a855f7]/25 to-[#f472b6]/20 dark:from-[#0ea5e9]/25 dark:via-[#a855f7]/20 dark:to-[#f472b6]/15 blur-[200px]"})]}),e.jsxs("div",{className:"relative z-20 container-tight px-4 sm:px-6 py-8 lg:py-14 space-y-8 lg:space-y-10",children:[e.jsx("section",{className:"mtss-gradient-border overflow-hidden rounded-3xl border border-white/40 dark:border-white/10 shadow-[0_25px_60px_rgba(148,163,184,0.25)]","data-aos":"fade-up","data-aos-duration":"700",children:e.jsx(Te,{heroBadge:i,tabs:W,activeTab:j,onTabChange:f})}),e.jsx($e,{loading:p,error:d,onRetry:u}),e.jsx(Z,{activeTab:j,statCards:r,students:l,progressData:g,interventionForm:c,progressForm:h,handleInterventionChange:m,handleProgressChange:v,handleSavePlan:y,handleProgressSubmitForm:L,baseFieldClass:U,textareaClass:S,notesTextareaClass:T,submittingPlan:n,submittingProgress:w,onViewStudent:_,onQuickUpdate:F,refresh:u})]}),x&&e.jsx(X,{student:x,onClose:D,onSubmit:A,submitting:o})]})});ee.displayName="TeacherDashboardPage";const Je=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{X as Q,Je as T};
