import{c as G,v as Se,r as n,j as t,ai as de,m as f,aj as ce,ak as Oe,u as Pe,A as me,w as V,X as Ce,$ as ue,C as _e,x as xe,a4 as Le,ag as he,al as Ee,ae as De,B as Ie,b as $e,am as Q,t as Ae}from"./index-Z8dj6zX8.js";import{C as B,g as Be,m as Te,f as Me}from"./teacherMappingUtils-CCkqxUdi.js";import{S as Re}from"./shield-check-CUyGZ8fJ.js";import{B as ge}from"./book-open-C7nHHV-I.js";import{P as ze}from"./StatusPills-rQV5uUX4.js";import{U as Fe}from"./users-CdpdZLFM.js";import{F}from"./file-text-DGfWnuc5.js";import{C as pe}from"./circle-check-BBuiTMoS.js";import{a as We,S as He,u as A,s as Ue,i as Ge,b as Ve,c as qe,d as Ke,e as Xe,f as q,g as Je,h as ee,j as Ye,r as Ze,k as Qe,l as et,m as tt,n as rt,o as te,p as at,q as st,L as it,C as nt,t as lt,v as re,w as ae,R as ot}from"./CategoricalChart-NGEtxTXn.js";import{A as dt,a as ct}from"./AreaChart-nHQb-QzX.js";import{u as mt,g as ut,c as xt,r as ht,C as gt,X as pt,Y as ft,T as bt}from"./CartesianChart-LHS8SAXk.js";import{S as yt}from"./Symbols-CAhMZY7m.js";import{L as wt}from"./Line-DiFd15aq.js";import{Z as vt}from"./zap-kYlOhOYS.js";import{C as jt}from"./clock-R3XFt8Mk.js";import{T as fe}from"./target-BPwlerDo.js";import{C as kt}from"./circle-alert-6Znx21bg.js";import{e as be,p as Nt}from"./interventionSelection-Vcld4Os_.js";import"./teacherGradeUtils-COfj_G-K.js";import"./ActivePoints-CMtNKLPp.js";import"./ErrorBarContext-DoFmM-hP.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ot=G("calculator",St);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ct=G("clipboard-list",Pt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Lt=G("copy",_t),T={SEL:{icon:Se,emoji:"ðŸ’–",gradient:"from-purple-500 via-fuchsia-500 to-pink-500",lightBg:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-950/40 dark:to-fuchsia-950/30",cardBg:"bg-gradient-to-br from-purple-100/80 to-fuchsia-100/60 dark:from-purple-900/40 dark:to-fuchsia-900/30",border:"border-purple-200/60 dark:border-purple-700/40",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400/30",glow:"shadow-purple-500/20",chartColor:"#a855f7"},ENGLISH:{icon:ge,emoji:"ðŸ“š",gradient:"from-blue-500 via-cyan-500 to-teal-500",lightBg:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/40 dark:to-cyan-950/30",cardBg:"bg-gradient-to-br from-blue-100/80 to-cyan-100/60 dark:from-blue-900/40 dark:to-cyan-900/30",border:"border-blue-200/60 dark:border-blue-700/40",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400/30",glow:"shadow-blue-500/20",chartColor:"#3b82f6"},MATH:{icon:Ot,emoji:"ðŸ”¢",gradient:"from-emerald-500 via-green-500 to-teal-500",lightBg:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/40 dark:to-green-950/30",cardBg:"bg-gradient-to-br from-emerald-100/80 to-green-100/60 dark:from-emerald-900/40 dark:to-green-900/30",border:"border-emerald-200/60 dark:border-emerald-700/40",text:"text-emerald-700 dark:text-emerald-300",ring:"ring-emerald-400/30",glow:"shadow-emerald-500/20",chartColor:"#10b981"},BEHAVIOR:{icon:Re,emoji:"â­",gradient:"from-amber-500 via-orange-500 to-yellow-500",lightBg:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/40 dark:to-orange-950/30",cardBg:"bg-gradient-to-br from-amber-100/80 to-orange-100/60 dark:from-amber-900/40 dark:to-orange-900/30",border:"border-amber-200/60 dark:border-amber-700/40",text:"text-amber-700 dark:text-amber-300",ring:"ring-amber-400/30",glow:"shadow-amber-500/20",chartColor:"#f59e0b"},ATTENDANCE:{icon:B,emoji:"ðŸ“",gradient:"from-indigo-500 via-violet-500 to-purple-500",lightBg:"bg-gradient-to-br from-indigo-50 to-violet-50 dark:from-indigo-950/40 dark:to-violet-950/30",cardBg:"bg-gradient-to-br from-indigo-100/80 to-violet-100/60 dark:from-indigo-900/40 dark:to-violet-900/30",border:"border-indigo-200/60 dark:border-indigo-700/40",text:"text-indigo-700 dark:text-indigo-300",ring:"ring-indigo-400/30",glow:"shadow-indigo-500/20",chartColor:"#6366f1"}},M={tier1:{label:"Tier 1",bg:"bg-emerald-500",gradient:"from-emerald-500 to-teal-500",text:"text-emerald-700 dark:text-emerald-300",lightBg:"bg-emerald-100 dark:bg-emerald-900/30"},tier2:{label:"Tier 2",bg:"bg-amber-500",gradient:"from-amber-500 to-orange-500",text:"text-amber-700 dark:text-amber-300",lightBg:"bg-amber-100 dark:bg-amber-900/30"},tier3:{label:"Tier 3",bg:"bg-rose-500",gradient:"from-rose-500 to-pink-500",text:"text-rose-700 dark:text-rose-300",lightBg:"bg-rose-100 dark:bg-rose-900/30"}},P={card:"backdrop-blur-xl bg-white/60 dark:bg-slate-900/50 border border-white/40 dark:border-white/10",inner:"backdrop-blur-md bg-white/40 dark:bg-white/5 border border-white/30 dark:border-white/5",hover:"hover:bg-white/70 dark:hover:bg-slate-900/60 hover:shadow-xl transition-all duration-300"},Et=e=>{switch(e){case"tier3":return"bg-gradient-to-r from-rose-500 to-pink-500 text-white shadow-rose-500/30";case"tier2":return"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-amber-500/30";default:return"bg-gradient-to-r from-slate-400 to-slate-500 text-white shadow-slate-500/20"}},Dt=e=>{switch(e){case"active":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300 ring-emerald-500/20";case"paused":return"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 ring-amber-500/20";default:return"bg-slate-100 text-slate-600 dark:bg-slate-800/60 dark:text-slate-400 ring-slate-500/20"}},It=e=>{switch(e){case"active":return"Active";case"paused":return"Paused";case"closed":return"Closed";default:return"Monitoring"}},ye=n.memo(({student:e,highlight:r,currentTier:a,currentInterventionLabel:s})=>{const i=M[a]||M.tier1,l=e.className&&e.className!==e.grade?e.className:null;return t.jsxs("div",{className:"relative overflow-hidden text-white",children:[t.jsx("div",{className:"absolute inset-0 mtss-hero-gradient"}),t.jsx("div",{className:"absolute inset-0 mtss-hero-aurora opacity-80"}),t.jsx("div",{className:"absolute inset-0 mtss-hero-shine hidden sm:block"}),t.jsx("div",{className:"relative px-3 py-3 sm:px-8 sm:py-8",children:t.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 lg:flex-row lg:items-end lg:justify-between",children:[t.jsxs("div",{className:"space-y-1.5 sm:space-y-3",children:[t.jsx("span",{className:"mtss-chip bg-white/15 text-white/90 text-[9px] sm:text-xs",children:"Student Spotlight"}),t.jsx("h1",{className:"text-lg sm:text-4xl font-black tracking-tight",children:e.name}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 text-[10px] sm:text-sm font-semibold text-white/90",children:[t.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full bg-white/15",children:e.grade||"-"}),l&&t.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full bg-white/10",children:l}),t.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full bg-white/10",children:r?.label||"Universal Supports"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2",children:[t.jsx("span",{className:`px-2.5 py-1 sm:px-4 sm:py-2 rounded-full text-[10px] sm:text-sm font-bold bg-gradient-to-r ${i.gradient} shadow-lg`,children:i.label}),t.jsx("span",{className:"px-2.5 py-1 sm:px-4 sm:py-2 rounded-full text-[10px] sm:text-sm font-semibold bg-white/15 backdrop-blur-sm",children:s||r?.label||"Universal"}),t.jsx(ze,{status:e.progress})]})]})})]})});ye.displayName="StudentProfileHeader";const we=n.memo(({student:e,profile:r,mentorLabel:a})=>{const s=[{label:"Grade",value:e.grade||"-",icon:ge,gradient:"from-blue-500 to-cyan-500"},{label:"Class",value:e.className||"-",icon:Fe,gradient:"from-emerald-500 to-teal-500"},{label:"Started",value:r?.started||"-",icon:B,gradient:"from-rose-500 to-pink-500"},{label:"Mentor",value:a,icon:de,gradient:"from-purple-500 to-violet-500"}];return t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1.5 sm:gap-3",children:s.map((i,l)=>{const m=i.icon;return t.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15+l*.05},className:`${P.inner} group rounded-xl sm:rounded-2xl p-2 sm:p-4 ${P.hover} hover:-translate-y-0.5 active:scale-[0.99]`,children:t.jsxs("div",{className:"flex items-center gap-2 sm:block",children:[t.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br ${i.gradient} flex items-center justify-center sm:mb-2 shadow-md sm:shadow-lg flex-shrink-0`,children:t.jsx(m,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-white"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[8px] sm:text-xs uppercase tracking-wider text-muted-foreground leading-tight",children:i.label}),t.jsx("p",{className:"text-xs sm:text-base font-bold text-foreground dark:text-white truncate leading-tight",children:i.value})]})]})},i.label)})})});we.displayName="QuickFactsGrid";function W(){return W=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},W.apply(null,arguments)}function se(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,s)}return a}function $t(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?se(Object(a),!0).forEach(function(s){K(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function K(e,r,a){return(r=At(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function At(e){var r=Bt(e,"string");return typeof r=="symbol"?r:r+""}function Bt(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var S=32;class X extends n.PureComponent{renderIcon(r,a){var{inactiveColor:s}=this.props,i=S/2,l=S/6,m=S/3,u=r.inactive?s:r.color,c=a??r.type;if(c==="none")return null;if(c==="plainline")return n.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:S,y2:i,className:"recharts-legend-icon"});if(c==="line")return n.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(m,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*m,",").concat(i,`
            H`).concat(S,"M").concat(2*m,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(m,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return n.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(S/8,"h").concat(S,"v").concat(S*3/4,"h").concat(-S,"z"),className:"recharts-legend-icon"});if(n.isValidElement(r.legendIcon)){var o=$t({},r);return delete o.legendIcon,n.cloneElement(r.legendIcon,o)}return n.createElement(yt,{fill:u,cx:i,cy:i,size:S,sizeType:"diameter",type:c})}renderItems(){var{payload:r,iconSize:a,layout:s,formatter:i,inactiveColor:l,iconType:m}=this.props,u={x:0,y:0,width:S,height:S},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},o={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((d,h)=>{var b=d.formatter||i,x=ce({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?l:d.color,p=b?b(d.value,d,h):d.value;return n.createElement("li",W({className:x,style:c,key:"legend-item-".concat(h)},We(this.props,d,h)),n.createElement(He,{width:a,height:a,viewBox:u,style:o,"aria-label":"".concat(p," legend icon")},this.renderIcon(d,m)),n.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},p))})}render(){var{payload:r,layout:a,align:s}=this.props;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return n.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}K(X,"displayName","Legend");K(X,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});function Tt(){return A(Ue)}var Mt=["contextPayload"];function H(){return H=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},H.apply(null,arguments)}function ie(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,s)}return a}function E(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ie(Object(a),!0).forEach(function(s){J(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function J(e,r,a){return(r=Rt(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Rt(e){var r=zt(e,"string");return typeof r=="symbol"?r:r+""}function zt(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ft(e,r){if(e==null)return{};var a,s,i=Wt(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Wt(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Ht(e){return e.value}function Ut(e){var{contextPayload:r}=e,a=Ft(e,Mt),s=ut(r,e.payloadUniqBy,Ht),i=E(E({},a),{},{payload:s});return n.isValidElement(e.content)?n.cloneElement(e.content,i):typeof e.content=="function"?n.createElement(e.content,i):n.createElement(X,i)}function Gt(e,r,a,s,i,l){var{layout:m,align:u,verticalAlign:c}=r,o,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&m==="vertical"?o={left:((s||0)-l.width)/2}:o=u==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((i||0)-l.height)/2}:d=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),E(E({},o),d)}function Vt(e){var r=q();return n.useEffect(()=>{r(Je(e))},[r,e]),null}function qt(e){var r=q();return n.useEffect(()=>(r(ee(e)),()=>{r(ee({width:0,height:0}))}),[r,e]),null}function Kt(e){var r=Tt(),a=Ve(),s=qe(),{width:i,height:l,wrapperStyle:m,portal:u}=e,[c,o]=mt([r]),d=Ke(),h=Xe();if(d==null||h==null)return null;var b=d-(s.left||0)-(s.right||0),x=z.getWidthOrHeight(e.layout,l,i,b),g=u?m:E(E({position:"absolute",width:x?.width||i||"auto",height:x?.height||l||"auto"},Gt(m,e,s,d,h,c)),m),p=u??a;if(p==null)return null;var y=n.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:o},n.createElement(Vt,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),n.createElement(qt,{width:c.width,height:c.height}),n.createElement(Ut,H({},e,x,{margin:s,chartWidth:d,chartHeight:h,contextPayload:r})));return Oe.createPortal(y,p)}class z extends n.PureComponent{static getWidthOrHeight(r,a,s,i){return r==="vertical"&&Ge(a)?{height:a}:r==="horizontal"?{width:s||i}:null}render(){return n.createElement(Kt,this.props)}}J(z,"displayName","Legend");J(z,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ne(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,s)}return a}function le(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ne(Object(a),!0).forEach(function(s){Y(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Y(e,r,a){return(r=Xt(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Xt(e){var r=Jt(e,"string");return typeof r=="symbol"?r:r+""}function Jt(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},U.apply(null,arguments)}var Yt=(e,r)=>{var a;return n.isValidElement(e)?a=n.cloneElement(e,r):typeof e=="function"?a=e(r):a=n.createElement("line",U({},r,{className:"recharts-reference-line-line"})),a},Zt=(e,r,a,s,i,l,m,u,c)=>{var{x:o,y:d,width:h,height:b}=i;if(a){var{y:x}=c,g=e.y.apply(x,{position:l});if(re(g)||c.ifOverflow==="discard"&&!e.y.isInRange(g))return null;var p=[{x:o+h,y:g},{x:o,y:g}];return u==="left"?p.reverse():p}if(r){var{x:y}=c,w=e.x.apply(y,{position:l});if(re(w)||c.ifOverflow==="discard"&&!e.x.isInRange(w))return null;var v=[{x:w,y:d+b},{x:w,y:d}];return m==="top"?v.reverse():v}if(s){var{segment:O}=c,N=O.map(k=>e.apply(k,{position:l}));return c.ifOverflow==="discard"&&N.some(k=>!e.isInRange(k))?null:N}return null};function Qt(e){var r=q();return n.useEffect(()=>(r(Ye(e)),()=>{r(Ze(e))})),null}function er(e){var{x:r,y:a,segment:s,xAxisId:i,yAxisId:l,shape:m,className:u,ifOverflow:c}=e,o=Qe(),d=et(),h=A(_=>tt(_,i)),b=A(_=>rt(_,l)),x=A(_=>te(_,"xAxis",i,o)),g=A(_=>te(_,"yAxis",l,o)),p=at(),y=ae(r),w=ae(a);if(!d||!p||h==null||b==null||x==null||g==null)return null;var v=xt({x,y:g}),O=s&&s.length===2,N=Zt(v,y,w,O,p,e.position,h.orientation,b.orientation,e);if(!N)return null;var[{x:k,y:L},{x:D,y:j}]=N,I=c==="hidden"?"url(#".concat(d,")"):void 0,Z=le(le({clipPath:I},st(e,!0)),{},{x1:k,y1:L,x2:D,y2:j});return n.createElement(it,{className:ce("recharts-reference-line",u)},Yt(m,Z),n.createElement(nt,ht({x1:k,y1:L,x2:D,y2:j}),n.createElement(lt,{label:e.label}),e.children))}function tr(e){return n.createElement(n.Fragment,null,n.createElement(Qt,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y}),n.createElement(er,e))}class R extends n.Component{render(){return n.createElement(tr,this.props)}}Y(R,"displayName","ReferenceLine");Y(R,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});const ve=n.memo(({open:e,onOpenChange:r,notes:a,interventionLabel:s})=>{const i=Pe(),[l,m]=n.useState(!1);n.useEffect(()=>{if(typeof document>"u")return;const c=document.documentElement;return e?c.dataset.sheetOpen="true":delete c.dataset.sheetOpen,()=>{delete c.dataset.sheetOpen}},[e]);const u=n.useCallback(()=>{a&&navigator.clipboard.writeText(a).then(()=>{m(!0),setTimeout(()=>m(!1),2e3)}).catch(()=>{})},[a]);return t.jsx(me,{children:e&&t.jsxs(f.div,{className:"fixed inset-0 z-[95] flex items-end justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},"aria-modal":"true",role:"dialog",children:[t.jsx(f.div,{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/50 to-black/30 dark:from-black/75 dark:via-black/60 dark:to-black/40 backdrop-blur-lg",onClick:()=>r(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}}),t.jsxs(f.div,{initial:i?{opacity:0}:{y:"100%"},animate:i?{opacity:1}:{y:0},exit:i?{opacity:0}:{y:"100%"},transition:i?{duration:.15}:{type:"spring",damping:30,stiffness:320,mass:.75},className:`relative z-[96] w-full max-w-lg overflow-hidden rounded-t-[32px] border border-white/30 dark:border-white/[0.08] glass-strong glass--liquid ${i?"":"sheen-animate"} shadow-[0_-35px_90px_rgba(15,23,42,0.35)]`,children:[t.jsx("div",{className:"glass__noise"}),t.jsx("div",{className:"glass__refract glass__refract--soft"}),!i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"glass__caustic"}),t.jsx("div",{className:"glass__bubble pointer-events-none",style:{"--glass-bubble-top":"18%","--glass-bubble-left":"10%"}}),t.jsx("div",{className:"glass__orb pointer-events-none",style:{"--glass-orb-bottom":"14%","--glass-orb-right":"8%"}}),t.jsx("div",{className:"glass__wave pointer-events-none opacity-70"}),t.jsx(f.div,{className:"absolute -top-16 left-1/2 h-28 w-[120%] -translate-x-1/2 rounded-full bg-gradient-to-r from-white/60 via-white/20 to-transparent opacity-60 blur-3xl pointer-events-none",animate:{x:["-6%","6%","-6%"]},transition:{duration:14,repeat:1/0,ease:"easeInOut"}})]}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_15%,rgba(255,188,220,0.35),transparent_55%),radial-gradient(circle_at_80%_20%,rgba(125,211,252,0.3),transparent_55%),radial-gradient(circle_at_45%_80%,rgba(253,224,71,0.25),transparent_60%)] opacity-70 pointer-events-none"}),t.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-transparent via-white/80 dark:via-white/20 to-transparent"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex justify-center pt-3 pb-1.5",children:t.jsx(f.div,{className:"w-9 h-1 rounded-full bg-slate-300/80 dark:bg-slate-500/50 shadow-[0_0_12px_rgba(255,255,255,0.45)]",initial:{width:20},animate:{width:36},transition:{delay:.2,duration:.3,ease:"easeOut"}})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pb-3",children:[t.jsxs(f.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-12},animate:{opacity:1,x:0},transition:{delay:.1,duration:.3},children:[t.jsxs("span",{className:"relative w-11 h-11 rounded-[18px] bg-gradient-to-br from-pink-500 via-amber-400 to-sky-500 flex items-center justify-center text-white shadow-lg shadow-pink-500/25",children:[t.jsx(F,{className:"w-5 h-5"}),t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 rounded-full bg-gradient-to-r from-yellow-300 to-amber-400 border-2 border-white dark:border-slate-900 flex items-center justify-center",children:t.jsx(V,{className:"w-1.5 h-1.5 text-amber-800"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] sm:text-[10px] uppercase tracking-[0.24em] font-semibold bg-gradient-to-r from-rose-500 via-amber-500 to-sky-500 dark:from-pink-300 dark:via-amber-300 dark:to-sky-300 text-transparent bg-clip-text",children:"Intervention Notes"}),t.jsx("p",{className:"text-sm font-bold text-foreground dark:text-white truncate max-w-[180px] sm:max-w-[280px]",children:s||"Notes"})]})]}),t.jsx(f.button,{onClick:()=>r(!1),whileTap:{scale:.85},className:"w-8 h-8 rounded-full bg-white/60 dark:bg-white/[0.08] backdrop-blur-sm border border-slate-200/60 dark:border-white/[0.1] flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-white/80 dark:hover:bg-white/[0.14] transition-colors shadow-sm","aria-label":"Close",children:t.jsx(Ce,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"mx-5 h-[1px] bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"}),t.jsx(f.div,{className:"px-5 py-4 max-h-[55vh] overflow-y-auto custom-scroll",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.15,duration:.3},children:a?t.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/[0.05] border border-white/70 dark:border-white/[0.08] p-4 backdrop-blur-md shadow-[inset_0_1px_0_rgba(255,255,255,0.45)] dark:shadow-[inset_0_1px_0_rgba(255,255,255,0.06)]",children:t.jsx("p",{className:"text-sm sm:text-base text-foreground dark:text-slate-200 leading-relaxed whitespace-pre-wrap break-words",children:a})}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-2xl bg-slate-100 dark:bg-slate-800/60 flex items-center justify-center",children:t.jsx(F,{className:"w-6 h-6 text-muted-foreground"})}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes recorded for this intervention."})]})}),a&&t.jsxs(f.div,{className:"px-5 pb-5 pt-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},children:[t.jsx("div",{className:"mb-3 h-[1px] bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"}),t.jsx(f.button,{onClick:u,whileTap:{scale:.97},whileHover:i?{}:{y:-1},className:`w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-2xl text-xs sm:text-sm font-semibold transition-all duration-300 border backdrop-blur-sm shadow-sm ${l?"bg-emerald-500/15 dark:bg-emerald-500/10 border-emerald-300/50 dark:border-emerald-500/20 text-emerald-700 dark:text-emerald-300 shadow-emerald-500/10":"bg-gradient-to-r from-white/80 via-white/65 to-white/75 dark:from-white/[0.08] dark:via-white/[0.06] dark:to-white/[0.05] border-white/70 dark:border-white/[0.12] text-slate-700 dark:text-slate-200 hover:from-white/90 hover:to-white/80 dark:hover:from-white/[0.12] dark:hover:to-white/[0.08] shadow-[inset_0_1px_0_rgba(255,255,255,0.45)] dark:shadow-[inset_0_1px_0_rgba(255,255,255,0.06)]"}`,children:l?t.jsxs(t.Fragment,{children:[t.jsx(pe,{className:"w-4 h-4"}),"Copied!"]}):t.jsxs(t.Fragment,{children:[t.jsx(Lt,{className:"w-4 h-4"}),"Copy Notes"]})})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom,0px)]"})]})]})]})})});ve.displayName="NotesBottomSheet";const C=e=>{if(e==null)return!1;const r=`${e}`.trim();if(!r)return!1;const a=r.toLowerCase();return["not set","tbd","-"].includes(a)?!1:/[a-z0-9]/i.test(r)},oe={SEL:{bar:"from-rose-500 via-pink-500 to-fuchsia-500",icon:"from-rose-500 to-pink-500",bg:"from-rose-50 via-white to-pink-50",text:"text-rose-700 dark:text-rose-200",shadow:"shadow-[0_18px_50px_rgba(244,63,94,0.18)]"},ENGLISH:{bar:"from-sky-500 via-blue-500 to-indigo-500",icon:"from-sky-500 to-blue-500",bg:"from-sky-50 via-white to-blue-50",text:"text-sky-700 dark:text-sky-200",shadow:"shadow-[0_18px_50px_rgba(14,165,233,0.18)]"},MATH:{bar:"from-emerald-500 via-teal-500 to-green-500",icon:"from-emerald-500 to-teal-500",bg:"from-emerald-50 via-white to-teal-50",text:"text-emerald-700 dark:text-emerald-200",shadow:"shadow-[0_18px_50px_rgba(16,185,129,0.18)]"},BEHAVIOR:{bar:"from-amber-500 via-orange-500 to-yellow-500",icon:"from-amber-500 to-orange-500",bg:"from-amber-50 via-white to-orange-50",text:"text-amber-700 dark:text-amber-200",shadow:"shadow-[0_18px_50px_rgba(245,158,11,0.18)]"},ATTENDANCE:{bar:"from-indigo-500 via-violet-500 to-purple-500",icon:"from-indigo-500 to-violet-500",bg:"from-indigo-50 via-white to-violet-50",text:"text-indigo-700 dark:text-indigo-200",shadow:"shadow-[0_18px_50px_rgba(99,102,241,0.18)]"},DEFAULT:{bar:"from-cyan-500 via-sky-500 to-blue-500",icon:"from-cyan-500 to-blue-500",bg:"from-cyan-50 via-white to-sky-50",text:"text-sky-700 dark:text-sky-200",shadow:"shadow-[0_18px_50px_rgba(14,165,233,0.18)]"}},$=({icon:e,label:r,value:a,gradient:s,shortLabel:i})=>t.jsxs("div",{className:"group relative overflow-hidden rounded-xl sm:rounded-2xl border border-white/60 dark:border-slate-700/40 bg-white/85 dark:bg-slate-900/50 p-2 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 sm:h-1 bg-gradient-to-r opacity-90",style:{}}),t.jsx("div",{className:`absolute inset-x-0 top-0 h-0.5 sm:h-1 bg-gradient-to-r ${s} opacity-90`}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("span",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-lg sm:rounded-xl bg-gradient-to-br ${s} flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105 flex-shrink-0`,children:t.jsx(e,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("p",{className:"text-[8px] sm:text-[10px] uppercase tracking-wider text-muted-foreground leading-tight",children:[t.jsx("span",{className:"sm:hidden",children:i||r}),t.jsx("span",{className:"hidden sm:inline",children:r})]}),t.jsx("p",{className:"text-[11px] sm:text-sm font-semibold text-foreground dark:text-white truncate leading-tight",children:a})]})]})]}),rr=({intervention:e,config:r,CurrentIcon:a,strategyLabel:s,durationLabel:i,frequencyLabel:l,mentorLabel:m,goalLabel:u,monitoringMethodLabel:c,startDateLabel:o,notesLabel:d})=>{const h=C(s),b=C(i),x=C(l),g=C(m),p=C(u),y=C(c),w=C(o),v=C(d),O=h||b||x||g,N=e?.type?.toUpperCase?.()||"DEFAULT",k=oe[N]||oe.DEFAULT,[L,D]=n.useState(!1);return t.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-5",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[t.jsx("div",{className:`w-8 h-8 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg flex-shrink-0`,children:t.jsx(ue,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[8px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:"Growth Journey"}),t.jsxs("h3",{className:"text-sm sm:text-xl font-bold text-foreground dark:text-white flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:`w-6 h-6 sm:w-10 sm:h-10 rounded-lg sm:rounded-2xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg flex-shrink-0`,children:t.jsx(a,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-white"})}),t.jsx("span",{className:"truncate",children:e.label})]})]})]}),t.jsxs("span",{className:`text-2xl sm:text-5xl font-black bg-gradient-to-r ${r.gradient} text-transparent bg-clip-text flex-shrink-0`,children:[e.progress||0,"%"]})]}),t.jsx("div",{className:"relative rounded-xl sm:rounded-2xl p-2.5 sm:p-4 bg-white/80 dark:bg-slate-800/60 border border-white/60 dark:border-slate-700/40",children:t.jsx("div",{className:"h-40 sm:h-64",children:t.jsx(ot,{width:"100%",height:"100%",children:t.jsxs(dt,{data:e.chart||[],margin:{top:8,right:8,left:-12,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`gradient-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:r.chartColor,stopOpacity:.35}),t.jsx("stop",{offset:"95%",stopColor:r.chartColor,stopOpacity:.02})]})}),t.jsx(gt,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.2)",vertical:!1}),e.target!=null&&t.jsx(R,{y:Number(e.target)||0,stroke:"#f59e0b",strokeDasharray:"8 4",strokeWidth:1.5,label:{value:`Target: ${e.target}`,position:"insideTopRight",fill:"#f59e0b",fontSize:9,fontWeight:600}}),e.baseline!=null&&t.jsx(R,{y:Number(e.baseline)||0,stroke:"#f472b6",strokeDasharray:"4 4",strokeWidth:1,label:{value:`Baseline: ${e.baseline}`,position:"insideBottomRight",fill:"#f472b6",fontSize:9,fontWeight:600}}),t.jsx(pt,{dataKey:"label",tick:{fill:"rgba(148,163,184,1)",fontSize:9,fontWeight:500},stroke:"rgba(148,163,184,0.3)",tickLine:!1,dy:4}),t.jsx(ft,{tick:{fill:"rgba(148,163,184,1)",fontSize:9,fontWeight:500},stroke:"rgba(148,163,184,0.3)",tickLine:!1,axisLine:!1}),t.jsx(bt,{contentStyle:{borderRadius:14,border:"1px solid rgba(148,163,184,0.2)",backdropFilter:"blur(16px)",background:"rgba(255,255,255,0.95)",boxShadow:"0 12px 40px rgba(0,0,0,0.12)",fontSize:12,padding:"8px 12px"},labelStyle:{fontWeight:700,marginBottom:4,color:"#334155"},formatter:(j,I)=>[j,I==="reading"?"Score":I==="goal"?"Goal Line":I],cursor:{stroke:r.chartColor,strokeWidth:1,strokeDasharray:"4 4"}}),t.jsx(z,{verticalAlign:"top",align:"right",iconType:"circle",iconSize:7,wrapperStyle:{fontSize:10,fontWeight:600,paddingBottom:4},formatter:j=>j==="reading"?"Progress":j==="goal"?"Goal Line":j}),t.jsx(ct,{type:"monotone",dataKey:"reading",name:"reading",stroke:r.chartColor,strokeWidth:2.5,fill:`url(#gradient-${e.id})`,dot:{r:3,fill:r.chartColor,stroke:"#fff",strokeWidth:1.5},activeDot:{r:5,fill:r.chartColor,stroke:"#fff",strokeWidth:2}}),t.jsx(wt,{type:"monotone",dataKey:"goal",name:"goal",stroke:"#0ea5e9",strokeWidth:2,strokeDasharray:"6 4",dot:!1,activeDot:{r:4,fill:"#0ea5e9",stroke:"#fff",strokeWidth:2}})]})})})}),t.jsx("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-3 max-w-2xl mx-auto",children:[{label:"Baseline",value:e.baseline,color:"from-pink-500 to-rose-500",bg:"bg-pink-50 dark:bg-pink-900/20"},{label:"Current",value:e.current,color:"from-emerald-500 to-teal-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{label:"Target",value:e.target,color:"from-amber-500 to-orange-500",bg:"bg-amber-50 dark:bg-amber-900/20"}].map(j=>t.jsxs("div",{className:`${j.bg} rounded-lg sm:rounded-2xl p-2 sm:p-4 text-center`,children:[t.jsx("p",{className:"text-[8px] sm:text-xs uppercase tracking-wider text-muted-foreground mb-0.5 sm:mb-1",children:j.label}),t.jsx("p",{className:`text-base sm:text-2xl font-black bg-gradient-to-r ${j.color} text-transparent bg-clip-text`,children:j.value??"-"}),t.jsx("p",{className:"text-[8px] sm:text-xs text-muted-foreground",children:e.progressUnit||"pts"})]},j.label))}),(O||p||y||w||v)&&t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-white/50 dark:border-slate-700/30 bg-white/70 dark:bg-slate-900/40 p-2.5 sm:p-5 space-y-2.5 sm:space-y-4",children:[O&&t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1.5 sm:gap-3",children:[h&&t.jsx($,{icon:vt,label:"Strategy",value:s,gradient:"from-sky-500 to-blue-500"}),b&&t.jsx($,{icon:jt,label:"Duration",shortLabel:"Dur.",value:i,gradient:"from-amber-500 to-orange-500"}),x&&t.jsx($,{icon:_e,label:"Frequency",shortLabel:"Freq.",value:l,gradient:"from-emerald-500 to-teal-500"}),g&&t.jsx($,{icon:de,label:"Mentor",value:m,gradient:"from-violet-500 to-fuchsia-500"})]}),(p||y)&&t.jsxs("div",{className:`grid ${p&&y?"grid-cols-1 sm:grid-cols-2":"grid-cols-1"} gap-1.5 sm:gap-3`,children:[p&&t.jsxs("div",{className:"relative overflow-hidden rounded-xl sm:rounded-2xl border border-white/60 dark:border-slate-700/40 bg-white/85 dark:bg-slate-900/50 p-2.5 sm:p-4 shadow-sm",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 sm:h-1.5 bg-gradient-to-r from-rose-500 to-pink-500 opacity-90"}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-[8px] sm:text-[10px] uppercase tracking-wider text-muted-foreground",children:[t.jsx("span",{className:"w-6 h-6 sm:w-9 sm:h-9 rounded-lg sm:rounded-xl bg-gradient-to-br from-rose-500 to-pink-500 flex items-center justify-center text-white shadow-md flex-shrink-0",children:t.jsx(fe,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),"Goal"]}),t.jsx("p",{className:"mt-1.5 sm:mt-3 text-[11px] sm:text-sm font-semibold text-foreground dark:text-white break-words leading-snug sm:leading-relaxed",children:u})]}),y&&t.jsxs("div",{className:`relative overflow-hidden rounded-xl sm:rounded-2xl border border-white/70 dark:border-slate-700/40 bg-gradient-to-br ${k.bg} dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/40 p-2.5 sm:p-5`,children:[t.jsx("div",{className:`absolute inset-x-0 top-0 h-1 sm:h-2.5 bg-gradient-to-r ${k.bar}`}),t.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2",children:t.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 text-[8px] sm:text-[10px] uppercase tracking-wider ${k.text}`,children:[t.jsx("span",{className:`w-6 h-6 sm:w-11 sm:h-11 rounded-lg sm:rounded-2xl bg-gradient-to-br ${k.icon} flex items-center justify-center text-white shadow-md flex-shrink-0`,children:t.jsx(Ct,{className:"w-3 h-3 sm:w-5 sm:h-5"})}),t.jsx("span",{className:"sm:hidden",children:"Monitor"}),t.jsx("span",{className:"hidden sm:inline",children:"Monitoring Method"})]})}),t.jsx("p",{className:"mt-1.5 sm:mt-4 text-[11px] sm:text-base font-semibold text-slate-900 dark:text-white break-words leading-snug sm:leading-relaxed",children:c})]})]}),(w||v)&&t.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-3",children:[w&&t.jsx($,{icon:B,label:"Start Date",shortLabel:"Start",value:o,gradient:"from-indigo-500 to-purple-500"}),v&&t.jsxs("button",{type:"button",onClick:()=>D(!0),className:"group relative overflow-hidden rounded-xl sm:rounded-2xl border border-white/60 dark:border-slate-700/40 bg-white/85 dark:bg-slate-900/50 p-2 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg text-left w-full cursor-pointer active:scale-[0.98]",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 sm:h-1 bg-gradient-to-r from-amber-500 to-yellow-500 opacity-90"}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("span",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-lg sm:rounded-xl bg-gradient-to-br from-amber-500 to-yellow-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105 flex-shrink-0",children:t.jsx(F,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-[8px] sm:text-[10px] uppercase tracking-wider text-muted-foreground leading-tight",children:"Notes"}),t.jsx("p",{className:"text-[11px] sm:text-sm font-semibold text-foreground dark:text-white leading-snug line-clamp-1",children:d})]}),t.jsx(xe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-amber-500 dark:text-amber-400 flex-shrink-0 group-hover:translate-x-0.5 transition-transform"})]})]})]})]}),t.jsx(ve,{open:L,onOpenChange:D,notes:d,interventionLabel:e?.label})]})},ar=({intervention:e,config:r,glassStyles:a})=>t.jsx("div",{className:"lg:w-80 xl:w-96",children:t.jsxs("div",{className:`${a.inner} rounded-xl sm:rounded-2xl p-2.5 sm:p-4 h-full`,children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2.5 sm:mb-4",children:[t.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg flex-shrink-0`,children:t.jsx(V,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-white"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[8px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:"Check-in History"}),t.jsx("h4",{className:"text-xs sm:text-base font-bold text-foreground dark:text-white",children:"Recent Reflections"})]})]}),t.jsx("div",{className:"space-y-1.5 sm:space-y-3 max-h-48 sm:max-h-80 overflow-y-auto pr-0 sm:pr-1 custom-scroll",children:(e.history||[]).length>0?e.history.map((s,i)=>t.jsxs(f.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1+i*.05},className:`${r.lightBg} rounded-lg sm:rounded-xl p-2 sm:p-3 ${r.border} border`,children:[t.jsxs("div",{className:"flex items-center justify-between gap-1.5 mb-0.5 sm:mb-1",children:[t.jsxs("span",{className:"flex items-center gap-1 text-[8px] sm:text-[10px] uppercase tracking-wider text-muted-foreground",children:[t.jsx(B,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),s.date]}),s.score!=null&&t.jsxs("span",{className:`inline-flex items-center gap-0.5 sm:gap-1 px-1.5 py-0.5 rounded-full ${r.lightBg} ${r.text} text-[9px] sm:text-xs font-medium`,children:[t.jsx(ue,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),s.score," ",e.progressUnit||"pts"]})]}),t.jsx("p",{className:"text-[10px] sm:text-sm text-foreground dark:text-white line-clamp-2 leading-snug",children:s.notes}),s.celebration&&t.jsx("div",{className:"mt-1 sm:mt-2 text-[9px] sm:text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full inline-flex items-center gap-0.5 sm:gap-1",children:s.celebration})]},i)):t.jsx("div",{className:"text-center py-4 sm:py-8 text-muted-foreground",children:t.jsx("span",{className:"text-xl sm:text-3xl block mb-1 sm:mb-2",children:"No check-ins yet"})})})]})}),je=n.memo(({intervention:e,strategyLabel:r,durationLabel:a,frequencyLabel:s,mentorLabel:i,goalLabel:l,monitoringMethodLabel:m,startDateLabel:u,notesLabel:c})=>{const o=T[e?.type]||T.SEL,d=o.icon||V;return e?t.jsx(f.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`${P.inner} rounded-xl sm:rounded-3xl p-2.5 sm:p-6`,children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-6",children:[t.jsx(rr,{intervention:e,config:o,CurrentIcon:d,strategyLabel:r,durationLabel:a,frequencyLabel:s,mentorLabel:i,goalLabel:l,monitoringMethodLabel:m,startDateLabel:u,notesLabel:c}),t.jsx(ar,{intervention:e,config:o,glassStyles:P})]})},e.id):null});je.displayName="GrowthJourneySection";const ke=n.memo(({intervention:e,index:r,isSelected:a,onSelect:s})=>{const i=T[e.type]||T.SEL,l=M[e.tier]||M.tier1,m=e.tier==="tier1"||!e.hasRealData,u=e.tierLabel||l.label,c=It(e.status),o=Et(e.tier),d=Dt(e.status);return t.jsxs("div",{"data-aos":"fade-up","data-aos-delay":r*80,"data-aos-duration":"500",className:"relative",children:[t.jsx("div",{className:"absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 z-20",children:t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1.5 rounded-lg sm:rounded-xl text-[9px] sm:text-[11px] font-bold uppercase tracking-wide shadow-lg ${o}`,children:u})}),a&&t.jsx("div",{className:"absolute -top-1.5 -left-1.5 sm:-top-2 sm:-left-2 z-20",children:t.jsx("span",{className:"flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 shadow-lg ring-2 ring-white dark:ring-slate-800",children:t.jsx(pe,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})}),t.jsxs(f.button,{whileHover:e.hasRealData?{scale:1.02,y:-4}:{},whileTap:e.hasRealData?{scale:.98}:{},onClick:()=>e.hasRealData?s(e):null,disabled:!e.hasRealData,className:`group relative w-full text-left rounded-xl sm:rounded-2xl overflow-hidden transition-all duration-300 backdrop-blur-xl
                    ${m?"bg-white/60 dark:bg-slate-800/30 border border-slate-200/60 dark:border-slate-700/40 shadow-md":`bg-white/80 dark:bg-slate-900/50 border-2 ${i.border} shadow-xl ${i.glow}`}
                    ${a?`ring-4 ${i.ring} shadow-2xl`:e.hasRealData?"hover:shadow-2xl cursor-pointer":"cursor-default opacity-80"}`,children:[t.jsx("div",{className:`px-2.5 py-2 sm:px-4 sm:py-3 bg-gradient-to-r ${i.gradient} ${m?"opacity-70":""}`,children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-white/25 backdrop-blur-sm flex items-center justify-center shadow-inner flex-shrink-0",children:t.jsx("span",{className:"text-sm sm:text-xl",children:i.emoji})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h4",{className:"text-xs sm:text-base font-bold text-white truncate",children:e.label})})]})}),t.jsxs("div",{className:"p-2 sm:p-4 space-y-1.5 sm:space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:`inline-flex items-center gap-1 sm:gap-1.5 px-1.5 py-0.5 sm:px-2.5 sm:py-1 rounded-md sm:rounded-lg text-[8px] sm:text-[11px] font-semibold uppercase tracking-wide ring-1 ${d}`,children:[t.jsx("span",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full ${e.status==="active"?"bg-emerald-500 animate-pulse":e.status==="paused"?"bg-amber-500":"bg-slate-400"}`}),c]}),e.hasRealData&&t.jsx(fe,{className:`w-3 h-3 sm:w-4 sm:h-4 ${i.text}`})]}),t.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground dark:text-slate-400 line-clamp-1 sm:line-clamp-2 sm:min-h-[2rem]",children:[t.jsx("span",{className:"font-medium text-foreground dark:text-slate-300",children:"Strategy:"})," ",e.strategyName||e.focusArea||"Core supports"]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:"Progress"}),t.jsxs("span",{className:`font-bold sm:text-sm ${i.text}`,children:[e.progress||0,"%"]})]}),t.jsx("div",{className:"h-1.5 sm:h-2 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden",children:t.jsx(f.div,{initial:{width:0},animate:{width:`${e.progress||0}%`},transition:{delay:.3+r*.1,duration:.8,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${i.gradient}`})})]}),t.jsxs("div",{className:"flex items-center justify-between pt-1.5 sm:pt-2 border-t border-slate-200/60 dark:border-slate-700/40",children:[t.jsxs("span",{className:"text-[9px] sm:text-xs text-muted-foreground flex items-center gap-1",children:[t.jsx(B,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),e.checkInsCount||0," check-ins"]}),e.hasRealData&&t.jsxs("span",{className:`inline-flex items-center gap-0.5 sm:gap-1 text-[9px] sm:text-xs font-semibold ${i.text} group-hover:translate-x-1 transition-transform`,children:["Details",t.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]})]})]})});ke.displayName="InterventionCard";const sr=({sortedInterventions:e,selectedIntervention:r,onSelect:a,glassStyles:s})=>t.jsxs(f.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`${s.inner} rounded-xl sm:rounded-3xl p-3 sm:p-6`,children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-6",children:[t.jsx("div",{className:"w-8 h-8 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx(Le,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:"Support Map"}),t.jsxs("h3",{className:"text-sm sm:text-xl font-bold text-foreground dark:text-white",children:["All Interventions",t.jsx("span",{className:"hidden sm:inline text-sm font-normal text-muted-foreground ml-2",children:"(Click Tier 2/3 to view progress)"})]})]})]}),e.length>0?t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-2 sm:gap-4",children:e.map((i,l)=>t.jsx(ke,{intervention:i,index:l,isSelected:r?.id===i.id,onSelect:a},i.id||l))}):t.jsxs("div",{className:"text-center py-6 sm:py-10 text-muted-foreground",children:[t.jsx(he,{className:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 text-amber-400"}),t.jsx("p",{className:"font-medium text-sm sm:text-base",children:"No active interventions"}),t.jsx("p",{className:"text-xs sm:text-sm opacity-70",children:"Universal supports are in place"})]})]}),ir=({glassStyles:e})=>t.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:`${e.inner} rounded-2xl p-8 text-center`,children:[t.jsx(he,{className:"w-16 h-16 mx-auto mb-4 text-amber-400"}),t.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-white mb-2",children:"Universal Supports Active"}),t.jsx("p",{className:"text-muted-foreground",children:"This student is receiving Tier 1 universal classroom supports. No targeted interventions are currently assigned."})]}),nr=()=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/30 dark:from-slate-950 dark:via-purple-950/20 dark:to-pink-950/20",children:t.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-pulse"}),t.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-ping opacity-20"})]}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading student profile..."})]})}),lr=({error:e,onBack:r})=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-rose-50/30 dark:from-slate-950 dark:to-rose-950/20 p-4",children:t.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${P.card} rounded-3xl p-8 text-center space-y-4 max-w-md shadow-2xl`,children:[t.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center",children:t.jsx(kt,{className:"w-10 h-10 text-rose-500"})}),t.jsx("p",{className:"text-lg font-semibold text-rose-600 dark:text-rose-400",children:e||"Student not found"}),t.jsx("button",{className:"px-6 py-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all",onClick:r,children:"Back to Students"})]})}),or=e=>{const[r,a]=n.useState(null),[s,i]=n.useState(!0),[l,m]=n.useState(null),[u,c]=n.useState(null),o=n.useMemo(()=>Be(),[]);return n.useEffect(()=>{let d=!0;const h=new AbortController;return(async()=>{i(!0),m(null);try{const x=await Ee(e,{signal:h.signal});if(!d)return;a(x?.student||null);const g=x?.student?.interventionDetails||[];g.length>0&&c(g[0])}catch(x){if(!d||x?.name==="CanceledError"||x?.name==="AbortError")return;try{const{assignments:g=[]}=await De({},{signal:h.signal});if(!d)return;const{students:p}=Te(g,o?.username||o?.name||"MTSS Mentor"),y=p.find(w=>w.slug===e);if(y){a(y);return}}catch{if(!d)return}m(x.response?.data?.message||x.message||"Unable to load student profile")}finally{d&&i(!1)}})(),()=>{d=!1,h.abort()}},[e,o]),{student:r,loading:s,error:l,selectedIntervention:u,setSelectedIntervention:c}},Ne=e=>e!=null&&e!=="",dr=e=>{if(!e)return null;if(Ne(e.goal))return e.goal;const r=e.goals;if(typeof r=="string")return r;if(!Array.isArray(r)||r.length===0)return null;const a=r.find(s=>s);return a?typeof a=="string"?a:a.description||a.goal||a.title||a.name||null:null},cr=e=>{const{interventionDetails:r=[]}=e;return be(e.interventions).map(s=>{const i=r.find(l=>l.type?.toUpperCase()===s.type?.toUpperCase());return i?{...i,hasRealData:!0,type:s.type}:{id:`default-${s.type}`,type:s.type,label:s.label,tier:s.tierCode||"tier1",tierLabel:s.tier||"Tier 1",status:s.status||"monitoring",strategyName:s.strategies?.[0]||null,baseline:null,current:null,target:null,progressUnit:"pts",progress:0,checkInsCount:0,chart:[],history:[],hasRealData:!1}})},mr=(e,r)=>{if(!e)return{profile:{},highlight:null,sortedInterventions:[],currentIntervention:null,strategyLabel:null,durationLabel:null,frequencyLabel:null,mentorLabel:null,goalLabel:null,monitoringMethodLabel:null,startDateLabel:null,notesLabel:null};const{profile:a={}}=e,s=cr(e),i=be(e.interventions),l=Nt(i),m=[...s].sort((v,O)=>{const N={tier3:0,tier2:1,tier1:2},k=v.tier?.toLowerCase()||"tier1",L=O.tier?.toLowerCase()||"tier1";return(N[k]??2)-(N[L]??2)}),c=m.filter(v=>v.tier==="tier2"||v.tier==="tier3")[0]||m[0]||null,o=r||c,d=o?.strategyName||o?.focusArea||null,h=o?.duration||null,b=o?.monitoringFrequency||o?.monitoringMethod||null,x=o?.mentor||a?.mentor||e.mentor||"TBD",g=dr(o)||null,p=o?.monitoringMethod||o?.monitorMethod||null,y=o?.startDate?Me(o.startDate,{month:"short",day:"numeric",year:"numeric"}):null,w=Ne(o?.notes)?o.notes:null;return{profile:a,highlight:l,sortedInterventions:m,currentIntervention:o,strategyLabel:d,durationLabel:h,frequencyLabel:b,mentorLabel:x,goalLabel:g,monitoringMethodLabel:p,startDateLabel:y,notesLabel:w}},ur=n.memo(()=>{const{slug:e}=Ie(),r=$e(),{student:a,loading:s,error:i,selectedIntervention:l,setSelectedIntervention:m}=or(e);n.useEffect(()=>{Q.init({duration:600,easing:"ease-out-cubic",once:!0,offset:50,delay:0})},[]),n.useEffect(()=>{a&&setTimeout(()=>Q.refresh(),100)},[a]);const u=n.useCallback(N=>{m(N)},[m]),{profile:c,highlight:o,sortedInterventions:d,currentIntervention:h,strategyLabel:b,durationLabel:x,frequencyLabel:g,mentorLabel:p,goalLabel:y,monitoringMethodLabel:w,startDateLabel:v,notesLabel:O}=n.useMemo(()=>mr(a,l),[a,l]);return s?t.jsx(nr,{}):i||!a?t.jsx(lr,{error:i,onBack:()=>r("/mtss?tab=students")}):t.jsxs("div",{className:"relative min-h-screen mtss-theme bg-gradient-to-br from-slate-50 via-white to-rose-50/40 dark:from-slate-950 dark:via-slate-900 dark:to-rose-950/20",children:[t.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 hidden sm:block mtss-animated-bg opacity-70"}),t.jsx("div",{className:"absolute -top-32 -left-32 hidden sm:block w-96 h-96 bg-gradient-to-br from-purple-400/20 to-pink-400/20 dark:from-purple-600/10 dark:to-pink-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute top-1/4 -right-32 hidden sm:block w-80 h-80 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 dark:from-blue-600/10 dark:to-cyan-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute -bottom-32 left-1/4 hidden sm:block w-72 h-72 bg-gradient-to-br from-amber-400/15 to-orange-400/15 dark:from-amber-600/10 dark:to-orange-600/10 rounded-full blur-3xl"})]}),t.jsxs("div",{className:"relative z-10 container max-w-7xl mx-auto px-4 sm:px-6 py-3 sm:py-8 space-y-3 sm:space-y-6",children:[t.jsxs(f.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>window.history.length>2?r(-1):r("/mtss/teacher?tab=students"),className:`${P.card} ${P.hover} inline-flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2.5 rounded-full text-xs sm:text-sm font-semibold shadow-lg`,children:[t.jsx(Ae,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Back to Students"}),t.jsx("span",{className:"sm:hidden",children:"Back"})]}),t.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${P.card} rounded-2xl sm:rounded-3xl overflow-hidden shadow-2xl`,children:[t.jsx(ye,{student:a,highlight:o,currentTier:h?.tier,currentInterventionLabel:h?.label}),t.jsxs("div",{className:"p-2.5 sm:p-6 lg:p-8 space-y-3 sm:space-y-6",children:[t.jsx(we,{student:a,profile:c,mentorLabel:p}),t.jsx(sr,{sortedInterventions:d,selectedIntervention:l,onSelect:u,glassStyles:P}),t.jsx(me,{mode:"wait",children:h&&t.jsx(je,{intervention:h,strategyLabel:b,durationLabel:x,frequencyLabel:g,mentorLabel:p,goalLabel:y,monitoringMethodLabel:w,startDateLabel:v,notesLabel:O})}),!h&&d.length===0&&t.jsx(ir,{glassStyles:P})]})]})]})]})});ur.displayName="StudentProfilePage";export{ur as default};
