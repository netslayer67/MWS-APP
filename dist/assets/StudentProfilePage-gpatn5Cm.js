import{c as P,v as U,r as d,j as e,ai as C,m as p,$,C as G,w as I,x as O,a4 as F,ag as D,aj as H,ae as z,B as q,b as J,ak as S,t as W,A as _}from"./index-D2rZlo4J.js";import{C as N,g as K,m as V}from"./teacherMappingUtils-C7N1X8nf.js";import{S as Q}from"./shield-check-DZFn7leu.js";import{B}from"./book-open-DMI48jbp.js";import{P as X}from"./StatusPills-DlW3t5hA.js";import{U as Y}from"./users-CG7GhvXm.js";import{R as Z}from"./CategoricalChart-Cf9d4Gs_.js";import{A as ee,a as te}from"./AreaChart-B38580P-.js";import{C as re,X as ae,Y as se,T as le}from"./CartesianChart-kmLnIqT1.js";import{L as oe}from"./Line-35KelT03.js";import{Z as ie}from"./zap-krYSk9az.js";import{C as ne}from"./clock---bAEDGh.js";import{C as de}from"./circle-check-DcTRw1UX.js";import{T as ce}from"./target-DqZK0EA5.js";import{C as me}from"./circle-alert-B-8sHbjZ.js";import{e as L,p as xe}from"./interventionSelection-Vcld4Os_.js";import"./teacherGradeUtils-COfj_G-K.js";import"./ActivePoints-DclT1874.js";import"./ErrorBarContext-C__XMjeI.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],ue=P("calculator",ge),w={SEL:{icon:U,emoji:"ðŸ’–",gradient:"from-purple-500 via-fuchsia-500 to-pink-500",lightBg:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-950/40 dark:to-fuchsia-950/30",cardBg:"bg-gradient-to-br from-purple-100/80 to-fuchsia-100/60 dark:from-purple-900/40 dark:to-fuchsia-900/30",border:"border-purple-200/60 dark:border-purple-700/40",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400/30",glow:"shadow-purple-500/20",chartColor:"#a855f7"},ENGLISH:{icon:B,emoji:"ðŸ“š",gradient:"from-blue-500 via-cyan-500 to-teal-500",lightBg:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/40 dark:to-cyan-950/30",cardBg:"bg-gradient-to-br from-blue-100/80 to-cyan-100/60 dark:from-blue-900/40 dark:to-cyan-900/30",border:"border-blue-200/60 dark:border-blue-700/40",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400/30",glow:"shadow-blue-500/20",chartColor:"#3b82f6"},MATH:{icon:ue,emoji:"ðŸ”¢",gradient:"from-emerald-500 via-green-500 to-teal-500",lightBg:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/40 dark:to-green-950/30",cardBg:"bg-gradient-to-br from-emerald-100/80 to-green-100/60 dark:from-emerald-900/40 dark:to-green-900/30",border:"border-emerald-200/60 dark:border-emerald-700/40",text:"text-emerald-700 dark:text-emerald-300",ring:"ring-emerald-400/30",glow:"shadow-emerald-500/20",chartColor:"#10b981"},BEHAVIOR:{icon:Q,emoji:"â­",gradient:"from-amber-500 via-orange-500 to-yellow-500",lightBg:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/40 dark:to-orange-950/30",cardBg:"bg-gradient-to-br from-amber-100/80 to-orange-100/60 dark:from-amber-900/40 dark:to-orange-900/30",border:"border-amber-200/60 dark:border-amber-700/40",text:"text-amber-700 dark:text-amber-300",ring:"ring-amber-400/30",glow:"shadow-amber-500/20",chartColor:"#f59e0b"},ATTENDANCE:{icon:N,emoji:"ðŸ“",gradient:"from-indigo-500 via-violet-500 to-purple-500",lightBg:"bg-gradient-to-br from-indigo-50 to-violet-50 dark:from-indigo-950/40 dark:to-violet-950/30",cardBg:"bg-gradient-to-br from-indigo-100/80 to-violet-100/60 dark:from-indigo-900/40 dark:to-violet-900/30",border:"border-indigo-200/60 dark:border-indigo-700/40",text:"text-indigo-700 dark:text-indigo-300",ring:"ring-indigo-400/30",glow:"shadow-indigo-500/20",chartColor:"#6366f1"}},y={tier1:{label:"Tier 1",bg:"bg-emerald-500",gradient:"from-emerald-500 to-teal-500",text:"text-emerald-700 dark:text-emerald-300",lightBg:"bg-emerald-100 dark:bg-emerald-900/30"},tier2:{label:"Tier 2",bg:"bg-amber-500",gradient:"from-amber-500 to-orange-500",text:"text-amber-700 dark:text-amber-300",lightBg:"bg-amber-100 dark:bg-amber-900/30"},tier3:{label:"Tier 3",bg:"bg-rose-500",gradient:"from-rose-500 to-pink-500",text:"text-rose-700 dark:text-rose-300",lightBg:"bg-rose-100 dark:bg-rose-900/30"}},h={card:"backdrop-blur-xl bg-white/60 dark:bg-slate-900/50 border border-white/40 dark:border-white/10",inner:"backdrop-blur-md bg-white/40 dark:bg-white/5 border border-white/30 dark:border-white/5",hover:"hover:bg-white/70 dark:hover:bg-slate-900/60 hover:shadow-xl transition-all duration-300"},pe=t=>{switch(t){case"tier3":return"bg-gradient-to-r from-rose-500 to-pink-500 text-white shadow-rose-500/30";case"tier2":return"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-amber-500/30";default:return"bg-gradient-to-r from-slate-400 to-slate-500 text-white shadow-slate-500/20"}},he=t=>{switch(t){case"active":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300 ring-emerald-500/20";case"paused":return"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 ring-amber-500/20";default:return"bg-slate-100 text-slate-600 dark:bg-slate-800/60 dark:text-slate-400 ring-slate-500/20"}},be=t=>{switch(t){case"active":return"Active";case"paused":return"Paused";case"closed":return"Closed";default:return"Monitoring"}},T=d.memo(({student:t,highlight:a,currentTier:l,currentInterventionLabel:s})=>{const r=y[l]||y.tier1,o=t.className&&t.className!==t.grade?t.className:null;return e.jsxs("div",{className:"relative overflow-hidden text-white",children:[e.jsx("div",{className:"absolute inset-0 mtss-hero-gradient"}),e.jsx("div",{className:"absolute inset-0 mtss-hero-aurora opacity-80"}),e.jsx("div",{className:"absolute inset-0 mtss-hero-shine hidden sm:block"}),e.jsx("div",{className:"relative px-4 sm:px-8 py-6 sm:py-8",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:"mtss-chip bg-white/15 text-white/90",children:"Student Spotlight"}),e.jsx("h1",{className:"text-2xl sm:text-4xl font-black tracking-tight",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm font-semibold text-white/90",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/15",children:t.grade||"-"}),o&&e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10",children:o}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10",children:a?.label||"Universal Supports"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-xs sm:text-sm font-bold bg-gradient-to-r ${r.gradient} shadow-lg`,children:r.label}),e.jsx("span",{className:"px-4 py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/15 backdrop-blur-sm",children:s||a?.label||"Universal"}),e.jsx(X,{status:t.progress})]})]})})]})});T.displayName="StudentProfileHeader";const A=d.memo(({student:t,profile:a,mentorLabel:l})=>{const s=[{label:"Grade",value:t.grade||"-",icon:B,gradient:"from-blue-500 to-cyan-500"},{label:"Class",value:t.className||"-",icon:Y,gradient:"from-emerald-500 to-teal-500"},{label:"Started",value:a?.started||"-",icon:N,gradient:"from-rose-500 to-pink-500"},{label:"Mentor",value:l,icon:C,gradient:"from-purple-500 to-violet-500"}];return e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3",children:s.map((r,o)=>{const i=r.icon;return e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15+o*.05},className:`${h.inner} group rounded-2xl p-3 sm:p-4 ${h.hover} hover:-translate-y-0.5 active:scale-[0.99]`,children:[e.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br ${r.gradient} flex items-center justify-center mb-2 shadow-lg`,children:e.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),e.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:r.label}),e.jsx("p",{className:"text-sm sm:text-base font-bold text-foreground dark:text-white truncate",children:r.value})]},r.label)})})});A.displayName="QuickFactsGrid";const fe=({intervention:t,config:a,CurrentIcon:l,strategyLabel:s,durationLabel:r,frequencyLabel:o,mentorLabel:i})=>e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${a.gradient} flex items-center justify-center shadow-lg`,children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Growth Journey"}),e.jsxs("h3",{className:"text-xl font-bold text-foreground dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-2xl bg-gradient-to-br ${a.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(l,{className:"w-5 h-5 text-white"})}),t.label]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-3xl sm:text-5xl font-black bg-gradient-to-r ${a.gradient} text-transparent bg-clip-text`,children:[t.progress||0,"%"]})})]}),e.jsx("div",{className:`${a.lightBg} rounded-2xl p-4`,children:e.jsx("div",{className:"h-44 sm:h-60",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(ee,{data:t.chart||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${t.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:a.chartColor,stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:a.chartColor,stopOpacity:0})]})}),e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),e.jsx(ae,{dataKey:"label",stroke:"var(--muted-foreground)",fontSize:10,tickLine:!1}),e.jsx(se,{stroke:"var(--muted-foreground)",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(le,{contentStyle:{borderRadius:16,border:"none",backdropFilter:"blur(12px)",background:"rgba(255,255,255,0.95)",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"}}),e.jsx(te,{type:"monotone",dataKey:"reading",stroke:a.chartColor,strokeWidth:3,fill:`url(#gradient-${t.id})`}),e.jsx(oe,{type:"monotone",dataKey:"goal",stroke:"#0ea5e9",strokeWidth:2,strokeDasharray:"6 4",dot:!1})]})})})}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[{label:"Baseline",value:t.baseline,color:"from-pink-500 to-rose-500",bg:"bg-pink-50 dark:bg-pink-900/20"},{label:"Current",value:t.current,color:"from-emerald-500 to-teal-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{label:"Target",value:t.target,color:"from-amber-500 to-orange-500",bg:"bg-amber-50 dark:bg-amber-900/20"}].map(m=>e.jsxs("div",{className:`${m.bg} rounded-xl sm:rounded-2xl p-2.5 sm:p-4 text-center`,children:[e.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground mb-1",children:m.label}),e.jsx("p",{className:`text-xl sm:text-2xl font-black bg-gradient-to-r ${m.color} text-transparent bg-clip-text`,children:m.value??"-"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.progressUnit||"pts"})]},m.label))}),e.jsxs("div",{className:`${a.lightBg} rounded-2xl p-3 sm:p-4 grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4`,children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"})," Strategy"]}),e.jsx("p",{className:"text-sm font-semibold text-foreground dark:text-white truncate",children:s})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"})," Duration"]}),e.jsx("p",{className:"text-sm font-semibold text-foreground dark:text-white",children:r})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"})," Frequency"]}),e.jsx("p",{className:"text-sm font-semibold text-foreground dark:text-white",children:o})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"})," Mentor"]}),e.jsx("p",{className:"text-sm font-semibold text-foreground dark:text-white truncate",children:i})]})]})]}),je=({intervention:t,config:a,glassStyles:l})=>e.jsx("div",{className:"lg:w-80 xl:w-96",children:e.jsxs("div",{className:`${l.inner} rounded-2xl p-4 h-full`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${a.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(I,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Check-in History"}),e.jsx("h4",{className:"text-base font-bold text-foreground dark:text-white",children:"Recent Reflections"})]})]}),e.jsx("div",{className:"space-y-3 max-h-56 sm:max-h-80 overflow-y-auto pr-0 sm:pr-1 custom-scroll",children:(t.history||[]).length>0?t.history.map((s,r)=>e.jsxs(p.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1+r*.05},className:`${a.lightBg} rounded-xl p-3 ${a.border} border`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] uppercase tracking-wider text-muted-foreground mb-1",children:[e.jsx(N,{className:"w-3 h-3"}),s.date]}),e.jsx("p",{className:"text-sm text-foreground dark:text-white",children:s.notes}),s.score!=null&&e.jsxs("div",{className:`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${a.lightBg} ${a.text} text-xs font-medium`,children:[e.jsx($,{className:"w-3 h-3"}),s.score," ",t.progressUnit||"pts"]}),s.celebration&&e.jsx("div",{className:"mt-2 text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-2 py-1 rounded-full inline-flex items-center gap-1",children:s.celebration})]},r)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("span",{className:"text-3xl block mb-2",children:"No check-ins yet"})})})]})}),M=d.memo(({intervention:t,strategyLabel:a,durationLabel:l,frequencyLabel:s,mentorLabel:r})=>{const o=w[t?.type]||w.SEL,i=o.icon||I;return t?e.jsx(p.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`${h.inner} rounded-2xl sm:rounded-3xl p-4 sm:p-6`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx(fe,{intervention:t,config:o,CurrentIcon:i,strategyLabel:a,durationLabel:l,frequencyLabel:s,mentorLabel:r}),e.jsx(je,{intervention:t,config:o,glassStyles:h})]})},t.id):null});M.displayName="GrowthJourneySection";const E=d.memo(({intervention:t,index:a,isSelected:l,onSelect:s})=>{const r=w[t.type]||w.SEL,o=y[t.tier]||y.tier1,i=t.tier==="tier1"||!t.hasRealData,m=t.tierLabel||o.label,b=be(t.status),n=pe(t.tier),c=he(t.status);return e.jsxs("div",{"data-aos":"fade-up","data-aos-delay":a*80,"data-aos-duration":"500",className:"relative",children:[e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-xl text-[11px] font-bold uppercase tracking-wide shadow-lg ${n}`,children:m})}),l&&e.jsx("div",{className:"absolute -top-2 -left-2 z-20",children:e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 shadow-lg ring-2 ring-white dark:ring-slate-800",children:e.jsx(de,{className:"w-4 h-4 text-white"})})}),e.jsxs(p.button,{whileHover:t.hasRealData?{scale:1.02,y:-4}:{},whileTap:t.hasRealData?{scale:.98}:{},onClick:()=>t.hasRealData?s(t):null,disabled:!t.hasRealData,className:`group relative w-full text-left rounded-2xl overflow-hidden transition-all duration-300 backdrop-blur-xl
                    ${i?"bg-white/60 dark:bg-slate-800/30 border border-slate-200/60 dark:border-slate-700/40 shadow-md":`bg-white/80 dark:bg-slate-900/50 border-2 ${r.border} shadow-xl ${r.glow}`}
                    ${l?`ring-4 ${r.ring} shadow-2xl`:t.hasRealData?"hover:shadow-2xl cursor-pointer":"cursor-default opacity-80"}`,children:[e.jsx("div",{className:`px-4 py-3 bg-gradient-to-r ${r.gradient} ${i?"opacity-70":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/25 backdrop-blur-sm flex items-center justify-center shadow-inner",children:e.jsx("span",{className:"text-xl",children:r.emoji})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"text-base font-bold text-white truncate",children:t.label})})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[11px] font-semibold uppercase tracking-wide ring-1 ${c}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.status==="active"?"bg-emerald-500 animate-pulse":t.status==="paused"?"bg-amber-500":"bg-slate-400"}`}),b]}),t.hasRealData&&e.jsx(ce,{className:`w-4 h-4 ${r.text}`})]}),e.jsxs("p",{className:"text-xs text-muted-foreground dark:text-slate-400 line-clamp-2 min-h-[2rem]",children:[e.jsx("span",{className:"font-medium text-foreground dark:text-slate-300",children:"Strategy:"})," ",t.strategyName||t.focusArea||"Core supports"]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Progress"}),e.jsxs("span",{className:`font-bold text-sm ${r.text}`,children:[t.progress||0,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden",children:e.jsx(p.div,{initial:{width:0},animate:{width:`${t.progress||0}%`},transition:{delay:.3+a*.1,duration:.8,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${r.gradient}`})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200/60 dark:border-slate-700/40",children:[e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),t.checkInsCount||0," check-ins"]}),t.hasRealData&&e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${r.text} group-hover:translate-x-1 transition-transform`,children:["Details",e.jsx(O,{className:"w-4 h-4"})]})]})]})]})]})});E.displayName="InterventionCard";const ke=({sortedInterventions:t,selectedIntervention:a,onSelect:l,glassStyles:s})=>e.jsxs(p.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`${s.inner} rounded-2xl sm:rounded-3xl p-4 sm:p-6`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Support Map"}),e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground dark:text-white",children:["All Interventions",e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Click Tier 2/3 to view progress)"})]})]})]}),t.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:t.map((r,o)=>e.jsx(E,{intervention:r,index:o,isSelected:a?.id===r.id,onSelect:l},r.id||o))}):e.jsxs("div",{className:"text-center py-10 text-muted-foreground",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-3 text-amber-400"}),e.jsx("p",{className:"font-medium",children:"No active interventions"}),e.jsx("p",{className:"text-sm opacity-70",children:"Universal supports are in place"})]})]}),we=({glassStyles:t})=>e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:`${t.inner} rounded-2xl p-8 text-center`,children:[e.jsx(D,{className:"w-16 h-16 mx-auto mb-4 text-amber-400"}),e.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-white mb-2",children:"Universal Supports Active"}),e.jsx("p",{className:"text-muted-foreground",children:"This student is receiving Tier 1 universal classroom supports. No targeted interventions are currently assigned."})]}),ye=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/30 dark:from-slate-950 dark:via-purple-950/20 dark:to-pink-950/20",children:e.jsxs(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading student profile..."})]})}),Ne=({error:t,onBack:a})=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-rose-50/30 dark:from-slate-950 dark:to-rose-950/20 p-4",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${h.card} rounded-3xl p-8 text-center space-y-4 max-w-md shadow-2xl`,children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center",children:e.jsx(me,{className:"w-10 h-10 text-rose-500"})}),e.jsx("p",{className:"text-lg font-semibold text-rose-600 dark:text-rose-400",children:t||"Student not found"}),e.jsx("button",{className:"px-6 py-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all",onClick:a,children:"Back to Students"})]})}),ve=t=>{const[a,l]=d.useState(null),[s,r]=d.useState(!0),[o,i]=d.useState(null),[m,b]=d.useState(null),n=d.useMemo(()=>K(),[]);return d.useEffect(()=>{let c=!0;const g=new AbortController;return(async()=>{r(!0),i(null);try{const u=await H(t,{signal:g.signal});if(!c)return;l(u?.student||null);const x=u?.student?.interventionDetails||[];x.length>0&&b(x[0])}catch(u){if(!c||u?.name==="CanceledError"||u?.name==="AbortError")return;try{const{assignments:x=[]}=await z({},{signal:g.signal});if(!c)return;const{students:j}=V(x,n?.username||n?.name||"MTSS Mentor"),f=j.find(v=>v.slug===t);if(f){l(f);return}}catch{if(!c)return}i(u.response?.data?.message||u.message||"Unable to load student profile")}finally{c&&r(!1)}})(),()=>{c=!1,g.abort()}},[t,n]),{student:a,loading:s,error:o,selectedIntervention:m,setSelectedIntervention:b}},Se=t=>{const{interventionDetails:a=[]}=t;return L(t.interventions).map(s=>{const r=a.find(o=>o.type?.toUpperCase()===s.type?.toUpperCase());return r?{...r,hasRealData:!0,type:s.type}:{id:`default-${s.type}`,type:s.type,label:s.label,tier:s.tierCode||"tier1",tierLabel:s.tier||"Tier 1",status:s.status||"monitoring",strategyName:s.strategies?.[0]||null,baseline:null,current:null,target:null,progressUnit:"pts",progress:0,checkInsCount:0,chart:[],history:[],hasRealData:!1}})},Ce=(t,a)=>{if(!t)return{profile:{},highlight:null,sortedInterventions:[],currentIntervention:null,strategyLabel:"Core supports",durationLabel:"Ongoing",frequencyLabel:"Weekly",mentorLabel:"TBD"};const{profile:l={}}=t,s=Se(t),r=L(t.interventions),o=xe(r),i=[...s].sort((x,j)=>{const f={tier3:0,tier2:1,tier1:2},v=x.tier?.toLowerCase()||"tier1",R=j.tier?.toLowerCase()||"tier1";return(f[v]??2)-(f[R]??2)}),b=i.filter(x=>x.tier==="tier2"||x.tier==="tier3")[0]||i[0]||null,n=a||b,c=n?.strategyName||n?.focusArea||"Core supports",g=n?.duration||"Ongoing",k=n?.monitoringFrequency||n?.monitoringMethod||"Weekly",u=n?.mentor||l?.mentor||t.mentor||"TBD";return{profile:l,highlight:o,sortedInterventions:i,currentIntervention:n,strategyLabel:c,durationLabel:g,frequencyLabel:k,mentorLabel:u}},$e=d.memo(()=>{const{slug:t}=q(),a=J(),{student:l,loading:s,error:r,selectedIntervention:o,setSelectedIntervention:i}=ve(t);d.useEffect(()=>{S.init({duration:600,easing:"ease-out-cubic",once:!0,offset:50,delay:0})},[]),d.useEffect(()=>{l&&setTimeout(()=>S.refresh(),100)},[l]);const m=d.useCallback(f=>{i(f)},[i]),{profile:b,highlight:n,sortedInterventions:c,currentIntervention:g,strategyLabel:k,durationLabel:u,frequencyLabel:x,mentorLabel:j}=d.useMemo(()=>Ce(l,o),[l,o]);return s?e.jsx(ye,{}):r||!l?e.jsx(Ne,{error:r,onBack:()=>a("/mtss?tab=students")}):e.jsxs("div",{className:"relative min-h-screen mtss-theme bg-gradient-to-br from-slate-50 via-white to-rose-50/40 dark:from-slate-950 dark:via-slate-900 dark:to-rose-950/20",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 hidden sm:block mtss-animated-bg opacity-70"}),e.jsx("div",{className:"absolute -top-32 -left-32 hidden sm:block w-96 h-96 bg-gradient-to-br from-purple-400/20 to-pink-400/20 dark:from-purple-600/10 dark:to-pink-600/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/4 -right-32 hidden sm:block w-80 h-80 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 dark:from-blue-600/10 dark:to-cyan-600/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-32 left-1/4 hidden sm:block w-72 h-72 bg-gradient-to-br from-amber-400/15 to-orange-400/15 dark:from-amber-600/10 dark:to-orange-600/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 container max-w-7xl mx-auto px-4 sm:px-6 py-3 sm:py-8 space-y-3 sm:space-y-6",children:[e.jsxs(p.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>window.history.length>2?a(-1):a("/mtss/teacher?tab=students"),className:`${h.card} ${h.hover} inline-flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2.5 rounded-full text-xs sm:text-sm font-semibold shadow-lg`,children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Students"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${h.card} rounded-3xl overflow-hidden shadow-2xl`,children:[e.jsx(T,{student:l,highlight:n,currentTier:g?.tier,currentInterventionLabel:g?.label}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsx(A,{student:l,profile:b,mentorLabel:j}),e.jsx(ke,{sortedInterventions:c,selectedIntervention:o,onSelect:m,glassStyles:h}),e.jsx(_,{mode:"wait",children:g&&e.jsx(M,{intervention:g,strategyLabel:k,durationLabel:u,frequencyLabel:x,mentorLabel:j})}),!g&&c.length===0&&e.jsx(we,{glassStyles:h})]})]})]})]})});$e.displayName="StudentProfilePage";export{$e as default};
