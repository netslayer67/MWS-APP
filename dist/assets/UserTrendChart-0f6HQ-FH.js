import{r as c,j as e,U as j,T as y}from"./index-BbI_y0ug.js";import{U as b}from"./UserListModal-BSy3vn2L.js";import{R as g}from"./CategoricalChart-DeOqwc46.js";import{A as N,a as p}from"./AreaChart-BKzlCQGw.js";import{C as v,X as C,T as O}from"./CartesianChart-DeKkCZ2O.js";import{Y as w}from"./YAxis-CxQEuk6W.js";import"./circle-alert-NKssJF6b.js";import"./users-DkG0Ga2y.js";import"./cloud-DTBJo2Ao.js";import"./smile-P7wNa_1P.js";import"./ActivePoints-CxPwW1Go.js";const U=c.memo(({userData:n=[],selectedUser:d=null,period:T="week"})=>{const[o,m]=c.useState({isOpen:!1,title:"",users:[],totalUsers:0,type:""}),l=c.useMemo(()=>{if(!n||n.length===0)return[];const t={};return n.forEach(s=>{const a=new Date(s.date).toLocaleDateString();t[a]||(t[a]={date:a,presence:[],capacity:[],count:0,users:[]}),t[a].presence.push(s.presenceLevel),t[a].capacity.push(s.capacityLevel),t[a].count++,t[a].users.push(s)}),Object.values(t).map(s=>({date:s.date,presence:s.presence.reduce((a,r)=>a+r,0)/s.presence.length,capacity:s.capacity.reduce((a,r)=>a+r,0)/s.capacity.length,submissions:s.count,users:s.users||[]})).sort((s,a)=>new Date(s.date)-new Date(a.date))},[n]),x=t=>{t&&t.users&&m({isOpen:!0,title:`Submissions on ${t.date}`,users:t.users,totalUsers:t.submissions,type:"submissions"})},u=()=>{m({isOpen:!1,title:"",users:[],totalUsers:0,type:""})},f=({active:t,payload:s,label:a})=>{if(t&&s&&s.length){const r=l.find(i=>i.date===a);return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium text-foreground mb-2",children:a}),s.map((i,h)=>e.jsxs("p",{className:"text-sm",style:{color:i.color},children:[i.name,": ",i.value.toFixed(1),i.dataKey==="submissions"?"":"/10"]},h)),r&&r.submissions>0&&e.jsxs("button",{onClick:()=>x(r),className:"mt-2 text-xs text-primary hover:underline",children:["View ",r.submissions," submissions"]})]})}return null};return l.length===0?e.jsxs("div",{className:"glass glass-card p-6 text-center",children:[e.jsx(j,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No trend data available"})]}):e.jsxs("div",{className:"glass glass-card transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(y,{className:"w-4 h-4 text-primary"}),e.jsx("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:d?`${d.name}'s Trends`:"Organization Trends"})]}),e.jsx("div",{className:"h-64 md:h-80",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(N,{data:l,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"presenceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"capacityGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})]}),e.jsx(v,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(C,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickFormatter:t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(w,{domain:[0,10],className:"text-xs",tick:{fill:"currentColor"}}),e.jsx(O,{content:e.jsx(f,{})}),e.jsx(p,{type:"monotone",dataKey:"presence",stroke:"#10b981",fillOpacity:1,fill:"url(#presenceGradient)",strokeWidth:2,name:"Presence"}),e.jsx(p,{type:"monotone",dataKey:"capacity",stroke:"#3b82f6",fillOpacity:1,fill:"url(#capacityGradient)",strokeWidth:2,name:"Capacity"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Presence Level"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Capacity Level"})]})]})]}),e.jsx(b,{isOpen:o.isOpen,onClose:u,title:o.title,users:o.users,totalUsers:o.totalUsers,type:o.type})]})});U.displayName="UserTrendChart";export{U as default};
