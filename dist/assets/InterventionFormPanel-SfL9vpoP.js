import{r as u,j as e,E as y,L as _}from"./index-BN59IPuR.js";import{i as I}from"./teacherGradeUtils-CER7NXSQ.js";const F=[{label:"English",value:"english"},{label:"Math",value:"math"},{label:"Behavior",value:"behavior"},{label:"SEL",value:"sel"},{label:"Attendance",value:"attendance"},{label:"Universal Supports",value:"universal"}],E={english:["english","ela","literacy","reading","ela/reading","ela & reading","sight words"],math:["math","mathematics","numeracy","stem"],behavior:["behavior","behaviour","conduct","regulation","sel"],sel:["sel","social emotional","social-emotional","behavior","wellness"],attendance:["attendance","present","absent","absences","engagement"],universal:["universal","schoolwide","all","tier 1"]},$=["Tier 1","Tier 2","Tier 3"],S=["4 weeks","6 weeks","8 weeks"],T=["Daily","Weekly","Bi-weekly"],A=["Option 1 - Direct Observation","Option 2 - Student Self-Report","Option 3 - Assessment Data"],w=["wpm","%","pts","score"],C=(s,l)=>{if(!l)return s;const g=l.toLowerCase(),m=E[g]||[g],v=new Set(m.map(t=>t.toLowerCase())),o=(t="")=>{const n=t.toString().toLowerCase();return n?Array.from(v).some(c=>n===c||n.includes(c)):!1};return s.filter(t=>{const n=Array.isArray(t.bestFor)?t.bestFor.some(x=>o(x)):!1,c=Array.isArray(t.tags)?t.tags.some(x=>o(x)):!1;return n||c})},D=s=>!!(s.studentId&&s.type&&s.tier&&s.startDate&&s.monitorFrequency&&s.monitorMethod),k=u.memo(({formState:s,onChange:l,students:g,selectedStudent:m,strategies:v,filteredStrategies:o,loadingStrategies:t,baseFieldClass:n,textareaClass:c,onStudentChange:x,onStrategyChange:b})=>{const d=`${n} bg-white/90 dark:bg-slate-900/50 border border-white/70 dark:border-white/15 shadow-[0_10px_30px_rgba(15,23,42,0.08)] focus:ring-2 focus:ring-primary/40`,j=`${c} bg-white/90 dark:bg-slate-900/50 border border-white/70 dark:border-white/15 shadow-[0_10px_30px_rgba(15,23,42,0.08)] focus:ring-2 focus:ring-primary/40`,N=`${d} flex-1`,r="rounded-2xl border border-white/60 dark:border-white/10 bg-white/70 dark:bg-white/5 p-4 shadow-inner",i="text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-200";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"90",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Student Name"}),e.jsxs("select",{className:d,value:s.studentId,onChange:x,children:[e.jsx("option",{value:"",children:"Select student"}),g.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Class Scope"}),e.jsx("div",{className:"px-4 py-3 rounded-2xl bg-gradient-to-r from-white/90 via-white/70 to-white/60 dark:from-white/10 dark:via-white/5 dark:to-white/5 border border-white/60 dark:border-white/10 text-sm text-slate-600 dark:text-slate-200",children:m?.className||m?.grade||s.grade||"Filtered to your classes"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"120",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Intervention Type"}),e.jsxs("select",{className:d,value:s.type,onChange:a=>l("type",a.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),F.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Tier Level"}),e.jsx("select",{className:d,value:s.tier,onChange:a=>l("tier",a.target.value),children:$.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"150",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Strategy Library"}),e.jsxs("select",{className:d,value:s.strategyId||"",onChange:b,disabled:t,children:[e.jsx("option",{value:"",children:t?"Loading strategies...":"Select strategy"}),o.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suggestions filtered by intervention type."})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Duration"}),e.jsxs("select",{className:d,value:s.duration,onChange:a=>l("duration",a.target.value),children:[e.jsx("option",{value:"",children:"Select duration"}),S.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,"data-aos":"fade-up","data-aos-delay":"170",children:[e.jsx("label",{className:i,children:"Goal"}),e.jsx("textarea",{className:j,placeholder:"Describe the intervention goal...",value:s.goal,onChange:a=>l("goal",a.target.value)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"190",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Start Date"}),e.jsx("input",{type:"date",className:d,value:s.startDate,onChange:a=>l("startDate",a.target.value)})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Monitoring Frequency"}),e.jsxs("select",{className:d,value:s.monitorFrequency,onChange:a=>l("monitorFrequency",a.target.value),children:[e.jsx("option",{value:"",children:"Select frequency"}),T.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"210",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Monitoring Method"}),e.jsxs("select",{className:d,value:s.monitorMethod,onChange:a=>l("monitorMethod",a.target.value),children:[e.jsx("option",{value:"",children:"Select method"}),A.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Notes"}),e.jsx("textarea",{className:j,placeholder:"Add context or reminders...",value:s.notes,onChange:a=>l("notes",a.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4","data-aos":"fade-up","data-aos-delay":"230",children:[e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Baseline Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:N,placeholder:"e.g. 45",value:s.baselineValue,onChange:a=>l("baselineValue",a.target.value)}),e.jsx("select",{className:`${d} w-28`,value:s.baselineUnit,onChange:a=>l("baselineUnit",a.target.value),children:w.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:`${r} flex flex-col gap-2`,children:[e.jsx("label",{className:i,children:"Target Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:N,placeholder:"e.g. 70",value:s.targetValue,onChange:a=>l("targetValue",a.target.value)}),e.jsx("select",{className:`${d} w-28`,value:s.targetUnit,onChange:a=>l("targetUnit",a.target.value),children:w.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]})]})});k.displayName="InterventionFormFields";const L=u.memo(({formState:s,onChange:l,onSubmit:g,baseFieldClass:m,textareaClass:v,students:o=[],submitting:t=!1})=>{const[n,c]=u.useState([]),[x,b]=u.useState(!1);u.useEffect(()=>{let a=!0;b(!0);const p=s.type?{type:s.type}:{};return I(p).then(h=>{a&&c(h?.strategies||[])}).catch(()=>{a&&c([])}).finally(()=>{a&&b(!1)}),()=>{a=!1}},[s.type]);const d=u.useMemo(()=>C(n,s.type),[s.type,n]),j=u.useMemo(()=>o.find(a=>a.id===s.studentId),[o,s.studentId]),N=a=>{const p=a.target.value,h=o.find(f=>f.id===p);l("studentId",p),l("studentName",h?.name||""),l("grade",h?.grade||"")},r=a=>{const p=a.target.value,h=n.find(f=>f._id===p);l("strategyId",p),h?.name&&l("goal",h.overview||s.goal)},i=D(s);return e.jsxs("section",{className:"mtss-theme relative overflow-hidden rounded-[36px] border border-white/50 dark:border-white/10 bg-white/75 dark:bg-slate-900/50 shadow-[0_30px_90px_rgba(15,23,42,0.18)] p-6 sm:p-8 space-y-6 backdrop-blur-2xl","data-aos":"fade-up","data-aos-duration":"700",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-20 -left-10 h-56 w-56 bg-gradient-to-br from-[#f472b6]/25 via-[#60a5fa]/20 to-transparent blur-[120px]"}),e.jsx("div",{className:"absolute -bottom-16 right-0 h-64 w-64 bg-gradient-to-br from-[#22d3ee]/20 via-[#a855f7]/15 to-transparent blur-[140px]"}),e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.6),_transparent_60%)] dark:opacity-20"})]}),e.jsxs("div",{className:"relative space-y-6",children:[e.jsxs("header",{className:"space-y-2","data-aos":"fade-up","data-aos-delay":"60",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/15 px-3 py-1 text-xs font-semibold uppercase tracking-[0.4em] text-slate-600 dark:text-slate-200",children:[e.jsx(y,{className:"w-4 h-4 text-primary"}),"Plan Builder"]}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-black leading-tight bg-gradient-to-r from-[#0f172a] via-[#334155] to-[#2563eb] dark:from-white dark:via-[#c7d2fe] dark:to-[#f472b6] text-transparent bg-clip-text",children:"Set up a playful boost"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-200 max-w-2xl",children:"Drop a mini plan for the kids who need a little more spark this week."})]}),e.jsxs("form",{className:"space-y-5",onSubmit:g,children:[e.jsx(k,{formState:s,onChange:l,students:o,selectedStudent:j,strategies:n,filteredStrategies:d,loadingStrategies:x,baseFieldClass:m,textareaClass:v,onStudentChange:N,onStrategyChange:r}),e.jsx("div",{className:"flex flex-wrap gap-3 pt-3","data-aos":"fade-up","data-aos-delay":"260",children:e.jsxs("button",{type:"submit",disabled:!i||t,className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-[#22d3ee] via-[#3b82f6] to-[#a855f7] text-white font-semibold shadow-[0_18px_45px_rgba(59,130,246,0.3)] transition hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[t?e.jsx(_,{className:"w-4 h-4 animate-spin"}):e.jsx(y,{className:"w-4 h-4"}),t?"Saving...":"Save Intervention Plan"]})})]})]})]})});L.displayName="InterventionFormPanel";export{L as default};
