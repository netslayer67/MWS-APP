import{c as A,v as q,r as c,j as e,ai as B,m as p,$ as E,C as J,w as _,x as K,a4 as Q,ag as R,aj as W,ae as X,B as Y,b as Z,ak as T,t as ee,A as te}from"./index-BH3Cl4N6.js";import{C as D,g as re,m as ae,f as se}from"./teacherMappingUtils-DkAYGxtB.js";import{S as oe}from"./shield-check-43hxzO-I.js";import{B as G}from"./book-open-xee3mx53.js";import{P as le}from"./StatusPills-DgAQJrHh.js";import{U as ie}from"./users-B5Gpu3uh.js";import{R as ne}from"./CategoricalChart-4j58OISQ.js";import{A as de,a as ce}from"./AreaChart-MWUTTQlh.js";import{C as me,X as xe,Y as he,T as ge}from"./CartesianChart-BE-oR_RL.js";import{L as ue}from"./Line-BcBUlr9K.js";import{Z as pe}from"./zap-BECm_PpK.js";import{C as be}from"./clock-jQBtI6_K.js";import{T as U}from"./target-CwjU5JHL.js";import{F as fe}from"./file-text-BKviM-rf.js";import{C as we}from"./circle-check-BF9AV8cm.js";import{C as je}from"./circle-alert-kIDIsiMc.js";import{e as P,p as ye}from"./interventionSelection-Vcld4Os_.js";import"./teacherGradeUtils-COfj_G-K.js";import"./ActivePoints-B7565u1X.js";import"./ErrorBarContext-BOGi0YaH.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ne=A("calculator",ke);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Se=A("clipboard-list",ve),L={SEL:{icon:q,emoji:"ðŸ’–",gradient:"from-purple-500 via-fuchsia-500 to-pink-500",lightBg:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-950/40 dark:to-fuchsia-950/30",cardBg:"bg-gradient-to-br from-purple-100/80 to-fuchsia-100/60 dark:from-purple-900/40 dark:to-fuchsia-900/30",border:"border-purple-200/60 dark:border-purple-700/40",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400/30",glow:"shadow-purple-500/20",chartColor:"#a855f7"},ENGLISH:{icon:G,emoji:"ðŸ“š",gradient:"from-blue-500 via-cyan-500 to-teal-500",lightBg:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/40 dark:to-cyan-950/30",cardBg:"bg-gradient-to-br from-blue-100/80 to-cyan-100/60 dark:from-blue-900/40 dark:to-cyan-900/30",border:"border-blue-200/60 dark:border-blue-700/40",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400/30",glow:"shadow-blue-500/20",chartColor:"#3b82f6"},MATH:{icon:Ne,emoji:"ðŸ”¢",gradient:"from-emerald-500 via-green-500 to-teal-500",lightBg:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/40 dark:to-green-950/30",cardBg:"bg-gradient-to-br from-emerald-100/80 to-green-100/60 dark:from-emerald-900/40 dark:to-green-900/30",border:"border-emerald-200/60 dark:border-emerald-700/40",text:"text-emerald-700 dark:text-emerald-300",ring:"ring-emerald-400/30",glow:"shadow-emerald-500/20",chartColor:"#10b981"},BEHAVIOR:{icon:oe,emoji:"â­",gradient:"from-amber-500 via-orange-500 to-yellow-500",lightBg:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/40 dark:to-orange-950/30",cardBg:"bg-gradient-to-br from-amber-100/80 to-orange-100/60 dark:from-amber-900/40 dark:to-orange-900/30",border:"border-amber-200/60 dark:border-amber-700/40",text:"text-amber-700 dark:text-amber-300",ring:"ring-amber-400/30",glow:"shadow-amber-500/20",chartColor:"#f59e0b"},ATTENDANCE:{icon:D,emoji:"ðŸ“",gradient:"from-indigo-500 via-violet-500 to-purple-500",lightBg:"bg-gradient-to-br from-indigo-50 to-violet-50 dark:from-indigo-950/40 dark:to-violet-950/30",cardBg:"bg-gradient-to-br from-indigo-100/80 to-violet-100/60 dark:from-indigo-900/40 dark:to-violet-900/30",border:"border-indigo-200/60 dark:border-indigo-700/40",text:"text-indigo-700 dark:text-indigo-300",ring:"ring-indigo-400/30",glow:"shadow-indigo-500/20",chartColor:"#6366f1"}},I={tier1:{label:"Tier 1",bg:"bg-emerald-500",gradient:"from-emerald-500 to-teal-500",text:"text-emerald-700 dark:text-emerald-300",lightBg:"bg-emerald-100 dark:bg-emerald-900/30"},tier2:{label:"Tier 2",bg:"bg-amber-500",gradient:"from-amber-500 to-orange-500",text:"text-amber-700 dark:text-amber-300",lightBg:"bg-amber-100 dark:bg-amber-900/30"},tier3:{label:"Tier 3",bg:"bg-rose-500",gradient:"from-rose-500 to-pink-500",text:"text-rose-700 dark:text-rose-300",lightBg:"bg-rose-100 dark:bg-rose-900/30"}},f={card:"backdrop-blur-xl bg-white/60 dark:bg-slate-900/50 border border-white/40 dark:border-white/10",inner:"backdrop-blur-md bg-white/40 dark:bg-white/5 border border-white/30 dark:border-white/5",hover:"hover:bg-white/70 dark:hover:bg-slate-900/60 hover:shadow-xl transition-all duration-300"},Ce=t=>{switch(t){case"tier3":return"bg-gradient-to-r from-rose-500 to-pink-500 text-white shadow-rose-500/30";case"tier2":return"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-amber-500/30";default:return"bg-gradient-to-r from-slate-400 to-slate-500 text-white shadow-slate-500/20"}},$e=t=>{switch(t){case"active":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300 ring-emerald-500/20";case"paused":return"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 ring-amber-500/20";default:return"bg-slate-100 text-slate-600 dark:bg-slate-800/60 dark:text-slate-400 ring-slate-500/20"}},De=t=>{switch(t){case"active":return"Active";case"paused":return"Paused";case"closed":return"Closed";default:return"Monitoring"}},F=c.memo(({student:t,highlight:r,currentTier:s,currentInterventionLabel:o})=>{const a=I[s]||I.tier1,i=t.className&&t.className!==t.grade?t.className:null;return e.jsxs("div",{className:"relative overflow-hidden text-white",children:[e.jsx("div",{className:"absolute inset-0 mtss-hero-gradient"}),e.jsx("div",{className:"absolute inset-0 mtss-hero-aurora opacity-80"}),e.jsx("div",{className:"absolute inset-0 mtss-hero-shine hidden sm:block"}),e.jsx("div",{className:"relative px-4 sm:px-8 py-6 sm:py-8",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:"mtss-chip bg-white/15 text-white/90",children:"Student Spotlight"}),e.jsx("h1",{className:"text-2xl sm:text-4xl font-black tracking-tight",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm font-semibold text-white/90",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/15",children:t.grade||"-"}),i&&e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10",children:i}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10",children:r?.label||"Universal Supports"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-xs sm:text-sm font-bold bg-gradient-to-r ${a.gradient} shadow-lg`,children:a.label}),e.jsx("span",{className:"px-4 py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/15 backdrop-blur-sm",children:o||r?.label||"Universal"}),e.jsx(le,{status:t.progress})]})]})})]})});F.displayName="StudentProfileHeader";const O=c.memo(({student:t,profile:r,mentorLabel:s})=>{const o=[{label:"Grade",value:t.grade||"-",icon:G,gradient:"from-blue-500 to-cyan-500"},{label:"Class",value:t.className||"-",icon:ie,gradient:"from-emerald-500 to-teal-500"},{label:"Started",value:r?.started||"-",icon:D,gradient:"from-rose-500 to-pink-500"},{label:"Mentor",value:s,icon:B,gradient:"from-purple-500 to-violet-500"}];return e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3",children:o.map((a,i)=>{const n=a.icon;return e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15+i*.05},className:`${f.inner} group rounded-2xl p-3 sm:p-4 ${f.hover} hover:-translate-y-0.5 active:scale-[0.99]`,children:[e.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br ${a.gradient} flex items-center justify-center mb-2 shadow-lg`,children:e.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),e.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:a.label}),e.jsx("p",{className:"text-sm sm:text-base font-bold text-foreground dark:text-white truncate",children:a.value})]},a.label)})})});O.displayName="QuickFactsGrid";const k=t=>{if(t==null)return!1;const r=`${t}`.trim();if(!r)return!1;const s=r.toLowerCase();return["not set","tbd","-"].includes(s)?!1:/[a-z0-9]/i.test(r)},M={SEL:{bar:"from-rose-500 via-pink-500 to-fuchsia-500",icon:"from-rose-500 to-pink-500",bg:"from-rose-50 via-white to-pink-50",text:"text-rose-700 dark:text-rose-200",shadow:"shadow-[0_18px_50px_rgba(244,63,94,0.18)]"},ENGLISH:{bar:"from-sky-500 via-blue-500 to-indigo-500",icon:"from-sky-500 to-blue-500",bg:"from-sky-50 via-white to-blue-50",text:"text-sky-700 dark:text-sky-200",shadow:"shadow-[0_18px_50px_rgba(14,165,233,0.18)]"},MATH:{bar:"from-emerald-500 via-teal-500 to-green-500",icon:"from-emerald-500 to-teal-500",bg:"from-emerald-50 via-white to-teal-50",text:"text-emerald-700 dark:text-emerald-200",shadow:"shadow-[0_18px_50px_rgba(16,185,129,0.18)]"},BEHAVIOR:{bar:"from-amber-500 via-orange-500 to-yellow-500",icon:"from-amber-500 to-orange-500",bg:"from-amber-50 via-white to-orange-50",text:"text-amber-700 dark:text-amber-200",shadow:"shadow-[0_18px_50px_rgba(245,158,11,0.18)]"},ATTENDANCE:{bar:"from-indigo-500 via-violet-500 to-purple-500",icon:"from-indigo-500 to-violet-500",bg:"from-indigo-50 via-white to-violet-50",text:"text-indigo-700 dark:text-indigo-200",shadow:"shadow-[0_18px_50px_rgba(99,102,241,0.18)]"},DEFAULT:{bar:"from-cyan-500 via-sky-500 to-blue-500",icon:"from-cyan-500 to-blue-500",bg:"from-cyan-50 via-white to-sky-50",text:"text-sky-700 dark:text-sky-200",shadow:"shadow-[0_18px_50px_rgba(14,165,233,0.18)]"}},Le=({intervention:t,config:r,CurrentIcon:s,strategyLabel:o,durationLabel:a,frequencyLabel:i,mentorLabel:n,goalLabel:u,monitoringMethodLabel:h,startDateLabel:l,notesLabel:d})=>{const m=k(o),N=k(a),x=k(i),g=k(n),w=k(u),j=k(h),y=k(l),b=k(d),C=m||N||x||g,$=t?.type?.toUpperCase?.()||"DEFAULT",v=M[$]||M.DEFAULT;return e.jsxs("div",{className:"flex-1 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(E,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Growth Journey"}),e.jsxs("h3",{className:"text-xl font-bold text-foreground dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-2xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(s,{className:"w-5 h-5 text-white"})}),t.label]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-3xl sm:text-5xl font-black bg-gradient-to-r ${r.gradient} text-transparent bg-clip-text`,children:[t.progress||0,"%"]})})]}),e.jsx("div",{className:`${r.lightBg} rounded-2xl p-4`,children:e.jsx("div",{className:"h-44 sm:h-60",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(de,{data:t.chart||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${t.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r.chartColor,stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:r.chartColor,stopOpacity:0})]})}),e.jsx(me,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),e.jsx(xe,{dataKey:"label",stroke:"var(--muted-foreground)",fontSize:10,tickLine:!1}),e.jsx(he,{stroke:"var(--muted-foreground)",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(ge,{contentStyle:{borderRadius:16,border:"none",backdropFilter:"blur(12px)",background:"rgba(255,255,255,0.95)",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"}}),e.jsx(ce,{type:"monotone",dataKey:"reading",stroke:r.chartColor,strokeWidth:3,fill:`url(#gradient-${t.id})`}),e.jsx(ue,{type:"monotone",dataKey:"goal",stroke:"#0ea5e9",strokeWidth:2,strokeDasharray:"6 4",dot:!1})]})})})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"grid w-full max-w-2xl grid-cols-1 gap-2 sm:grid-cols-3 sm:gap-3",children:[{label:"Baseline",value:t.baseline,color:"from-pink-500 to-rose-500",bg:"bg-pink-50 dark:bg-pink-900/20"},{label:"Current",value:t.current,color:"from-emerald-500 to-teal-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{label:"Target",value:t.target,color:"from-amber-500 to-orange-500",bg:"bg-amber-50 dark:bg-amber-900/20"}].map(S=>e.jsxs("div",{className:`${S.bg} rounded-xl sm:rounded-2xl p-3 sm:p-4 text-center`,children:[e.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground mb-1",children:S.label}),e.jsx("p",{className:`text-xl sm:text-2xl font-black bg-gradient-to-r ${S.color} text-transparent bg-clip-text`,children:S.value??"-"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.progressUnit||"pts"})]},S.label))})}),(C||w||j||y||b)&&e.jsxs("div",{className:"rounded-2xl border border-white/50 bg-white/70 dark:bg-slate-900/40 p-4 sm:p-5 space-y-5",children:[C&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[m&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-sky-500 to-blue-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-sky-500 to-blue-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(pe,{className:"w-4 h-4"})}),"Strategy"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white truncate",children:o})]}),N&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-amber-500 to-orange-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(be,{className:"w-4 h-4"})}),"Duration"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white truncate",children:a})]}),x&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(J,{className:"w-4 h-4"})}),"Frequency"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white truncate",children:i})]}),g&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-violet-500 to-fuchsia-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(B,{className:"w-4 h-4"})}),"Mentor"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white truncate",children:n})]})]}),w&&e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-4 shadow-sm",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r from-rose-500 to-pink-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-rose-500 to-pink-500 flex items-center justify-center text-white shadow-md",children:e.jsx(U,{className:"w-4 h-4"})}),"Goal"]}),e.jsx("p",{className:"mt-3 text-sm sm:text-base font-semibold text-foreground dark:text-white break-words leading-relaxed",children:u})]}),j&&e.jsxs("div",{className:`relative overflow-hidden rounded-2xl border border-white/70 bg-gradient-to-br ${v.bg} dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/40 p-5 sm:p-6 ${v.shadow}`,children:[e.jsx("div",{className:`absolute inset-x-0 top-0 h-2.5 bg-gradient-to-r ${v.bar}`}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:`flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider ${v.text}`,children:[e.jsx("span",{className:`w-11 h-11 rounded-2xl bg-gradient-to-br ${v.icon} flex items-center justify-center text-white shadow-md`,children:e.jsx(Se,{className:"w-5 h-5"})}),"Monitoring Method"]}),e.jsx("span",{className:"text-[10px] sm:text-xs uppercase tracking-[0.35em] text-muted-foreground",children:"Focus"})]}),e.jsx("p",{className:"mt-4 text-base sm:text-lg font-semibold text-slate-900 dark:text-white break-words leading-relaxed",children:h})]}),(y||b)&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[y&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(D,{className:"w-4 h-4"})}),"Start Date"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white",children:l})]}),b&&e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/60 bg-white/85 dark:bg-slate-900/50 p-3 sm:p-4 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-amber-500 to-yellow-500 opacity-90"}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-500 flex items-center justify-center text-white shadow-md transition-transform duration-300 group-hover:scale-105",children:e.jsx(fe,{className:"w-4 h-4"})}),"Notes"]}),e.jsx("p",{className:"mt-2 text-sm sm:text-base font-semibold text-foreground dark:text-white break-words leading-relaxed",children:d})]})]})]})]})},Ie=({intervention:t,config:r,glassStyles:s})=>e.jsx("div",{className:"lg:w-80 xl:w-96",children:e.jsxs("div",{className:`${s.inner} rounded-2xl p-4 h-full`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${r.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(_,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Check-in History"}),e.jsx("h4",{className:"text-base font-bold text-foreground dark:text-white",children:"Recent Reflections"})]})]}),e.jsx("div",{className:"space-y-3 max-h-56 sm:max-h-80 overflow-y-auto pr-0 sm:pr-1 custom-scroll",children:(t.history||[]).length>0?t.history.map((o,a)=>e.jsxs(p.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1+a*.05},className:`${r.lightBg} rounded-xl p-3 ${r.border} border`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] uppercase tracking-wider text-muted-foreground mb-1",children:[e.jsx(D,{className:"w-3 h-3"}),o.date]}),e.jsx("p",{className:"text-sm text-foreground dark:text-white",children:o.notes}),o.score!=null&&e.jsxs("div",{className:`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${r.lightBg} ${r.text} text-xs font-medium`,children:[e.jsx(E,{className:"w-3 h-3"}),o.score," ",t.progressUnit||"pts"]}),o.celebration&&e.jsx("div",{className:"mt-2 text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-2 py-1 rounded-full inline-flex items-center gap-1",children:o.celebration})]},a)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("span",{className:"text-3xl block mb-2",children:"No check-ins yet"})})})]})}),H=c.memo(({intervention:t,strategyLabel:r,durationLabel:s,frequencyLabel:o,mentorLabel:a,goalLabel:i,monitoringMethodLabel:n,startDateLabel:u,notesLabel:h})=>{const l=L[t?.type]||L.SEL,d=l.icon||_;return t?e.jsx(p.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`${f.inner} rounded-2xl sm:rounded-3xl p-4 sm:p-6`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx(Le,{intervention:t,config:l,CurrentIcon:d,strategyLabel:r,durationLabel:s,frequencyLabel:o,mentorLabel:a,goalLabel:i,monitoringMethodLabel:n,startDateLabel:u,notesLabel:h}),e.jsx(Ie,{intervention:t,config:l,glassStyles:f})]})},t.id):null});H.displayName="GrowthJourneySection";const z=c.memo(({intervention:t,index:r,isSelected:s,onSelect:o})=>{const a=L[t.type]||L.SEL,i=I[t.tier]||I.tier1,n=t.tier==="tier1"||!t.hasRealData,u=t.tierLabel||i.label,h=De(t.status),l=Ce(t.tier),d=$e(t.status);return e.jsxs("div",{"data-aos":"fade-up","data-aos-delay":r*80,"data-aos-duration":"500",className:"relative",children:[e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-xl text-[11px] font-bold uppercase tracking-wide shadow-lg ${l}`,children:u})}),s&&e.jsx("div",{className:"absolute -top-2 -left-2 z-20",children:e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 shadow-lg ring-2 ring-white dark:ring-slate-800",children:e.jsx(we,{className:"w-4 h-4 text-white"})})}),e.jsxs(p.button,{whileHover:t.hasRealData?{scale:1.02,y:-4}:{},whileTap:t.hasRealData?{scale:.98}:{},onClick:()=>t.hasRealData?o(t):null,disabled:!t.hasRealData,className:`group relative w-full text-left rounded-2xl overflow-hidden transition-all duration-300 backdrop-blur-xl
                    ${n?"bg-white/60 dark:bg-slate-800/30 border border-slate-200/60 dark:border-slate-700/40 shadow-md":`bg-white/80 dark:bg-slate-900/50 border-2 ${a.border} shadow-xl ${a.glow}`}
                    ${s?`ring-4 ${a.ring} shadow-2xl`:t.hasRealData?"hover:shadow-2xl cursor-pointer":"cursor-default opacity-80"}`,children:[e.jsx("div",{className:`px-4 py-3 bg-gradient-to-r ${a.gradient} ${n?"opacity-70":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/25 backdrop-blur-sm flex items-center justify-center shadow-inner",children:e.jsx("span",{className:"text-xl",children:a.emoji})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"text-base font-bold text-white truncate",children:t.label})})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[11px] font-semibold uppercase tracking-wide ring-1 ${d}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.status==="active"?"bg-emerald-500 animate-pulse":t.status==="paused"?"bg-amber-500":"bg-slate-400"}`}),h]}),t.hasRealData&&e.jsx(U,{className:`w-4 h-4 ${a.text}`})]}),e.jsxs("p",{className:"text-xs text-muted-foreground dark:text-slate-400 line-clamp-2 min-h-[2rem]",children:[e.jsx("span",{className:"font-medium text-foreground dark:text-slate-300",children:"Strategy:"})," ",t.strategyName||t.focusArea||"Core supports"]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Progress"}),e.jsxs("span",{className:`font-bold text-sm ${a.text}`,children:[t.progress||0,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden",children:e.jsx(p.div,{initial:{width:0},animate:{width:`${t.progress||0}%`},transition:{delay:.3+r*.1,duration:.8,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${a.gradient}`})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200/60 dark:border-slate-700/40",children:[e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(D,{className:"w-3.5 h-3.5"}),t.checkInsCount||0," check-ins"]}),t.hasRealData&&e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${a.text} group-hover:translate-x-1 transition-transform`,children:["Details",e.jsx(K,{className:"w-4 h-4"})]})]})]})]})]})});z.displayName="InterventionCard";const Te=({sortedInterventions:t,selectedIntervention:r,onSelect:s,glassStyles:o})=>e.jsxs(p.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`${o.inner} rounded-2xl sm:rounded-3xl p-4 sm:p-6`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center shadow-lg",children:e.jsx(Q,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Support Map"}),e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground dark:text-white",children:["All Interventions",e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Click Tier 2/3 to view progress)"})]})]})]}),t.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:t.map((a,i)=>e.jsx(z,{intervention:a,index:i,isSelected:r?.id===a.id,onSelect:s},a.id||i))}):e.jsxs("div",{className:"text-center py-10 text-muted-foreground",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-3 text-amber-400"}),e.jsx("p",{className:"font-medium",children:"No active interventions"}),e.jsx("p",{className:"text-sm opacity-70",children:"Universal supports are in place"})]})]}),Me=({glassStyles:t})=>e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:`${t.inner} rounded-2xl p-8 text-center`,children:[e.jsx(R,{className:"w-16 h-16 mx-auto mb-4 text-amber-400"}),e.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-white mb-2",children:"Universal Supports Active"}),e.jsx("p",{className:"text-muted-foreground",children:"This student is receiving Tier 1 universal classroom supports. No targeted interventions are currently assigned."})]}),Ae=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/30 dark:from-slate-950 dark:via-purple-950/20 dark:to-pink-950/20",children:e.jsxs(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading student profile..."})]})}),Be=({error:t,onBack:r})=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-rose-50/30 dark:from-slate-950 dark:to-rose-950/20 p-4",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${f.card} rounded-3xl p-8 text-center space-y-4 max-w-md shadow-2xl`,children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center",children:e.jsx(je,{className:"w-10 h-10 text-rose-500"})}),e.jsx("p",{className:"text-lg font-semibold text-rose-600 dark:text-rose-400",children:t||"Student not found"}),e.jsx("button",{className:"px-6 py-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all",onClick:r,children:"Back to Students"})]})}),Ee=t=>{const[r,s]=c.useState(null),[o,a]=c.useState(!0),[i,n]=c.useState(null),[u,h]=c.useState(null),l=c.useMemo(()=>re(),[]);return c.useEffect(()=>{let d=!0;const m=new AbortController;return(async()=>{a(!0),n(null);try{const x=await W(t,{signal:m.signal});if(!d)return;s(x?.student||null);const g=x?.student?.interventionDetails||[];g.length>0&&h(g[0])}catch(x){if(!d||x?.name==="CanceledError"||x?.name==="AbortError")return;try{const{assignments:g=[]}=await X({},{signal:m.signal});if(!d)return;const{students:w}=ae(g,l?.username||l?.name||"MTSS Mentor"),j=w.find(y=>y.slug===t);if(j){s(j);return}}catch{if(!d)return}n(x.response?.data?.message||x.message||"Unable to load student profile")}finally{d&&a(!1)}})(),()=>{d=!1,m.abort()}},[t,l]),{student:r,loading:o,error:i,selectedIntervention:u,setSelectedIntervention:h}},V=t=>t!=null&&t!=="",_e=t=>{if(!t)return null;if(V(t.goal))return t.goal;const r=t.goals;if(typeof r=="string")return r;if(!Array.isArray(r)||r.length===0)return null;const s=r.find(o=>o);return s?typeof s=="string"?s:s.description||s.goal||s.title||s.name||null:null},Re=t=>{const{interventionDetails:r=[]}=t;return P(t.interventions).map(o=>{const a=r.find(i=>i.type?.toUpperCase()===o.type?.toUpperCase());return a?{...a,hasRealData:!0,type:o.type}:{id:`default-${o.type}`,type:o.type,label:o.label,tier:o.tierCode||"tier1",tierLabel:o.tier||"Tier 1",status:o.status||"monitoring",strategyName:o.strategies?.[0]||null,baseline:null,current:null,target:null,progressUnit:"pts",progress:0,checkInsCount:0,chart:[],history:[],hasRealData:!1}})},Ge=(t,r)=>{if(!t)return{profile:{},highlight:null,sortedInterventions:[],currentIntervention:null,strategyLabel:null,durationLabel:null,frequencyLabel:null,mentorLabel:null,goalLabel:null,monitoringMethodLabel:null,startDateLabel:null,notesLabel:null};const{profile:s={}}=t,o=Re(t),a=P(t.interventions),i=ye(a),n=[...o].sort((b,C)=>{const $={tier3:0,tier2:1,tier1:2},v=b.tier?.toLowerCase()||"tier1",S=C.tier?.toLowerCase()||"tier1";return($[v]??2)-($[S]??2)}),h=n.filter(b=>b.tier==="tier2"||b.tier==="tier3")[0]||n[0]||null,l=r||h,d=l?.strategyName||l?.focusArea||null,m=l?.duration||null,N=l?.monitoringFrequency||l?.monitoringMethod||null,x=l?.mentor||s?.mentor||t.mentor||"TBD",g=_e(l)||null,w=l?.monitoringMethod||l?.monitorMethod||null,j=l?.startDate?se(l.startDate,{month:"short",day:"numeric",year:"numeric"}):null,y=V(l?.notes)?l.notes:null;return{profile:s,highlight:i,sortedInterventions:n,currentIntervention:l,strategyLabel:d,durationLabel:m,frequencyLabel:N,mentorLabel:x,goalLabel:g,monitoringMethodLabel:w,startDateLabel:j,notesLabel:y}},Ue=c.memo(()=>{const{slug:t}=Y(),r=Z(),{student:s,loading:o,error:a,selectedIntervention:i,setSelectedIntervention:n}=Ee(t);c.useEffect(()=>{T.init({duration:600,easing:"ease-out-cubic",once:!0,offset:50,delay:0})},[]),c.useEffect(()=>{s&&setTimeout(()=>T.refresh(),100)},[s]);const u=c.useCallback($=>{n($)},[n]),{profile:h,highlight:l,sortedInterventions:d,currentIntervention:m,strategyLabel:N,durationLabel:x,frequencyLabel:g,mentorLabel:w,goalLabel:j,monitoringMethodLabel:y,startDateLabel:b,notesLabel:C}=c.useMemo(()=>Ge(s,i),[s,i]);return o?e.jsx(Ae,{}):a||!s?e.jsx(Be,{error:a,onBack:()=>r("/mtss?tab=students")}):e.jsxs("div",{className:"relative min-h-screen mtss-theme bg-gradient-to-br from-slate-50 via-white to-rose-50/40 dark:from-slate-950 dark:via-slate-900 dark:to-rose-950/20",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 hidden sm:block mtss-animated-bg opacity-70"}),e.jsx("div",{className:"absolute -top-32 -left-32 hidden sm:block w-96 h-96 bg-gradient-to-br from-purple-400/20 to-pink-400/20 dark:from-purple-600/10 dark:to-pink-600/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/4 -right-32 hidden sm:block w-80 h-80 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 dark:from-blue-600/10 dark:to-cyan-600/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-32 left-1/4 hidden sm:block w-72 h-72 bg-gradient-to-br from-amber-400/15 to-orange-400/15 dark:from-amber-600/10 dark:to-orange-600/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 container max-w-7xl mx-auto px-4 sm:px-6 py-3 sm:py-8 space-y-3 sm:space-y-6",children:[e.jsxs(p.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>window.history.length>2?r(-1):r("/mtss/teacher?tab=students"),className:`${f.card} ${f.hover} inline-flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2.5 rounded-full text-xs sm:text-sm font-semibold shadow-lg`,children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Students"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${f.card} rounded-3xl overflow-hidden shadow-2xl`,children:[e.jsx(F,{student:s,highlight:l,currentTier:m?.tier,currentInterventionLabel:m?.label}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsx(O,{student:s,profile:h,mentorLabel:w}),e.jsx(Te,{sortedInterventions:d,selectedIntervention:i,onSelect:u,glassStyles:f}),e.jsx(te,{mode:"wait",children:m&&e.jsx(H,{intervention:m,strategyLabel:N,durationLabel:x,frequencyLabel:g,mentorLabel:w,goalLabel:j,monitoringMethodLabel:y,startDateLabel:b,notesLabel:C})}),!m&&d.length===0&&e.jsx(Me,{glassStyles:f})]})]})]})]})});Ue.displayName="StudentProfilePage";export{Ue as default};
