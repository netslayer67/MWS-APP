import{r as l,j as e}from"./index-C84qGWMf.js";import{U as p}from"./user-rZq1i5tG.js";import{T as x}from"./trending-up-Da0La0b8.js";import{a5 as h,a7 as f,a8 as j,a9 as u,a6 as g}from"./CartesianChart-BYrT3L0o.js";import{A as y,a as c}from"./AreaChart-iNYNEhm6.js";import"./ActivePoints-BBslG9yA.js";const N=l.memo(({userData:i=[],selectedUser:n=null,period:b="week"})=>{const o=l.useMemo(()=>{if(!i||i.length===0)return[];const a={};return i.forEach(s=>{const t=new Date(s.date).toLocaleDateString();a[t]||(a[t]={date:t,presence:[],capacity:[],count:0}),a[t].presence.push(s.presenceLevel),a[t].capacity.push(s.capacityLevel),a[t].count++}),Object.values(a).map(s=>({date:s.date,presence:s.presence.reduce((t,r)=>t+r,0)/s.presence.length,capacity:s.capacity.reduce((t,r)=>t+r,0)/s.capacity.length,submissions:s.count})).sort((s,t)=>new Date(s.date)-new Date(t.date))},[i]),d=({active:a,payload:s,label:t})=>a&&s&&s.length?e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium text-foreground mb-2",children:t}),s.map((r,m)=>e.jsxs("p",{className:"text-sm",style:{color:r.color},children:[r.name,": ",r.value.toFixed(1),r.dataKey==="submissions"?"":"/10"]},m))]}):null;return o.length===0?e.jsxs("div",{className:"glass glass-card p-6 text-center",children:[e.jsx(p,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No trend data available"})]}):e.jsxs("div",{className:"glass glass-card transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(x,{className:"w-4 h-4 text-primary"}),e.jsx("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:n?`${n.name}'s Trends`:"Organization Trends"})]}),e.jsx("div",{className:"h-64 md:h-80",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(y,{data:o,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"presenceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"capacityGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})]}),e.jsx(f,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(j,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickFormatter:a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(u,{domain:[0,10],className:"text-xs",tick:{fill:"currentColor"}}),e.jsx(g,{content:e.jsx(d,{})}),e.jsx(c,{type:"monotone",dataKey:"presence",stroke:"#10b981",fillOpacity:1,fill:"url(#presenceGradient)",strokeWidth:2,name:"Presence"}),e.jsx(c,{type:"monotone",dataKey:"capacity",stroke:"#3b82f6",fillOpacity:1,fill:"url(#capacityGradient)",strokeWidth:2,name:"Capacity"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Presence Level"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Capacity Level"})]})]})]})]})});N.displayName="UserTrendChart";export{N as default};
