import{c as ve,r as o,aE as Y,a as H,aP as ye,j as e,U as J,X as je,Z as be,$ as M,V as Ne}from"./index-C3AQb87E.js";import{T as B}from"./EmotionalCheckinDashboard-LGYIasuR.js";import{c as R,l as Q,bh as Z,bi as ee,bj as we,bk as Pe,bu as Ae,ar as V,w as te,aQ as se,y as Ie,b8 as Ee,C as Le,b9 as Se,G as De,u as ae,aK as Ce,au as ke,A as Te,U as _,bv as re,L as ne,j as le,bw as G,am as $,D as Oe,J as Me,F as L,N as We,be as Re,X as _e,x as Fe,a as Ke,R as Ue}from"./CategoricalChart-DVFj_TvM.js";import{u as ze,G as Be,C as Ve,a as Ge,X as $e,Y as Xe,T as qe}from"./CartesianChart-u_nGGN6K.js";import{A as Ye,D as He}from"./ActivePoints-j-eUsGmR.js";import{S as Je}from"./ErrorBarContext-CBUHLAcO.js";import{E as Qe}from"./eye-ClKgmwa2.js";import{C as Ze}from"./clock-DV011R9g.js";import"./socketService-DK54WtJ1.js";import"./funnel-BIESNrLJ.js";import"./users-DFpcxdsS.js";import"./building-Bkw7WxPB.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],tt=ve("external-link",et);var ie=(t,s,r,a)=>Z(t,"xAxis",s,a),oe=(t,s,r,a)=>ee(t,"xAxis",s,a),de=(t,s,r,a)=>Z(t,"yAxis",r,a),ce=(t,s,r,a)=>ee(t,"yAxis",r,a),st=R([Q,ie,de,oe,ce],(t,s,r,a,n)=>Ae(t,"xAxis")?V(s,a,!1):V(r,n,!1)),at=(t,s,r,a,n)=>n;function rt(t){return t.type==="line"}var nt=R([Pe,at],(t,s)=>t.filter(rt).find(r=>r.id===s)),lt=R([Q,ie,de,oe,ce,nt,st,we],(t,s,r,a,n,d,m,u)=>{var{chartData:l,dataStartIndex:x,dataEndIndex:h}=u;if(!(d==null||s==null||r==null||a==null||n==null||a.length===0||n.length===0||m==null)){var{dataKey:p,data:g}=d,i;if(g!=null&&g.length>0?i=g:i=l?.slice(x,h+1),i!=null)return Lt({layout:t,xAxis:s,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataKey:p,bandSize:m,displayedData:i})}}),it=["id"],ot=["type","layout","connectNulls","needClip"],dt=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function X(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function y(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?X(Object(r),!0).forEach(function(a){ct(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ct(t,s,r){return(s=mt(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function mt(t){var s=ut(t,"string");return typeof s=="symbol"?s:s+""}function ut(t,s){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function F(t,s){if(t==null)return{};var r,a,n=xt(t,s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)r=d[a],s.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xt(t,s){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(s.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function I(){return I=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},I.apply(null,arguments)}var pt=t=>{var{dataKey:s,name:r,stroke:a,legendType:n,hide:d}=t;return[{inactive:d,dataKey:s,type:n,color:a,value:ae(r,s),payload:t}]};function ht(t){var{dataKey:s,data:r,stroke:a,strokeWidth:n,fill:d,name:m,hide:u,unit:l}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:d,dataKey:s,nameKey:void 0,name:ae(m,s),hide:u,type:t.tooltipType,color:t.stroke,unit:l}}}var me=(t,s)=>"".concat(s,"px ").concat(t-s,"px");function ft(t,s){for(var r=t.length%2!==0?[...t,0]:t,a=[],n=0;n<s;++n)a=[...a,...r];return a}var gt=(t,s,r)=>{var a=r.reduce((p,g)=>p+g);if(!a)return me(s,t);for(var n=Math.floor(t/a),d=t%a,m=s-t,u=[],l=0,x=0;l<r.length;x+=r[l],++l)if(x+r[l]>d){u=[...r.slice(0,l),d-x];break}var h=u.length%2===0?[0,m]:[m];return[...ft(r,n),...u,...h].map(p=>"".concat(p,"px")).join(", ")};function vt(t,s){var r;if(o.isValidElement(t))r=o.cloneElement(t,s);else if(typeof t=="function")r=t(s);else{var a=Y("recharts-line-dot",typeof t!="boolean"?t.className:"");r=o.createElement(He,I({},s,{className:a}))}return r}function yt(t,s){return t==null?!1:s?!0:t.length===1}function jt(t){var{clipPathId:s,points:r,props:a}=t,{dot:n,dataKey:d,needClip:m}=a;if(!yt(r,n))return null;var{id:u}=a,l=F(a,it),x=re(n),h=Fe(l),p=_(n,!0),g=r.map((c,f)=>{var v=y(y(y({key:"dot-".concat(f),r:3},h),p),{},{index:f,cx:c.x,cy:c.y,dataKey:d,value:c.value,payload:c.payload,points:r});return vt(n,v)}),i={clipPath:m?"url(#clipPath-".concat(x?"":"dots-").concat(s,")"):void 0};return o.createElement(ne,I({className:"recharts-line-dots",key:"dots"},i),g)}function bt(t){var{showLabels:s,children:r,points:a}=t,n=o.useMemo(()=>a?.map(d=>{var m={x:d.x,y:d.y,width:0,height:0};return y(y({},m),{},{value:d.value,payload:d.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return o.createElement(Re,{value:s?n:null},r)}function q(t){var{clipPathId:s,pathRef:r,points:a,strokeDasharray:n,props:d}=t,{type:m,layout:u,connectNulls:l,needClip:x}=d,h=F(d,ot),p=y(y({},_(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:x?"url(#clipPath-".concat(s,")"):void 0,points:a,type:m,layout:u,connectNulls:l,strokeDasharray:n??d.strokeDasharray});return o.createElement(o.Fragment,null,a?.length>1&&o.createElement(_e,I({},p,{pathRef:r})),o.createElement(jt,{points:a,clipPathId:s,props:d}))}function Nt(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function wt(t){var{clipPathId:s,props:r,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:d}=t,{points:m,strokeDasharray:u,isAnimationActive:l,animationBegin:x,animationDuration:h,animationEasing:p,animateNewValues:g,width:i,height:c,onAnimationEnd:f,onAnimationStart:v}=r,j=n.current,w=Oe(r,"recharts-line-"),[N,S]=o.useState(!1),D=!N,k=o.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),T=o.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]),A=Nt(a.current),C=d.current;return o.createElement(bt,{points:m,showLabels:D},r.children,o.createElement(Me,{animationId:w,begin:x,duration:h,isActive:l,easing:p,onAnimationEnd:k,onAnimationStart:T,key:w},P=>{var pe=L(C,A+C,P),O=Math.min(pe,A),E;if(l)if(u){var he="".concat(u).split(/[,\s]+/gim).map(b=>parseFloat(b));E=gt(O,A,he)}else E=me(A,O);else E=u==null?void 0:String(u);if(j){var fe=j.length/m.length,K=P===1?m:m.map((b,ge)=>{var U=Math.floor(ge*fe);if(j[U]){var z=j[U];return y(y({},b),{},{x:L(z.x,b.x,P),y:L(z.y,b.y,P)})}return g?y(y({},b),{},{x:L(i*2,b.x,P),y:L(c/2,b.y,P)}):y(y({},b),{},{x:b.x,y:b.y})});return n.current=K,o.createElement(q,{props:r,points:K,clipPathId:s,pathRef:a,strokeDasharray:E})}return P>0&&A>0&&(n.current=m,d.current=O),o.createElement(q,{props:r,points:m,clipPathId:s,pathRef:a,strokeDasharray:E})}),o.createElement(We,{label:r.label}))}function Pt(t){var{clipPathId:s,props:r}=t,a=o.useRef(null),n=o.useRef(0),d=o.useRef(null);return o.createElement(wt,{props:r,clipPathId:s,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:d})}var At=(t,s)=>({x:t.x,y:t.y,value:t.value,errorVal:le(t.payload,s)});class It extends o.Component{render(){var s,{hide:r,dot:a,points:n,className:d,xAxisId:m,yAxisId:u,top:l,left:x,width:h,height:p,id:g,needClip:i}=this.props;if(r)return null;var c=Y("recharts-line",d),f=g,{r:v=3,strokeWidth:j=2}=(s=_(a,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},w=re(a),N=v*2+j;return o.createElement(o.Fragment,null,o.createElement(ne,{className:c},i&&o.createElement("defs",null,o.createElement(Be,{clipPathId:f,xAxisId:m,yAxisId:u}),!w&&o.createElement("clipPath",{id:"clipPath-dots-".concat(f)},o.createElement("rect",{x:x-N/2,y:l-N/2,width:h+N,height:p+N}))),o.createElement(Je,{xAxisId:m,yAxisId:u,data:n,dataPointFormatter:At,errorBarOffset:0},o.createElement(Pt,{props:this.props,clipPathId:f}))),o.createElement(Ye,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!De.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Et(t){var s=te(t,ue),{activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:d,animationEasing:m,connectNulls:u,dot:l,hide:x,isAnimationActive:h,label:p,legendType:g,xAxisId:i,yAxisId:c,id:f}=s,v=F(s,dt),{needClip:j}=ze(i,c),w=Ce(),N=ke(),S=se(),D=Te(P=>lt(P,i,c,S,f));if(N!=="horizontal"&&N!=="vertical"||D==null||w==null)return null;var{height:k,width:T,x:A,y:C}=w;return o.createElement(It,I({},v,{id:f,connectNulls:u,dot:l,activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:d,animationEasing:m,isAnimationActive:h,hide:x,label:p,legendType:g,xAxisId:i,yAxisId:c,points:D,layout:N,height:k,width:T,left:A,top:C,needClip:j}))}function Lt(t){var{layout:s,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:d,dataKey:m,bandSize:u,displayedData:l}=t;return l.map((x,h)=>{var p=le(x,m);if(s==="horizontal"){var g=G({axis:r,ticks:n,bandSize:u,entry:x,index:h}),i=$(p)?null:a.scale(p);return{x:g,y:i,value:p,payload:x}}var c=$(p)?null:r.scale(p),f=G({axis:a,ticks:d,bandSize:u,entry:x,index:h});return c==null||f==null?null:{x:c,y:f,value:p,payload:x}}).filter(Boolean)}function St(t){var s=te(t,ue),r=se();return o.createElement(Ie,{id:s.id,type:"line"},a=>o.createElement(o.Fragment,null,o.createElement(Ee,{legendPayload:pt(s)}),o.createElement(Le,{fn:ht,args:s}),o.createElement(Se,{type:"line",id:a,data:s.data,xAxisId:s.xAxisId,yAxisId:s.yAxisId,zAxisId:0,dataKey:s.dataKey,hide:s.hide,isPanorama:r}),o.createElement(Et,I({},s,{id:a}))))}var W=o.memo(St);W.displayName="Line";var Dt=["axis"],Ct=o.forwardRef((t,s)=>o.createElement(Ve,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Dt,tooltipPayloadSearcher:Ke,categoricalChartProps:t,ref:s}));const xe=o.memo(({user:t,isOpen:s,onClose:r})=>{const a=H(),[n,d]=o.useState(null),[m,u]=o.useState(!1),[l,x]=o.useState("month");o.useEffect(()=>{s&&t?.id&&h()},[s,t,l]);const h=async()=>{if(t?.id){u(!0);try{console.log("Fetching trends for user:",t.id,"period:",l);const i=await ye(t.id,l);console.log("User trends response:",i.data),d(i.data)}catch(i){console.error("Error fetching user trends:",i),d(null)}finally{u(!1)}}};if(!s||!t)return null;const p=({active:i,payload:c,label:f})=>{if(i&&c&&c.length){const v=c[0]?.payload;return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg max-w-xs",children:[e.jsx("p",{className:"font-medium text-foreground mb-2",children:new Date(f).toLocaleDateString()}),c.map((j,w)=>e.jsxs("p",{className:"text-sm",style:{color:j.color},children:[j.name,": ",j.value,"/10"]},w)),v&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50",children:[v.selectedMoods&&v.selectedMoods.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Moods: ",v.selectedMoods.join(", ")]}),v.weatherType&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weather: ",v.weatherType]}),v.needsSupport&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:"Support requested"})]})]})}return null},g=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"semester",label:"Semester"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t.role," â€¢ ",t.department]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>a(`/emotional-wellness/${t.id}`),className:"flex items-center gap-2 px-3 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm",title:"View full individual report",children:[e.jsx(tt,{className:"w-4 h-4"}),"Full Report"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Close modal",children:e.jsx(je,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(be,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Period:"}),e.jsx("div",{className:"flex gap-1",children:g.map(i=>e.jsx("button",{onClick:()=>x(i.id),className:`px-3 py-1 text-xs rounded-full transition-colors ${l===i.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:i.label},i.id))})]}),n&&n.summary&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Avg Presence"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[n.summary.averagePresence?.toFixed(1)||0,"/10"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Avg Capacity"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[n.summary.averageCapacity?.toFixed(1)||0,"/10"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(B,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Support Needed"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[n.summary.supportNeededCount||0," times"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Emotional Stability"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[n.summary.emotionalStability?(n.summary.emotionalStability*100).toFixed(0):0,"%"]})]})]}),n&&n.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"Mood Patterns"}),n.summary.moodPatterns&&Object.keys(n.summary.moodPatterns).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(n.summary.moodPatterns).sort(([,i],[,c])=>c-i).slice(0,5).map(([i,c])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:i}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${c/Math.max(...Object.values(n.summary.moodPatterns))*100}%`}})}),e.jsx("span",{className:"text-xs text-muted-foreground w-6 text-right",children:c})]})]},i))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No mood data available"})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"Weather Patterns"}),n.summary.weatherPatterns&&Object.keys(n.summary.weatherPatterns).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(n.summary.weatherPatterns).sort(([,i],[,c])=>c-i).slice(0,5).map(([i,c])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:i.replace("-"," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${c/Math.max(...Object.values(n.summary.weatherPatterns))*100}%`}})}),e.jsx("span",{className:"text-xs text-muted-foreground w-6 text-right",children:c})]})]},i))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No weather data available"})]})]}),n&&n.summary&&n.summary.insights&&n.summary.insights.length>0&&e.jsxs("div",{className:"glass glass-card p-4 mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"AI Insights"}),e.jsx("div",{className:"space-y-2",children:n.summary.insights.map((i,c)=>e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/20 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-foreground",children:i})]},c))})]}),e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Emotional Trends"}),m?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading trends..."})}):n?.trends&&n.trends.length>0?e.jsx("div",{className:"h-64",children:e.jsx(Ue,{width:"100%",height:"100%",children:e.jsxs(Ct,{data:n.trends,children:[e.jsx(Ge,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx($e,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickFormatter:i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(Xe,{domain:[0,10],className:"text-xs",tick:{fill:"currentColor"}}),e.jsx(qe,{content:e.jsx(p,{})}),e.jsx(W,{type:"monotone",dataKey:"presenceLevel",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10b981",strokeWidth:2},name:"Presence"}),e.jsx(W,{type:"monotone",dataKey:"capacityLevel",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2},name:"Capacity"})]})})}):e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"No trend data available"})})]}),n?.weeklyAverages&&n.weeklyAverages.length>0&&e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Weekly Emotional Trends"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:n.weeklyAverages.map((i,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/40 rounded-lg border border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-lg",children:i.dominantWeather==="sunny"?"â˜€ï¸":i.dominantWeather==="cloudy"?"â˜ï¸":i.dominantWeather==="rain"?"ðŸŒ§ï¸":i.dominantWeather==="storm"?"â›ˆï¸":i.dominantWeather==="tornado"?"ðŸŒªï¸":"â„ï¸"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:["Week of ",i.week]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.dominantMoods?.join(", ")," â€¢ ",i.checkinCount," check-ins"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["P: ",i.avgPresence,"/10"]}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["C: ",i.avgCapacity,"/10"]})]})]},c))})]}),n?.trends&&n.trends.length>0&&e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Recent Check-ins"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:n.trends.slice(-10).reverse().map((i,c)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-card/40 rounded-lg border border-border/40",children:[e.jsx("div",{className:"text-lg flex-shrink-0",children:i.weatherType==="sunny"?"â˜€ï¸":i.weatherType==="cloudy"?"â˜ï¸":i.weatherType==="rain"?"ðŸŒ§ï¸":i.weatherType==="storm"?"â›ˆï¸":i.weatherType==="tornado"?"ðŸŒªï¸":"â„ï¸"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:new Date(i.date).toLocaleDateString()}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["P: ",i.presenceLevel,"/10"]}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["C: ",i.capacityLevel,"/10"]})]})]}),i.selectedMoods&&i.selectedMoods.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Moods: ",i.selectedMoods.join(", ")]}),i.details&&e.jsxs("p",{className:"text-sm text-foreground italic",children:['"',i.details.length>100?i.details.substring(0,100)+"...":i.details,'"']}),i.needsSupport&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),"Support requested"]})})]})]},c))})]})]})]})})});xe.displayName="UserDetailModal";const kt=o.memo(({activities:t=[]})=>{const s=H(),[r,a]=o.useState(null),[n,d]=o.useState(!1);if(!t||t.length===0)return null;const m=l=>{a({id:l.userId,name:l.userName,role:l.role,department:l.department,weatherType:l.weatherType,presenceLevel:l.presenceLevel,capacityLevel:l.capacityLevel,selectedMoods:l.selectedMoods,submittedAt:l.submittedAt}),d(!0)},u=l=>({sunny:"â˜€ï¸",cloudy:"â˜ï¸",rain:"ðŸŒ§ï¸",storm:"â›ˆï¸",tornado:"ðŸŒªï¸",snow:"â„ï¸"})[l]||"ðŸŒ¤ï¸";return e.jsxs("div",{className:"glass glass-card transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-4 h-4 text-primary"}),e.jsxs("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:["Recent Activity (",t.length,")"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map((l,x)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-card/20 border border-border/20 hover:bg-card/40 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("button",{onClick:()=>s(`/emotional-wellness/${l.userId}`),className:"font-medium text-foreground text-sm hover:text-primary hover:underline transition-colors text-left cursor-pointer",children:l.userName}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize px-2 py-1 rounded-full bg-muted/50",children:l.role}),e.jsx("span",{className:"text-lg",children:u(l.weatherType)}),e.jsx("button",{onClick:()=>m(l),className:"ml-auto p-1 hover:bg-muted/50 rounded transition-colors",title:"View details",children:e.jsx(Qe,{className:"w-3 h-3 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[e.jsxs("span",{children:["Presence: ",l.presenceLevel,"/10"]}),e.jsxs("span",{children:["Capacity: ",l.capacityLevel,"/10"]}),l.department&&e.jsx("span",{className:"capitalize",children:l.department}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="handled"?"bg-green-100 text-green-800":l.status==="acknowledged"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:l.status==="handled"?"Handled":l.status==="acknowledged"?"Acknowledged":"Pending"})]}),l.status!=="pending"&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="handled"?"bg-green-100 text-green-800":l.status==="acknowledged"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:l.status==="handled"?"âœ… Handled":l.status==="acknowledged"?"ðŸ‘ï¸ Acknowledged":"â³ Pending"}),l.respondedAt&&e.jsx("span",{className:"text-muted-foreground",children:new Date(l.respondedAt).toLocaleDateString()})]}),l.responseDetails&&e.jsxs("div",{className:"mt-1 p-2 bg-muted/20 rounded text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Follow-up:"})," ",l.responseDetails]})]}),l.status!=="pending"&&l.responseDetails&&e.jsxs("div",{className:"mt-2 p-2 bg-muted/20 rounded text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Follow-up:"})," ",l.responseDetails]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(l.submittedAt).toLocaleString()})]}),l.selectedMoods&&l.selectedMoods.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[l.selectedMoods.slice(0,3).map((h,p)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary capitalize",children:h},p)),l.selectedMoods.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",l.selectedMoods.length-3," more"]})]})]})]},l.id||x))})]}),e.jsx(xe,{user:r,isOpen:n,onClose:()=>{d(!1),a(null)}})]})});kt.displayName="RecentActivitySection";export{kt as default};
