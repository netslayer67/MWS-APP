const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardOverview-CFnCgGJW.js","assets/index-D_pgSSHA.js","assets/index-B1w4tANX.css","assets/StudentsTable-DHdprzmu.js","assets/chevron-left-B4Kb73rF.js","assets/CategoricalChart-CdMz9dKp.js","assets/LineChart-5CEYOW7e.js","assets/ActivePoints-vPyTTaMq.js","assets/ErrorBarContext-ntJ6ph9y.js","assets/CartesianChart-CtDy-WyR.js","assets/StudentsPanel-CRO6M4nZ.js","assets/teacherDashboardUtils-BY5GUVZJ.js","assets/shield-check-D61s1X1s.js","assets/funnel-B8EtD1S9.js","assets/search-CKNIqOMr.js","assets/InterventionFormPanel-CSB4IrSD.js","assets/ProgressFormPanel-BxfnR59V.js"])))=>i.map(i=>d[i]);
import{c as q,e as U,E as K,r as s,j as e,z as Q,P as B,L as Y,_ as M}from"./index-D_pgSSHA.js";import{P as E,T as L}from"./StatusPills-CM_78s-j.js";import{C as X,U as Z}from"./users-round-CpRwWBqu.js";import{g as ee,d as te,b as $,a as se,f as ae,c as re,m as ne,e as oe,u as ie}from"./teacherDashboardUtils-BY5GUVZJ.js";import{A as de}from"./arrow-right-BE6xwi8u.js";import"./shield-check-D61s1X1s.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ce=q("circle-plus",le);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],me=q("file-check-2",ue),V=[{key:"dashboard",label:"Dashboard",icon:X},{key:"students",label:"My Students",icon:Z},{key:"create",label:"Create Intervention",icon:ce},{key:"submit",label:"Submit Progress",icon:me}],T={base:"px-4 py-3 rounded-2xl bg-white/80 dark:bg-white/10 border border-primary/20 text-sm text-foreground dark:text-white placeholder:text-muted-foreground/70 dark:placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent transition-all"};T.textarea=`${T.base} min-h-[80px]`;T.notes=`${T.base} min-h-[120px]`;const H=()=>({studentId:"",studentName:"",grade:"",type:"",strategyId:"",tier:"Tier 2",goal:"",notes:"",startDate:"",duration:"",monitorFrequency:"",monitorMethod:"",baselineValue:"",baselineUnit:"score",targetValue:"",targetUnit:"score"}),R=()=>({studentId:"",assignmentId:"",studentName:"",date:"",performed:"yes",scoreValue:"",scoreUnit:"score",badge:"ðŸŽ‰ Progress Party",notes:""}),he=t=>{const{toast:r}=U(),a=K(),[l,u]=s.useState("dashboard"),[b,i]=s.useState(()=>H()),[h,x]=s.useState(()=>R()),[v,f]=s.useState(!1),[n,w]=s.useState(!1);s.useEffect(()=>{const o=new URLSearchParams(a.search).get("tab");o&&t.some(g=>g.key===o)&&u(o)},[a.search,t]);const N=s.useCallback((d,o)=>{i(g=>({...g,[d]:o}))},[]),S=s.useCallback((d,o)=>{x(g=>({...g,[d]:o}))},[]),y=s.useCallback(async(d,o)=>{if(d.preventDefault(),v)return;if(["studentId","type","tier","startDate","monitorFrequency","monitorMethod"].filter(k=>!(o?.[k]||b[k])).length){r({title:"Complete the required fields",description:"Student, type, tier, start date, frequency, and method are required.",variant:"destructive"});return}try{f(!0),await new Promise(k=>setTimeout(k,600)),r({title:"Intervention saved",description:"Student plan locked inâ€”keep tracking their joyful progress."})}finally{f(!1)}},[b,v,r]),m=s.useCallback(d=>{d.preventDefault(),r({title:"Progress submitted",description:"Your monitoring update is live on the MTSS dashboard."})},[r]),c=s.useCallback(()=>{i(H())},[]),_=s.useCallback(()=>{x(R())},[]);return{activeTab:l,setActiveTab:u,interventionForm:b,progressForm:h,handleInterventionChange:N,handleProgressChange:S,handleSavePlan:y,handleSubmitProgress:m,resetInterventionForm:c,resetProgressForm:_,submittingPlan:v,setSubmittingPlan:f,submittingProgress:n,setSubmittingProgress:w}},ge={male:"Mr.",female:"Ms."},z=t=>ge[t?.toLowerCase?.()]||"",G=t=>{const r=["Hey %NAME%, let's light up today's boosts.","Morning %NAME%, ready to spark joyful wins?","%NAME%, today's plan is setâ€”let's uplift every student.","Cheers %NAME%, another day to glow-up kids' progress.","Let's dive in %NAME%, the boost studio is humming."],a=new Date,l=(a.getDate()+a.getMonth())%r.length;return r[l].replace("%NAME%",t)},be=t=>{const r=t?.username||t?.name||"MTSS Mentor",a=z(t?.gender),l=a?`${a} ${r}`:r;return{teacher:l,school:t?.jobPosition||t?.unit||"Millennia21 Schools",tierFocus:"Personalized supports",greeting:G(l),gradeLabel:t?.unit||"All Grades"}},pe=()=>{const t=s.useMemo(()=>ee(),[]),r=s.useMemo(()=>be(t),[t]),a=s.useMemo(()=>te(t),[t]),[l,u]=s.useState(()=>$()),[b,i]=s.useState([]),[h,x]=s.useState([]),[v,f]=s.useState(r),[n,w]=s.useState(!0),[N,S]=s.useState(null),y=s.useCallback(async m=>{w(!0),S(null);try{const c=se(a),d=c.length&&(a.shouldFilterServer||a.unit!=="Junior High")?{grade:c.join(","),limit:a.unit==="Junior High"?500:200}:{limit:a.unit==="Junior High"?500:200},[o,g]=await Promise.all([ae({limit:150},m?{signal:m}:{}),re(d,m?{signal:m}:{})]),C=o.assignments||o||[],k=$(C),j=t?.username||t?.name||r.teacher,P=t?.gender,p=ne(C,j),J=g?.students||[],D=oe(J,p.students,a),F=z(P),I=F?`${F} ${j}`:j;u(k);const W=D.length?D:p.students;i(W),x(p.spotlightChart.length?p.spotlightChart:[{label:"Start",date:"Start",reading:0,goal:100,value:0}]),f(A=>({...A,...r,teacher:I||r.teacher,greeting:G(I||r.teacher),tierFocus:p.focusLabel||A.tierFocus||"Tiered Supports",gradeLabel:a.label}))}catch(c){c?.name!=="CanceledError"&&c?.name!=="AbortError"&&S(c?.response?.data?.message||c?.message||"Failed to load MTSS data")}finally{w(!1)}},[r,a]);return s.useEffect(()=>{const m=new AbortController;return y(m.signal),()=>m.abort()},[y]),{statCards:l,students:b,progressData:h.length?h:[{label:"Start",date:"Start",reading:0,goal:100,value:0}],heroBadge:v,loading:n,error:N,refresh:()=>y()}},O=({heroBadge:t,tabs:r,activeTab:a,onTabChange:l})=>e.jsxs("div",{className:"relative overflow-hidden rounded-[44px] border border-white/20 dark:border-white/5 bg-gradient-to-br from-[#dbeafe] via-[#fdf2f8] to-[#fef3c7] dark:from-[#111827] dark:via-[#1f2937] dark:to-[#312e81] shadow-[0_45px_120px_rgba(15,23,42,0.35)]",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-10 -left-6 w-64 h-64 bg-gradient-to-br from-[#f472b6]/40 via-transparent to-transparent blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-[#22d3ee]/30 via-transparent to-transparent blur-[120px]"})]}),e.jsxs("div",{className:"relative px-6 py-8 sm:px-10 text-slate-900 dark:text-white",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_auto] lg:items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-slate-300",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-white/70 dark:bg-white/10 text-rose-500",children:e.jsx(Q,{className:"w-3.5 h-3.5"})}),"MTSS Studio"]}),e.jsx("div",{className:"inline-flex px-3 py-1 rounded-full bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/20 tracking-[0.3em] uppercase text-[11px] font-semibold text-slate-600 dark:text-slate-200",children:t.school}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-black leading-tight bg-gradient-to-r from-[#0f172a] via-[#334155] to-[#1d4ed8] dark:from-white dark:via-[#c7d2fe] dark:to-[#f472b6] text-transparent bg-clip-text",children:t.greeting||`Hey ${t.teacher}, let's light up today's boosts.`})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 px-4 py-3 rounded-3xl bg-white/70 dark:bg-white/5 border border-white/50 dark:border-white/10 shadow-inner max-w-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-slate-500 dark:text-slate-300",children:"Teacher"}),e.jsx("p",{className:"text-base font-semibold",children:t.teacher})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-slate-500 dark:text-slate-300",children:"Today"}),e.jsx("p",{className:"text-base font-semibold",children:t.dateLabel||"Ready to roll"})]})]})]}),e.jsx("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-4 gap-3",children:r.map(u=>{const b=u.icon,i=a===u.key;return e.jsxs("button",{onClick:()=>l(u.key),className:`flex items-center justify-between gap-2 rounded-3xl px-4 py-3 text-sm font-semibold transition shadow-[0_12px_35px_rgba(15,23,42,0.15)] border ${i?"bg-gradient-to-r from-[#22d3ee] via-[#3b82f6] to-[#a855f7] text-white border-transparent":"bg-white/75 dark:bg-white/10 text-slate-600 dark:text-slate-200 border-white/70 dark:border-white/15 hover:bg-white hover:dark:bg-white/15"}`,"aria-pressed":i,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center rounded-full ${i?"bg-white/30 text-white":"bg-white/80 dark:bg-white/10 text-slate-500 dark:text-slate-200"}`,children:e.jsx(b,{className:"w-4 h-4"})}),u.label]}),e.jsx(de,{className:`w-4 h-4 transition-transform ${i?"translate-x-1":""}`})]},u.key)})})]})]});O.displayName="TeacherHeroSection";const xe=s.memo(O),fe=s.lazy(()=>M(()=>import("./DashboardOverview-CFnCgGJW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ve=s.lazy(()=>M(()=>import("./StudentsPanel-CRO6M4nZ.js"),__vite__mapDeps([10,1,2,3,11,12,13,14]))),ye=s.lazy(()=>M(()=>import("./InterventionFormPanel-CSB4IrSD.js"),__vite__mapDeps([15,1,2,11,12]))),ke=s.lazy(()=>M(()=>import("./ProgressFormPanel-BxfnR59V.js"),__vite__mapDeps([16,1,2,11,12]))),we=()=>e.jsx("div",{className:"glass glass-card p-8 text-center text-muted-foreground animate-pulse",children:"Loading panel..."}),Se=s.memo(()=>{const{toast:t}=U(),{statCards:r,students:a,progressData:l,heroBadge:u,loading:b,error:i,refresh:h}=pe(),{activeTab:x,setActiveTab:v,interventionForm:f,progressForm:n,handleInterventionChange:w,handleProgressChange:N,handleSavePlan:S,resetProgressForm:y,submittingPlan:m,setSubmittingProgress:c,submittingProgress:_}=he(V),{base:d,textarea:o,notes:g}=T,C=s.useCallback(async j=>{if(j.preventDefault(),!n.studentId||!n.date||n.scoreValue===""){t({title:"Complete the required fields",description:"Student, date, and score are required to submit progress.",variant:"destructive"});return}const P=a.find(p=>p.id===n.studentId);if(!P){t({title:"Select a student",description:"Choose a student before logging progress.",variant:"destructive"});return}if(!P.assignmentId){t({title:"No active intervention",description:`${P.name} is not linked to an active intervention yet.`,variant:"destructive"});return}try{c(!0),await ie(P.assignmentId,{checkIns:[{date:n.date||new Date,summary:n.notes||"Progress update logged via dashboard",nextSteps:n.notes,value:n.scoreValue?Number(n.scoreValue):void 0,unit:n.scoreUnit,performed:n.performed==="yes"}]}),t({title:"Progress saved",description:`${P.name}'s update is now on the dashboard.`}),y(),h()}catch(p){t({title:"Failed to save progress",description:p?.response?.data?.message||p.message||"Unable to record update now.",variant:"destructive"})}finally{c(!1)}},[n,a,t,y,h,c]),k=s.useMemo(()=>{switch(x){case"dashboard":return e.jsx(fe,{statCards:r,students:a,progressData:l,TierPill:L,ProgressBadge:E});case"students":return e.jsx(ve,{students:a,TierPill:L,ProgressBadge:E,onRefresh:h});case"create":return e.jsx(ye,{formState:f,onChange:w,onSubmit:j=>S(j,f),baseFieldClass:d,textareaClass:o,students:a,submitting:m});case"submit":return e.jsx(ke,{formState:n,onChange:N,onSubmit:C,baseFieldClass:d,textareaClass:g,students:a,submitting:_});default:return null}},[x,f,n,w,N,S,C,d,o,g,r,a,l,h]);return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white transition-colors",children:[(m||_)&&e.jsx(B,{}),e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-64 bg-gradient-to-b from-white/70 via-[#fef2f2]/40 to-transparent dark:from-white/10 dark:via-white/5"}),e.jsx("div",{className:"absolute -bottom-24 left-12 w-[28rem] h-[28rem] bg-gradient-to-br from-[#22d3ee]/35 via-[#a855f7]/25 to-[#f472b6]/20 dark:from-[#0ea5e9]/25 dark:via-[#a855f7]/20 dark:to-[#f472b6]/15 blur-[200px]"})]}),e.jsxs("div",{className:"relative z-20 container-tight px-4 sm:px-6 py-8 lg:py-14 space-y-8 lg:space-y-10",children:[e.jsx("section",{className:"mtss-gradient-border overflow-hidden rounded-3xl border border-white/40 dark:border-white/10 shadow-[0_25px_60px_rgba(148,163,184,0.25)]","data-aos":"fade-up","data-aos-duration":"700",children:e.jsx(xe,{heroBadge:u,tabs:V,activeTab:x,onTabChange:v})}),(b||i)&&e.jsxs("div",{className:"rounded-2xl border border-border/50 bg-white/60 dark:bg-white/5 px-4 py-3 flex items-center justify-between gap-4 text-sm text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsx(Y,{className:"w-4 h-4 animate-spin text-primary"}),e.jsx("span",{children:i||"Syncing live MTSS data..."})]}),i&&e.jsx("button",{onClick:h,className:"text-primary font-semibold hover:underline",children:"Retry"})]}),e.jsx(s.Suspense,{fallback:e.jsx(we,{}),children:k})]})]})});Se.displayName="TeacherDashboardPage";export{Se as default};
