import{r as l,aj as U,j as v}from"./index-DyxQFg81.js";import{c as b,p as W,a as Ee,i as Oe,s as w,b as je,d as Ce,e as de,f as Re,g as Te,h as j,j as Ie,k as pe,l as Se,m as De,n as we,o as Ne,q as Le,r as ke,t as me,u as Me,v as z,w as ve,R as _e,S as Ke,x as fe,y as X,z as $e,L as k,A as Be,G as Ge,B as We,J as Fe,C as Ve,D as ae,P as Ue,E as ze,F as Xe,H as Ye,I as qe,K as Je,M as te,N as G,O as F,Q as re,T as Ze,U as $,V as He,W as Qe,X as ea,Y as ge,Z as aa,_ as ta,$ as ne,a0 as ra,a1 as na,a2 as ia,a3 as la,a4 as sa,a5 as ie,a6 as le,a7 as oa,a8 as ca,a9 as ua}from"./CartesianChart-Clnu_JDV.js";import{C as Y,u as da,a as pa,b as ma,S as va,B as fa}from"./barSelectors-CVgpZy7Z.js";import"./ErrorBarContext-pvTztQp7.js";var he=e=>e.graphicalItems.polarItems,ga=b([W,Ee],Oe),q=b([he,w,ga],je),ha=b([q],Ce),J=b([ha,de],Re),ba=b([J,w,q],Te),ya=b([J,w,q],(e,a,r)=>r.length>0?e.flatMap(t=>r.flatMap(n=>{var i,s=j(t,(i=a.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?e.map(t=>({value:j(t,a.dataKey),errorDomain:[]})):e.map(t=>({value:t,errorDomain:[]}))),se=()=>{},Pa=b([w,Ie,se,ya,se,pe,W],Se),be=b([w,pe,J,ba,De,W,Pa],we),Aa=b([be,w,Ne],Le);b([w,be,Aa,W],ke);function oe(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function ce(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?oe(Object(r),!0).forEach(function(t){xa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xa(e,a,r){return(a=Ea(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ea(e){var a=Oa(e,"string");return typeof a=="symbol"?a:a+""}function Oa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var ja=(e,a)=>a,Z=b([he,ja],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),Ca=[],H=(e,a,r)=>r?.length===0?Ca:r,ye=b([de,Z,H],(e,a,r)=>{var{chartData:t}=e;if(a!=null){var n;if(a?.data!=null&&a.data.length>0?n=a.data:n=t,(!n||!n.length)&&r!=null&&(n=r.map(i=>ce(ce({},a.presentationProps),i.props))),n!=null)return n}}),Ra=b([ye,Z,H],(e,a,r)=>{if(!(e==null||a==null))return e.map((t,n)=>{var i,s=j(t,a.nameKey,a.name),c;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[n].props.fill:typeof t=="object"&&t!=null&&"fill"in t?c=t.fill:c=a.fill,{value:me(s,a.dataKey),color:c,payload:t,type:a.legendType}})}),Ta=b([ye,Z,H,Me],(e,a,r,t)=>{if(!(a==null||e==null))return Ya({offset:t,pieSettings:a,displayedData:e,cells:r})}),Ia=["onMouseEnter","onClick","onMouseLeave"],Sa=["id"],Da=["id"];function Q(e,a){if(e==null)return{};var r,t,n=wa(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wa(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function ue(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function d(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ue(Object(r),!0).forEach(function(t){Na(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Na(e,a,r){return(a=La(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function La(e){var a=ka(e,"string");return typeof a=="symbol"?a:a+""}function ka(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},C.apply(null,arguments)}function Ma(e){var a=l.useMemo(()=>fe(e.children,Y),[e.children]),r=X(t=>Ra(t,e.id,a));return r==null?null:l.createElement($e,{legendPayload:r})}function _a(e){var{dataKey:a,nameKey:r,sectors:t,stroke:n,strokeWidth:i,fill:s,name:c,hide:p,tooltipType:m}=e;return{dataDefinedOnItem:t.map(f=>f.tooltipPayload),positions:t.map(f=>f.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:s,dataKey:a,nameKey:r,name:me(c,a),hide:p,type:m,color:s,unit:""}}}var Ka=(e,a)=>e>a?"start":e<a?"end":"middle",$a=(e,a,r)=>typeof a=="function"?$(a(e),r,r*.8):$(a,r,r*.8),Ba=(e,a,r)=>{var{top:t,left:n,width:i,height:s}=a,c=Ze(i,s),p=n+$(e.cx,i,i/2),m=t+$(e.cy,s,s/2),f=$(e.innerRadius,c,0),y=$a(r,e.outerRadius,c),u=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:p,cy:m,innerRadius:f,outerRadius:y,maxRadius:u}},Ga=(e,a)=>{var r=G(a-e),t=Math.min(Math.abs(a-e),360);return r*t};function Wa(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Fa=(e,a)=>{if(l.isValidElement(e))return l.cloneElement(e,a);if(typeof e=="function")return e(a);var r=U("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return l.createElement(He,C({},a,{type:"linear",className:r}))},Va=(e,a,r)=>{if(l.isValidElement(e))return l.cloneElement(e,a);var t=r;if(typeof e=="function"&&(t=e(a),l.isValidElement(t)))return t;var n=U("recharts-pie-label-text",Wa(e));return l.createElement(Qe,C({},a,{alignmentBaseline:"middle",className:n}),t)};function Ua(e){var{sectors:a,props:r,showLabels:t}=e,{label:n,labelLine:i,dataKey:s}=r;if(!t||!n||!a)return null;var c=ve(r),p=re(n,!1),m=re(i,!1),f=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,y=a.map((u,o)=>{var g=(u.startAngle+u.endAngle)/2,P=F(u.cx,u.cy,u.outerRadius+f,g),E=d(d(d(d({},c),u),{},{stroke:"none"},p),{},{index:o,textAnchor:Ka(P.x,u.cx)},P),R=d(d(d(d({},c),u),{},{fill:"none",stroke:u.fill},m),{},{index:o,points:[F(u.cx,u.cy,u.outerRadius,g),P],key:"line"});return l.createElement(k,{key:"label-".concat(u.startAngle,"-").concat(u.endAngle,"-").concat(u.midAngle,"-").concat(o)},i&&Fa(i,R),Va(n,E,j(u,s)))});return l.createElement(k,{className:"recharts-pie-labels"},y)}function za(e){var{sectors:a,props:r,showLabels:t}=e,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?l.createElement(Je,{label:n}):l.createElement(Ua,{sectors:a,props:r,showLabels:t})}function Xa(e){var{sectors:a,activeShape:r,inactiveShape:t,allOtherPieProps:n}=e,i=X(ze),{onMouseEnter:s,onClick:c,onMouseLeave:p}=n,m=Q(n,Ia),f=da(s,n.dataKey),y=pa(p),u=ma(c,n.dataKey);return a==null||a.length===0?null:l.createElement(l.Fragment,null,a.map((o,g)=>{if(o?.startAngle===0&&o?.endAngle===0&&a.length!==1)return null;var P=r&&String(g)===i,E=i?t:null,R=P?r:E,N=d(d({},o),{},{stroke:o.stroke,tabIndex:-1,[Ye]:g,[Xe]:n.dataKey});return l.createElement(k,C({tabIndex:-1,className:"recharts-pie-sector"},qe(m,o,g),{onMouseEnter:f(o,g),onMouseLeave:y(o,g),onClick:u(o,g),key:"sector-".concat(o?.startAngle,"-").concat(o?.endAngle,"-").concat(o.midAngle,"-").concat(g)}),l.createElement(va,C({option:R,isActive:P,shapeType:"sector"},N)))}))}function Ya(e){var a,{pieSettings:r,displayedData:t,cells:n,offset:i}=e,{cornerRadius:s,startAngle:c,endAngle:p,dataKey:m,nameKey:f,tooltipType:y}=r,u=Math.abs(r.minAngle),o=Ga(c,p),g=Math.abs(o),P=t.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,E=t.filter(h=>j(h,m,0)!==0).length,R=(g>=360?E:E-1)*P,N=g-E*u-R,T=t.reduce((h,O)=>{var A=j(O,m,0);return h+(te(A)?A:0)},0),L;if(T>0){var x;L=t.map((h,O)=>{var A=j(h,m,0),I=j(h,f,O),S=Ba(r,i,h),M=(te(A)?A:0)/T,D,_=d(d({},h),n&&n[O]&&n[O].props);O?D=x.endAngle+G(o)*P*(A!==0?1:0):D=c;var B=D+G(o)*((A!==0?u:0)+M*N),K=(D+B)/2,ee=(S.innerRadius+S.outerRadius)/2,Ae=[{name:I,value:A,payload:_,dataKey:m,type:y}],xe=F(S.cx,S.cy,ee,K);return x=d(d(d(d({},r.presentationProps),{},{percent:M,cornerRadius:s,name:I,tooltipPayload:Ae,midAngle:K,middleRadius:ee,tooltipPosition:xe},_),S),{},{value:A,startAngle:D,endAngle:B,payload:_,paddingAngle:G(o)*P}),x})}return L}function qa(e){var{showLabels:a,sectors:r,children:t}=e,n=l.useMemo(()=>!a||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,a]);return l.createElement(Ue,{value:a?n:void 0},t)}function Ja(e){var{props:a,previousSectorsRef:r}=e,{sectors:t,isAnimationActive:n,animationBegin:i,animationDuration:s,animationEasing:c,activeShape:p,inactiveShape:m,onAnimationStart:f,onAnimationEnd:y}=a,u=We(a,"recharts-pie-"),o=r.current,[g,P]=l.useState(!1),E=l.useCallback(()=>{typeof y=="function"&&y(),P(!1)},[y]),R=l.useCallback(()=>{typeof f=="function"&&f(),P(!0)},[f]);return l.createElement(qa,{showLabels:!g,sectors:t},l.createElement(Fe,{animationId:u,begin:i,duration:s,isActive:n,easing:c,onAnimationStart:R,onAnimationEnd:E,key:u},N=>{var T=[],L=t&&t[0],x=L?.startAngle;return t?.forEach((h,O)=>{var A=o&&o[O],I=O>0?Ve(h,"paddingAngle",0):0;if(A){var S=ae(A.endAngle-A.startAngle,h.endAngle-h.startAngle,N),M=d(d({},h),{},{startAngle:x+I,endAngle:x+S+I});T.push(M),x=M.endAngle}else{var{endAngle:D,startAngle:_}=h,B=ae(0,D-_,N),K=d(d({},h),{},{startAngle:x+I,endAngle:x+B+I});T.push(K),x=K.endAngle}}),r.current=T,l.createElement(k,null,l.createElement(Xa,{sectors:T,activeShape:p,inactiveShape:m,allOtherPieProps:a}))}),l.createElement(za,{showLabels:!g,sectors:t,props:a}),a.children)}var Za={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ge.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Ha(e){var{id:a}=e,r=Q(e,Sa),{hide:t,className:n,rootTabIndex:i}=e,s=l.useMemo(()=>fe(e.children,Y),[e.children]),c=X(f=>Ta(f,a,s)),p=l.useRef(null),m=U("recharts-pie",n);return t||c==null?(p.current=null,l.createElement(k,{tabIndex:i,className:m})):l.createElement(l.Fragment,null,l.createElement(Be,{fn:_a,args:d(d({},e),{},{sectors:c})}),l.createElement(k,{tabIndex:i,className:m},l.createElement(Ja,{props:d(d({},r),{},{sectors:c}),previousSectorsRef:p})))}function Pe(e){var a=z(e,Za),{id:r}=a,t=Q(a,Da),n=ve(t);return l.createElement(_e,{id:r,type:"pie"},i=>l.createElement(l.Fragment,null,l.createElement(Ke,{type:"pie",id:i,data:t.data,dataKey:t.dataKey,hide:t.hide,angleAxisId:0,radiusAxisId:0,name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,legendType:t.legendType,fill:t.fill,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,paddingAngle:t.paddingAngle,minAngle:t.minAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,presentationProps:n,maxRadius:a.maxRadius}),l.createElement(Ma,C({},t,{id:i})),l.createElement(Ha,C({},t,{id:i}))))}Pe.displayName="Pie";var Qa=["axis","item"],et=l.forwardRef((e,a)=>l.createElement(ea,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Qa,tooltipPayloadSearcher:ge,categoricalChartProps:e,ref:a}));function at(e){var a=aa();return l.useEffect(()=>{a(ta(e))},[a,e]),null}var tt=["width","height","layout"];function V(){return V=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},V.apply(null,arguments)}function rt(e,a){if(e==null)return{};var r,t,n=nt(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nt(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var it={top:5,right:5,bottom:5,left:5},lt={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:it,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},st=l.forwardRef(function(a,r){var t,n=z(a.categoricalChartProps,lt),{width:i,height:s,layout:c}=n,p=rt(n,tt);if(!ne(i)||!ne(s))return null;var{chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:y,tooltipPayloadSearcher:u}=a,o={chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:y,tooltipPayloadSearcher:u,eventEmitter:void 0};return l.createElement(ra,{preloadedState:{options:o},reduxStoreName:(t=n.id)!==null&&t!==void 0?t:m},l.createElement(na,{chartData:n.data}),l.createElement(ia,{width:i,height:s,layout:c,margin:n.margin}),l.createElement(la,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),l.createElement(at,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),l.createElement(sa,V({width:i,height:s},p,{ref:r})))}),ot=["item"],ct={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ut=l.forwardRef((e,a)=>{var r=z(e,ct);return l.createElement(st,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ot,tooltipPayloadSearcher:ge,categoricalChartProps:r,ref:a})});const dt={student:"#8884d8",staff:"#82ca9d",teacher:"#ffc658",admin:"#ff7300",directorate:"#00ff00",superadmin:"#ff0000"},pt=l.memo(({roleBreakdown:e=[],viewMode:a="bar"})=>{if(!e||e.length===0)return null;const r=l.useMemo(()=>e.map(i=>({name:i.role.charAt(0).toUpperCase()+i.role.slice(1),submitted:i.submitted,total:i.total,submissionRate:i.submissionRate,avgPresence:i.avgPresence,avgCapacity:i.avgCapacity})),[e]),t=l.useMemo(()=>e.map(i=>({name:i.role.charAt(0).toUpperCase()+i.role.slice(1),value:i.submitted,total:i.total})),[e]),n=({active:i,payload:s,label:c})=>{if(i&&s&&s.length){const p=s[0].payload;return v.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[v.jsx("p",{className:"font-medium text-foreground",children:c}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted: ",p.submitted,"/",p.total," (",p.submissionRate,"%)"]}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Avg Presence: ",p.avgPresence,"/10"]}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Avg Capacity: ",p.avgCapacity,"/10"]})]})}return null};return a==="pie"?v.jsx("div",{className:"h-80",children:v.jsx(ie,{width:"100%",height:"100%",children:v.jsxs(ut,{children:[v.jsx(Pe,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:i,value:s,total:c})=>`${i}: ${s}/${c}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((i,s)=>v.jsx(Y,{fill:dt[i.name.toLowerCase()]||"#8884d8"},`cell-${s}`))}),v.jsx(le,{})]})})}):v.jsx("div",{className:"h-80",children:v.jsx(ie,{width:"100%",height:"100%",children:v.jsxs(et,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[v.jsx(oa,{strokeDasharray:"3 3",className:"opacity-30"}),v.jsx(ca,{dataKey:"name",className:"text-xs",tick:{fill:"currentColor"}}),v.jsx(ua,{className:"text-xs",tick:{fill:"currentColor"}}),v.jsx(le,{content:v.jsx(n,{})}),v.jsx(fa,{dataKey:"submitted",fill:"#8884d8",radius:[4,4,0,0]})]})})})});pt.displayName="RoleBreakdownChart";export{pt as default};
