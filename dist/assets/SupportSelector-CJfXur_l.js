import{r,u as N,b as u,n as j,j as e}from"./index-BeQwOtyQ.js";import{U as g}from"./users-BVc-u3T_.js";import{C as b}from"./chevron-down-B-g9NK3J.js";import{U as v}from"./user-check-DEb2rbvH.js";import{C as y}from"./circle-check-DQboGOwg.js";const w=r.memo(()=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-emerald/10 border border-emerald/20 flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-emerald"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Need Support?"}),e.jsx("p",{className:"text-xs text-foreground/70",children:"Select someone to check in with you today"})]})]})),S=r.memo(({internalSelection:l,onInternalChange:i,hasSelection:d,supportContacts:a,loading:n})=>e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:s=>i(s.target.value),disabled:n||a.length===0,className:`w-full px-3 py-2.5 bg-card/50 border border-border/60 rounded-lg text-sm text-foreground appearance-none cursor-pointer transition-all duration-300 ${d?"border-emerald/50 bg-emerald/5":"hover:border-emerald/30"} focus:outline-none focus:border-emerald focus:ring-1 focus:ring-emerald/20 ${n||a.length===0?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:n?"Loading...":a.length===0?"No contacts available":"Choose a team member..."}),a.map(s=>e.jsx("option",{value:s.name,children:s.isClassTeacher?`${s.name} â€” Class Teacher`:`${s.name} â€” ${s.displayRole||s.role}`},s.id)),e.jsx("option",{value:"No Need",children:"No Need"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(b,{className:`w-4 h-4 transition-colors ${d?"text-emerald":"text-foreground/50"}`})})]})),C=r.memo(({selectedPerson:l})=>e.jsx("div",{className:"p-3 rounded-lg bg-emerald/5 border border-emerald/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-emerald/20 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-emerald",children:l.avatar})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-3.5 h-3.5 text-emerald flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium text-emerald truncate",children:l.name})]}),e.jsxs("p",{className:"text-xs text-foreground/70",children:["We'll arrange for ",l.name," to connect with you today."]})]})]})})),k=r.memo(()=>e.jsx("div",{className:"p-3 rounded-lg bg-emerald/5 border border-emerald/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-5 h-5 text-emerald flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-emerald",children:"Great! You're feeling supported"}),e.jsx("p",{className:"text-xs text-foreground/70",children:"Remember, our team is always here when you need us."})]})]})})),A=r.memo(()=>e.jsx("div",{className:"p-3 rounded-lg bg-card/30 border border-border/40",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ’¬"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-xs text-foreground/70 leading-relaxed",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Tip:"}),` Select a team member if you'd like someone to check in with you, or choose "No Need" if you're feeling well-supported today.`]})})]})})),T=r.memo(()=>e.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald animate-pulse"}),e.jsx("p",{className:"text-xs text-foreground/60",children:"Our support team is available today"})]})),$=r.memo(({supportContact:l,onSupportChange:i})=>{const d=N(),{contacts:a,loading:n}=u(t=>t.support),{isAuthenticated:s}=u(t=>t.auth),[o,x]=r.useState(l||"");r.useEffect(()=>{if(a.length===0&&s&&!n){const t=setTimeout(()=>{d(j())},100);return()=>clearTimeout(t)}},[d,a.length,s,n]),r.useEffect(()=>{x(l||"")},[l]);const c=r.useMemo(()=>(console.log("SupportSelector contacts:",a),a.length>0?a:[]),[a]),m=r.useMemo(()=>c.find(t=>t.name===o)||{name:o,role:"Support Contact",department:"N/A",jobLevel:"N/A",unit:"N/A",jobPosition:"N/A",avatar:o?o.charAt(0).toUpperCase():"?"},[o,c]),f=o==="No Need",h=!!o,p=t=>{x(t),i&&i(t)};return e.jsxs("div",{className:"bg-card/30 border border-border/40 rounded-lg p-4 space-y-4",children:[e.jsx(w,{}),e.jsx(S,{internalSelection:o,onInternalChange:p,hasSelection:h,supportContacts:c,loading:n}),m&&m.id!=="no-need"&&e.jsx(C,{selectedPerson:m}),f&&e.jsx(k,{}),!h&&e.jsx(A,{}),e.jsx(T,{})]})});$.displayName="SupportSelector";export{$ as default};
