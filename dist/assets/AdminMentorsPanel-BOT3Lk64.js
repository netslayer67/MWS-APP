import{j as e,E as g,r as f,m as y,b as N}from"./index-BN59IPuR.js";const M=["teacher","homeroom","subject","special"],w=[{glass:"from-[#fdf2f8]/95 via-[#f5f3ff]/70 to-[#e0f2fe]/80 dark:from-white/10 dark:via-white/5 dark:to-[#0f172a]/60",accent:"from-[#ec4899] via-[#f97316] to-[#facc15]",tag:"from-[#ffe4e6]/85 via-[#fef3c7]/80 to-[#dbeafe]/80 text-rose-600",halo:"from-[#f472b6]/35 via-[#fef08a]/25 to-transparent"},{glass:"from-[#e0f2fe]/95 via-[#ccfbf1]/70 to-[#f5f5ff]/80 dark:from-[#0f172a]/70 dark:via-[#0b1220]/70 dark:to-[#111827]/80",accent:"from-[#3b82f6] via-[#22d3ee] to-[#a855f7]",tag:"from-[#bae6fd]/80 via-[#ccfbf1]/80 to-[#ede9fe]/80 text-sky-700",halo:"from-[#22d3ee]/30 via-[#6366f1]/30 to-transparent"},{glass:"from-[#fff7ed]/95 via-[#fef9c3]/70 to-[#e0f2fe]/80 dark:from-[#1f2937]/80 dark:via-[#0f172a]/80 dark:to-[#0f172a]/60",accent:"from-[#f97316] via-[#facc15] to-[#4ade80]",tag:"from-[#ffedd5]/90 via-[#fef3c7]/80 to-[#e0f2fe]/80 text-amber-700",halo:"from-[#fb923c]/30 via-[#fde047]/25 to-transparent"},{glass:"from-[#ede9fe]/95 via-[#e0f2fe]/70 to-[#fef3c7]/80 dark:from-[#0f172a]/70 dark:via-[#111827]/70 dark:to-[#1f2937]/70",accent:"from-[#a855f7] via-[#ec4899] to-[#f472b6]",tag:"from-[#ddd6fe]/90 via-[#f9a8d4]/80 to-[#fef3c7]/80 text-fuchsia-700",halo:"from-[#c084fc]/35 via-[#fb7185]/25 to-transparent"}],v=["fade-up","zoom-in","flip-left","fade-up-right","zoom-out-up","fade-up-left"],m=9,u=(t={})=>(t._id||t.id||t.email||t.name||"").toString().toLowerCase(),S=t=>{const i=(t.jobPosition||"").toLowerCase(),h=(t.role||"").toLowerCase(),r=Array.isArray(t.classes)?t.classes.some(d=>(d.role||"").toLowerCase().includes("teacher")):!1;return M.some(d=>i.includes(d))||r||h.includes("teacher")},_=(t=[],i=[])=>{const h=i.filter(S),r=new Map(t.map(a=>[u(a),{activeStudents:a.activeStudents||a.students||0,successRate:a.successRate||"0%"}])),d=new Map;return h.forEach(a=>{const o=u(a),n=r.get(o)||{activeStudents:0,successRate:"0%"};d.set(o,{_id:a._id||a.id||null,name:a.name,role:a.jobPosition||a.role||"Teacher",activeStudents:n.activeStudents,successRate:n.successRate})}),t.forEach(a=>{const o=u(a),n=d.get(o);d.set(o,{_id:a._id||a.id||d.get(o)?._id||null,name:a.name,role:a.role||n?.role||"Teacher",activeStudents:a.activeStudents||a.students||n?.activeStudents||0,successRate:a.successRate||n?.successRate||"0%"})}),Array.from(d.values()).sort((a,o)=>a.name.localeCompare(o.name))},A=()=>e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8","data-aos":"fade-up","data-aos-delay":"150",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-full bg-gradient-to-r from-[#e0f2fe] via-[#fef3c7] to-[#fbcfe8] text-sm font-semibold text-slate-700 dark:text-white shadow-inner",children:[e.jsx(g,{className:"w-4 h-4 text-rose-500"}),"Mentor Squad"]}),e.jsxs("div",{className:"rounded-[28px] bg-gradient-to-r from-white/95 via-white/70 to-white/40 dark:from-white/10 dark:via-white/5 dark:to-white/5 p-5 border border-white/60 dark:border-white/10 shadow-inner backdrop-blur-xl space-y-2",children:[e.jsx("h3",{className:"text-3xl font-black text-foreground dark:text-white bg-gradient-to-r from-[#14b8a6] via-[#3b82f6] to-[#a855f7] text-transparent bg-clip-text",children:"Manage Mentors"}),e.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-[#fee2e2]/80 via-[#fef9c3]/80 to-[#cffafe]/80 dark:from-white/10 dark:via-white/5 dark:to-white/5 px-4 py-2 text-xs font-semibold text-rose-500 flex items-center gap-2 shadow-sm",children:[e.jsx(g,{className:"w-4 h-4"}),'Tap "Assign students" to pair mentors with multiple kids instantly.']})]})]}),e.jsx("button",{className:"px-5 py-3 rounded-full bg-gradient-to-r from-[#fde68a] via-[#fca5a5] to-[#f472b6] text-sm font-semibold text-rose-700 shadow-lg hover:-translate-y-0.5 transition border border-white/70",children:"Add Mentor"})]}),k=f.memo(({mentor:t,theme:i,aosVariant:h,index:r,batchSize:d,onAssign:a})=>{const o=Number(t.activeStudents)||0,n=Number(String(t.successRate??"0").replace(/[^\d.]/g,""))||0,b=n>=85?"text-emerald-400":n>=60?"text-amber-400":"text-rose-400",p=Array.isArray(t.classes)?t.classes.slice(0,3).map(s=>{const l=s.grade||t.unit||"MTSS",c=s.className||s.subject;return c?`${l} ï¿½ ${c}`:l}):[];return e.jsxs(y.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:r%d*.05},className:`relative group overflow-hidden rounded-[24px] border border-white/40 dark:border-white/5 p-5 shadow-[0_18px_55px_rgba(15,23,42,0.16)] backdrop-blur-xl bg-gradient-to-br ${i.glass}`,"data-aos":h,"data-aos-delay":200+r%d*60,"data-aos-duration":650+r%4*120,children:[e.jsx("div",{className:`absolute -top-14 right-3 w-32 h-32 bg-gradient-to-br ${i.halo} blur-3xl opacity-60 group-hover:opacity-80 transition`}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-15 group-hover:opacity-30 transition bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),_transparent_60%)]"}),e.jsxs("div",{className:"relative space-y-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-2xl bg-white/85 text-slate-900 font-black flex items-center justify-center shadow-inner shadow-white/40",children:t.name.split(" ").map(s=>s[0]).slice(0,2).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-white/70",children:t.role})]})]}),e.jsxs("div",{className:"text-right text-[0.55rem] uppercase tracking-[0.3em] text-slate-500 dark:text-white/60",children:[e.jsx("p",{children:t.unit||"Unit"}),e.jsx("p",{className:"text-sm font-black tracking-normal text-slate-900 dark:text-white",children:t.role||"Teacher"})]})]}),p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 text-[0.65rem] font-semibold text-slate-600 dark:text-white/70",children:p.map(s=>e.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/85 dark:bg-white/5",children:s},`${t.name}-${s}`))}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs font-semibold text-slate-600 dark:text-white/70",children:[e.jsxs("div",{className:"rounded-2xl border border-white/40 dark:border-white/10 px-3 py-3 bg-white/80 dark:bg-white/5 backdrop-blur text-center",children:[e.jsx("p",{className:"text-[0.55rem] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:"Active"}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:o})]}),e.jsxs("div",{className:"rounded-2xl border border-white/40 dark:border-white/10 px-3 py-3 bg-white/80 dark:bg-white/5 backdrop-blur text-center",children:[e.jsx("p",{className:"text-[0.55rem] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:"Success"}),e.jsx("p",{className:`text-2xl font-black ${b}`,children:t.successRate})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[0.65rem] font-semibold text-slate-600 dark:text-white/70",children:[e.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:o>=12?"High load":"Balanced load"}),e.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:"SEL friendly"}),e.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/20 bg-white/80 dark:bg-white/5",children:n>=90?"Spotlight":"Steady growth"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`flex-1 px-4 py-2.5 rounded-full text-sm font-semibold text-white shadow-lg shadow-primary/30 hover:-translate-y-0.5 transition bg-gradient-to-r ${i.accent}`,children:"Pulse profile"}),e.jsx("button",{className:"flex-1 px-4 py-2.5 rounded-full border border-white/60 dark:border-white/20 text-slate-900 dark:text-white bg-white/85 dark:bg-white/5 shadow-inner hover:-translate-y-0.5 transition",onClick:()=>a?.(t),children:"Assign"})]})]})]},t.name)});k.displayName="MentorCard";const R=({visibleCount:t,total:i})=>e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2 text-xs font-semibold text-muted-foreground","data-aos":"fade-up",children:[e.jsxs("span",{children:["Showing ",t," of ",i," mentors"]}),t<i?e.jsx("span",{className:"px-3 py-1 rounded-full border border-white/60 dark:border-white/10 bg-white/70 dark:bg-white/5 text-[0.65rem] uppercase tracking-[0.3em]",children:"Scroll to load more"}):e.jsx("span",{className:"px-3 py-1 rounded-full border border-emerald-200/60 bg-emerald-50 text-emerald-600 text-[0.65rem] uppercase tracking-[0.3em]",children:"All mentors loaded"})]}),j=({mentorRoster:t=[],mentorDirectory:i=[]})=>{const h=N(),r=f.useMemo(()=>_(t,i),[t,i]),[d,a]=f.useState(m),o=f.useRef(null);f.useEffect(()=>{a(m)},[r.length]),f.useEffect(()=>{if(!o.current)return;const s=new IntersectionObserver(l=>{const[c]=l;c.isIntersecting&&a(x=>x>=r.length?x:Math.min(r.length,x+m))},{threshold:.4});return s.observe(o.current),()=>s.disconnect()},[r.length]);const n=f.useMemo(()=>r.slice(0,Math.min(d,r.length)),[r,d]),b=f.useCallback(s=>{const l=u(s),c=i.find(x=>u(x)===l);return c?{...s,...c,_id:c._id||s._id||s.id||null}:s},[i]),p=f.useCallback(s=>{const l=b(s);if(!l?._id){console.warn("Mentor missing identifier, unable to assign",s);return}h(`/mtss/admin/assign/${l._id}`,{state:{mentor:l}})},[b,h]);return e.jsx("div",{className:"space-y-8","data-aos":"fade-up","data-aos-delay":"100",children:e.jsxs("div",{className:"glass glass-card mtss-card-surface p-8 rounded-[40px] shadow-[0_30px_90px_rgba(15,23,42,0.32)] border border-white/10 bg-gradient-to-br from-white/80 via-white/60 to-white/40 dark:from-white/5 dark:via-white/10 dark:to-white/5 backdrop-blur-2xl",children:[e.jsx(A,{}),e.jsx("div",{className:"grid gap-5 lg:gap-6 md:grid-cols-2 xl:grid-cols-3","data-aos":"fade-up","data-aos-delay":"180",children:n.map((s,l)=>{const c=w[l%w.length],x=v[(l+2)%v.length];return e.jsx(k,{mentor:s,theme:c,aosVariant:x,index:l,batchSize:m,onAssign:p},s.name)})}),e.jsx("div",{ref:o,children:e.jsx(R,{visibleCount:n.length,total:r.length})})]})})};j.displayName="AdminMentorsPanel";const E=f.memo(j);export{E as default};
