import{r as g,j as e,m as j,L as D}from"./index-B1rSvVjj.js";import{c as O,n as E}from"./teacherMappingUtils-CzV_VARO.js";import"./teacherGradeUtils-COfj_G-K.js";import"./shield-check-Dkdptd2z.js";const o="px-4 py-3 rounded-2xl bg-white/70 dark:bg-white/10 border border-primary/10 text-sm text-muted-foreground",y=s=>s!=null&&s!=="",V=s=>{if(!s)return null;if(y(s.goal))return s.goal;const t=s.goals;if(typeof t=="string")return t;if(!Array.isArray(t)||t.length===0)return null;const a=t.find(r=>r);return a?typeof a=="string"?a:a.description||a.goal||a.title||a.name||null:null},b=(s,t)=>{if(s==null||s==="")return null;if(typeof s=="number"||typeof s=="string"){const x=`${s}`.trim();return x?`${x}${t?` ${t}`:""}`:null}const a=s?.value??s?.score??s?.amount;if(a==null||a==="")return null;const r=s?.unit||t;return`${a}${r?` ${r}`:""}`},A=s=>{const t=[s?.monitoringMethod,s?.monitoringFrequency].filter(a=>y(a));return t.length?t.join(" / "):"Not set"},B=s=>{const t=b(s?.baselineScore,s?.metricLabel),a=b(s?.targetScore,s?.metricLabel);return!t&&!a?"Not set":`${t||"Not set"} to ${a||"Not set"}`},N=s=>{if(!s)return[];const t=Array.isArray(s.assignmentOptions)?s.assignmentOptions:[];return t.length?t:s.assignmentId?[{assignmentId:s.assignmentId,focus:s.type||"Focused Support",tier:s.tier||"Tier 1",tierCode:E(s.tier)||"tier1",metricLabel:null}]:[]},v=(s=[])=>{const t=s.filter(a=>a.tierCode&&a.tierCode!=="tier1");return t.length?t:s},F=s=>{const t=s.focus||s.label||"Focused Support",a=s.tier||"Tier 1";return`${t} - ${a}`},C=g.memo(({formState:s,onChange:t,onSubmit:a,baseFieldClass:r,textareaClass:x,students:u=[],submitting:p=!1})=>{const c=g.useMemo(()=>u.find(l=>l.id===s.studentId),[u,s.studentId]),i=g.useMemo(()=>v(N(c)),[c]),n=g.useMemo(()=>i.find(l=>l.assignmentId===s.assignmentId)||i[0],[i,s.assignmentId]),w=n?.metricLabel||"score",k=n?.strategyName||n?.strategy||n?.focus||"Not set",I=V(n)||"Not set",$=n?.duration||"Ongoing",P=A(n),L=B(n),S=l=>{const d=l.target.value,m=u.find(T=>T.id===d);t("studentId",d),t("studentName",m?.name||"");const f=v(N(m))[0];t("assignmentId",f?.assignmentId||m?.assignmentId||""),t("scoreUnit",f?.metricLabel||"score")},M=l=>{const d=l.target.value;t("assignmentId",d);const m=i.find(h=>h.assignmentId===d);t("scoreUnit",m?.metricLabel||"score")},G=!!(s.studentId&&s.date&&s.scoreValue!=="");return e.jsxs(j.section,{className:"mtss-theme rounded-[32px] border border-white/40 bg-white/90 dark:bg-slate-900/40 shadow-[0_25px_80px_rgba(15,23,42,0.12)] p-6 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("header",{children:[e.jsx("p",{className:"uppercase text-xs tracking-[0.4em] text-muted-foreground",children:"Progress Ping"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Log today's glow"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share check-in data, SEL notes, and small wins to keep the MTSS trail fresh."})]}),e.jsxs("form",{className:"space-y-5",onSubmit:a,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Student Name"}),e.jsxs("select",{className:r,value:s.studentId,onChange:S,children:[e.jsx("option",{value:"",children:"Select student"}),u.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Grade / Tier"}),e.jsx("div",{className:o,children:c?`${c.grade||"Grade"} - ${c.tier||"Tier 1"}`:"Select a student to view current tier"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Focus Subject"}),e.jsx("select",{className:r,value:s.assignmentId,onChange:M,disabled:!i.length,children:i.length?i.map(l=>e.jsx("option",{value:l.assignmentId,children:F(l)},l.assignmentId)):e.jsx("option",{value:"",children:"Select a student first"})})]}),n&&e.jsxs("div",{className:"rounded-2xl border border-white/40 bg-white/80 dark:bg-white/5 p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Details"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Strategy"}),e.jsx("div",{className:o,children:k})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Goal"}),e.jsx("div",{className:o,children:I})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Duration"}),e.jsx("div",{className:o,children:$})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Monitoring Method / Frequency"}),e.jsx("div",{className:o,children:P})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Baseline to Target"}),e.jsx("div",{className:o,children:L})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Date of Update"}),e.jsx("input",{type:"date",className:r,value:s.date,onChange:l=>t("date",l.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Intervention Performed?"}),e.jsxs("select",{className:r,value:s.performed,onChange:l=>t("performed",l.target.value),children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Status or Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:`${r} flex-1`,placeholder:"e.g. 72",value:s.scoreValue,onChange:l=>t("scoreValue",l.target.value)}),e.jsx("div",{className:`${o} w-28 flex items-center justify-center font-semibold`,children:w})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Celebration Emoji"}),e.jsxs("select",{className:r,value:s.badge||"ðŸŽ‰ Progress Party",onChange:l=>t("badge",l.target.value),children:[e.jsx("option",{value:"ðŸŽ‰ Progress Party",children:"ðŸŽ‰ Progress Party"}),e.jsx("option",{value:"ðŸŒŸ Stellar Boost",children:"ðŸŒŸ Stellar Boost"}),e.jsx("option",{value:"ðŸŽ¯ Focus Mode",children:"ðŸŽ¯ Focus Mode"}),e.jsx("option",{value:"ðŸ‘ Great Effort",children:"ðŸ‘ Great Effort"}),e.jsx("option",{value:"ðŸ… Milestone Hit",children:"ðŸ… Milestone Hit"}),e.jsx("option",{value:"ðŸ“ˆ Growth Spurt",children:"ðŸ“ˆ Growth Spurt"}),e.jsx("option",{value:"ðŸŒ± Keep Going",children:"ðŸŒ± Keep Going"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Notes & Observations"}),e.jsx("textarea",{className:x,placeholder:"Describe student's progress, challenges, or celebrations...",value:s.notes,onChange:l=>t("notes",l.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-3",children:[e.jsxs(j.button,{type:"submit",disabled:!G||p,className:"mtss-rainbow-chip mtss-rainbow-chip--emerald inline-flex items-center gap-2 px-5 py-3 text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.97},children:[p?e.jsx(D,{className:"w-4 h-4 animate-spin"}):e.jsx(O,{className:"w-4 h-4"}),p?"Saving...":"Submit Progress Update"]}),e.jsx("button",{type:"button",className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-muted text-foreground font-semibold",children:"Cancel"})]})]})]})});C.displayName="ProgressFormPanel";export{C as default};
