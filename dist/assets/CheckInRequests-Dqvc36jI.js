import{r as c,a as p,u as f,j as e,U as u,C as o,aB as m,K as j}from"./index-BOBGiIRK.js";import{M as b}from"./message-circle-BeSNgh9U.js";import{C as v}from"./check-Ui3xxLLN.js";const N=c.memo(({requests:l,isHeadUnit:x})=>{const h=p(),g=f(),[n,r]=c.useState(new Set),i=async(s,t)=>{if(!n.has(s)){r(a=>new Set(a).add(s));try{console.log(`Confirming ${t} for request ${s}`),await new Promise(a=>setTimeout(a,1e3)),m({title:"Action Confirmed",description:`Check-in request has been ${t==="handled"?"handled":"acknowledged"}.`}),t==="handled"&&g(j(s))}catch(a){console.error("Error confirming action:",a),m({title:"Error",description:"Failed to confirm action. Please try again.",variant:"destructive"})}finally{r(a=>{const d=new Set(a);return d.delete(s),d})}}};return!l||l.length===0?null:e.jsxs("div",{className:"glass glass-card hover-lift transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"w-4 h-4 text-primary"}),e.jsx("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:"Check-in Requests"})]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4",children:x?"Unit members who selected you as their support contact":"Teacher/Staff/Student (automatically created when someone requested to be checked-in with you)"}),e.jsx("div",{className:"space-y-3",children:l.map((s,t)=>e.jsxs("div",{className:"glass glass-card transition-all duration-300 hover:scale-[1.02] cursor-pointer",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsx("div",{className:"relative z-10 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(u,{className:"w-4 h-4 md:w-5 md:h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-foreground text-sm md:text-base",children:s.contact}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full flex items-center gap-1 ${s.status==="handled"||s.status==="acknowledged"?"text-green-700 bg-green-100":"text-orange-700 bg-orange-100"}`,children:s.status==="handled"||s.status==="acknowledged"?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-3 h-3"}),"completed"]}):"requested"})]}),s.status!=="handled"&&s.status!=="acknowledged"&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:a=>{a.stopPropagation(),i(s.id,"acknowledged")},disabled:n.has(s.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),"Acknowledge"]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),i(s.id,"handled")},disabled:n.has(s.id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx(o,{className:"w-3 h-3"}),"Handled"]})]})]}),e.jsxs("button",{onClick:()=>h(`/emotional-wellness/${s.userId}`),className:"text-sm text-muted-foreground hover:text-primary hover:underline transition-colors text-left",children:["by ",s.requestedBy]}),s.weatherType&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Weather: ",s.weatherType," • Presence: ",s.presenceLevel,"/10 • Capacity: ",s.capacityLevel,"/10"]})]})]})})]},t))})]})]})});N.displayName="CheckInRequests";export{N as default};
