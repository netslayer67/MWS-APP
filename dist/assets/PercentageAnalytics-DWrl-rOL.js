import{r as x,j as e}from"./index-By89xKr2.js";import{T as j}from"./target-DC8Ppc4A.js";import{U as N}from"./users-DVOWKIDY.js";import{C as v}from"./circle-alert-BCPGdFCY.js";import{T as u}from"./trending-up-zM5cQDrC.js";const w=x.memo(({data:l={}})=>{const s=x.useMemo(()=>{if(!l)return null;const t=l.totalUsers||0,d=l.totalCheckins||0,g=l.submissionRate||0,n=l.flaggedUsers?.length||0,h=t>0?Math.round(n/t*100):0,f=g,o=l.moodDistribution||{},c=Object.values(o).reduce((r,a)=>r+a,0),p=Object.entries(o).map(([r,a])=>({mood:r.charAt(0).toUpperCase()+r.slice(1),count:a,percentage:c>0?Math.round(a/c*100):0})).sort((r,a)=>a.percentage-r.percentage),i=l.weatherDistribution||{},m=Object.values(i).reduce((r,a)=>r+a,0),b=Object.entries(i).map(([r,a])=>({weather:r.charAt(0).toUpperCase()+r.slice(1),count:a,percentage:m>0?Math.round(a/m*100):0})).sort((r,a)=>a.percentage-r.percentage);return{participationRate:f,flaggedPercentage:h,moodPercentages:p,weatherPercentages:b,totalUsers:t,totalCheckins:d,flaggedUsers:n}},[l]);return s?e.jsxs("div",{className:"glass glass-card transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(j,{className:"w-4 h-4 text-primary"}),e.jsx("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:"Percentage Analytics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-card/40 border border-border/40 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Participation Rate"}),e.jsx(N,{className:"w-4 h-4 text-emerald-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.participationRate,"%"]}),e.jsx("div",{className:"w-full bg-muted/30 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-500 ease-out",style:{width:`${s.participationRate}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.totalCheckins," of ",s.totalUsers," users"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-card/40 border border-border/40 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Support Needed"}),e.jsx(v,{className:"w-4 h-4 text-red-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.flaggedPercentage,"%"]}),e.jsx("div",{className:"w-full bg-muted/30 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-400 transition-all duration-500 ease-out",style:{width:`${s.flaggedPercentage}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.flaggedUsers," of ",s.totalUsers," users"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-card/40 border border-border/40 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Top Mood"}),e.jsx(u,{className:"w-4 h-4 text-blue-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.moodPercentages[0]?.percentage||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.moodPercentages[0]?.mood||"N/A"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.moodPercentages[0]?.count||0," responses"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-card/40 border border-border/40 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Top Weather"}),e.jsx(u,{className:"w-4 h-4 text-purple-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.weatherPercentages[0]?.percentage||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.weatherPercentages[0]?.weather||"N/A"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.weatherPercentages[0]?.count||0," responses"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Mood Distribution"}),e.jsx("div",{className:"space-y-2",children:s.moodPercentages.slice(0,5).map((t,d)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${d*60}, 70%, 50%)`}}),e.jsx("span",{className:"text-sm text-foreground capitalize",children:t.mood})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted/30 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8 text-right",children:[t.percentage,"%"]})]})]},t.mood))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Weather Distribution"}),e.jsx("div",{className:"space-y-2",children:s.weatherPercentages.slice(0,5).map((t,d)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${d*45+180}, 70%, 50%)`}}),e.jsx("span",{className:"text-sm text-foreground capitalize",children:t.weather})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted/30 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-secondary transition-all duration-500 ease-out",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8 text-right",children:[t.percentage,"%"]})]})]},t.weather))})]})]})]})]}):null});w.displayName="PercentageAnalytics";export{w as default};
