import{r as t,u,b as x,n as p,j as e}from"./index-C84qGWMf.js";import{U as f}from"./users-CjeQhNyl.js";import{C as j}from"./chevron-down-BcB7QQeT.js";import{U as N}from"./user-check-PKZHa1M7.js";import{M as b}from"./message-circle-BRW37lLP.js";import{C as g}from"./circle-check-BcjTGJ6h.js";const v=t.memo(()=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 md:w-14 md:h-14 rounded-xl bg-gradient-to-br from-emerald/10 to-emerald/5 border border-emerald/20 flex items-center justify-center transition-all duration-300 hover:scale-105",children:e.jsx(f,{className:"w-6 h-6 md:w-7 md:h-7 text-emerald"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-foreground tracking-tight",children:"Need Support?"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground leading-relaxed",children:"Select someone to check in with you today"})]})]})),w=t.memo(({supportContact:a,onSupportChange:i,hasSelection:o,supportContacts:r,loading:l})=>e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:s=>i(s.target.value),disabled:l||r.length===0,className:`w-full px-4 py-3.5 md:py-4 bg-input/50 backdrop-blur-sm border-2 rounded-lg text-sm md:text-base text-foreground appearance-none cursor-pointer transition-all duration-300 ease-premium ${o?"border-emerald shadow-lg shadow-emerald/10 bg-input/80":"border-border hover:border-emerald/40 hover:bg-input/70"} focus:outline-none focus:border-emerald focus:shadow-lg focus:shadow-emerald/10 ${l||r.length===0?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:l?"Loading support contacts...":r.length===0?"No support contacts available":"Choose a team member..."}),r.map(s=>e.jsx("option",{value:s.name,children:s.isClassTeacher?`${s.name} â€” Class Teacher ${s.classInfo?`(${s.classInfo})`:""}`:`${s.name} â€” ${s.displayRole||s.role} ${s.jobLevel&&s.jobLevel!=="N/A"?`(${s.jobLevel})`:""} ${s.department&&s.department!=="N/A"?`- ${s.department}`:""}`},s.id)),e.jsx("option",{value:"No Need",children:"No Need"})]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(j,{className:`w-5 h-5 transition-all duration-300 ${o?"text-emerald":"text-muted-foreground"}`})})]})),y=t.memo(({selectedPerson:a})=>e.jsxs("div",{className:"p-4 rounded-lg border backdrop-blur-sm animate-in fade-in slide-in-from-bottom-2 duration-300 bg-emerald/5 border-emerald/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-emerald to-emerald/70 flex items-center justify-center shadow-lg shadow-emerald/20",children:e.jsx("span",{className:"text-sm font-bold text-white",children:a.avatar})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(N,{className:"w-4 h-4 text-emerald flex-shrink-0"}),e.jsx("p",{className:"text-sm md:text-base font-semibold text-emerald",children:a.name})]}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground leading-relaxed",children:["We'll arrange for ",a.name," to connect with you today. You can also reach out directly if needed."]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-emerald/10",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Available for check-in or direct contact"})]})})]})),k=t.memo(()=>e.jsx("div",{className:"p-4 rounded-lg border backdrop-blur-sm animate-in fade-in slide-in-from-bottom-2 duration-300 bg-emerald/5 border-emerald/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"w-6 h-6 text-emerald flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm md:text-base font-semibold text-emerald mb-1",children:"Great! You're feeling supported"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground leading-relaxed",children:"Remember, our team is always here when you need us. Don't hesitate to reach out anytime."})]})]})})),S=t.memo(()=>e.jsx("div",{className:"p-4 rounded-lg bg-muted/10 border border-border/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-base",children:"ðŸ’¬"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground leading-relaxed",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Tip:"}),` Select a team member if you'd like someone to check in with you, or choose "No Need" if you're feeling well-supported today.`]})})]})})),$=t.memo(()=>e.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald animate-pulse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Our support team is available today"})]})),A=t.memo(({supportContact:a,onSupportChange:i})=>{const o=u(),{contacts:r,loading:l}=x(d=>d.support),{isAuthenticated:s}=x(d=>d.auth);t.useEffect(()=>{if(r.length===0&&s&&!l){const d=setTimeout(()=>{o(p())},100);return()=>clearTimeout(d)}},[o,r.length,s,l]);const m=t.useMemo(()=>(console.log("SupportSelector contacts:",r),r.length>0?r:[]),[r]),n=t.useMemo(()=>m.find(d=>d.name===a)||{name:a,role:"Support Contact",department:"N/A",jobLevel:"N/A",unit:"N/A",jobPosition:"N/A",avatar:a.charAt(0).toUpperCase()},[a,m]),h=a==="No Need",c=!!a;return e.jsxs("div",{className:"glass glass-card hover-lift transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__refract--soft"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-5 md:p-6 space-y-5",children:[e.jsx(v,{}),e.jsx(w,{supportContact:a,onSupportChange:i,hasSelection:c,supportContacts:m,loading:l}),n&&n.id!=="no-need"&&e.jsx(y,{selectedPerson:n}),h&&e.jsx(k,{}),!c&&e.jsx(S,{}),e.jsx($,{})]})]})});A.displayName="SupportSelector";export{A as default};
