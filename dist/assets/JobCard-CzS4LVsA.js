import{R as C,b as R,j as t,r as s,s as a,m as l,f as b,W as A}from"./index-DVtOTvNj.js";import{T as y}from"./tag-U0bzhJev.js";import{C as E}from"./calendar-D1u3oVFq.js";import{M as L}from"./map-pin-CWx7b3tC.js";import{P}from"./paperclip-BbmV_5yT.js";function D({children:n,className:e=""}){return t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${e}`,children:n})}function J({role:n="client",job:e,onClose:N,onAcceptClick:w,onNegotiationClick:x,reduceMotion:d}){const[c,v]=s.useState(!1),i=s.useMemo(()=>a(e?.description||"",800),[e?.description]),M=i.length>80,j=c?i:i.slice(0,80),o=s.useMemo(()=>a(e?.title||"",120),[e?.title]),p=s.useMemo(()=>a(e?.client||"",120),[e?.client]),u=s.useMemo(()=>a(e?.time||"",40),[e?.time]),h=s.useMemo(()=>a(e?.category||"",80),[e?.category]),f=s.useMemo(()=>a(e?.deadline||"",80),[e?.deadline]),g=s.useMemo(()=>a(e?.distance||"",40),[e?.distance]),m={scale:.97},k=d?{}:{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:12}};return t.jsxs(l.div,{layout:!0,variants:k,initial:"initial",animate:"animate",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(r,T)=>{T.offset.x<-120&&N?.(e.id)},whileHover:d?{}:{scale:1.01},className:"relative rounded-2xl glass-strong card-tight hover-card mb-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[o&&t.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground truncate",children:o}),t.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[e?.type&&t.jsx(D,{className:"bg-background/10 text-muted-foreground border border-border/30",children:e.type==="onsite"?"Onsite":e.type==="remote"?"Remote":"Micro"}),p&&t.jsx("span",{className:"truncate max-w-[9rem] sm:max-w-xs",children:p})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e?.fee!=null&&t.jsx("div",{className:"text-sm font-semibold text-foreground",children:e.feeLabel||b(e.fee)}),u&&t.jsx("div",{className:"text-[11px] text-muted-foreground",children:u})]})]}),i&&t.jsxs("p",{className:"mt-2 text-xs sm:text-sm text-foreground/90 leading-snug",children:[j,M&&t.jsx("button",{onClick:()=>v(r=>!r),className:"ml-2 text-accent text-xs hover:underline transition-colors duration-320","aria-expanded":c,children:c?"Ringkas":"Detail"})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px] sm:text-xs text-muted-foreground items-center",children:[h&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(y,{className:"h-3 w-3 sm:h-4 sm:w-4 text-primary"}),h]}),Array.isArray(e?.skills)&&e.skills.length>0&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(y,{className:"h-3 w-3 sm:h-4 sm:w-4 text-secondary"}),e.skills.slice(0,3).map(r=>a(r,24)).join(", ")]}),f&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(E,{className:"h-3 w-3 sm:h-4 sm:w-4 text-accent"}),f]}),g&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(L,{className:"h-3 w-3 sm:h-4 sm:w-4 text-accent"}),g]}),Array.isArray(e?.attachments)&&e.attachments.length>0&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(P,{className:"h-3 w-3 sm:h-4 sm:w-4 text-primary"}),e.attachments.length]}),e?.paymentMethod&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-secondary"}),e.paymentMethod==="cash"?"Tunai":"Wallet"]})]}),n==="worker"?t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx(l.button,{whileTap:m,onClick:()=>w?.(e),className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-primary text-primary-foreground px-3 py-2 text-xs sm:text-sm font-semibold shadow-sm hover:bg-primary/90 transition-all duration-320","aria-label":"Terima pekerjaan",type:"button",children:"Terima"}),t.jsx(l.button,{whileTap:m,onClick:()=>x?.(e),className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl border border-accent text-accent px-3 py-2 text-xs sm:text-sm font-medium hover:bg-accent/10 transition-all duration-320","aria-label":"Negosiasi",type:"button",children:"Negosiasi"})]}):t.jsx("div",{className:"mt-3",children:t.jsx(l.button,{whileTap:m,onClick:()=>x?.(e),className:"w-full inline-flex items-center justify-center gap-2 rounded-xl border border-secondary text-primary px-3 py-2 text-xs sm:text-sm font-medium hover:bg-secondary/10 transition-all duration-320","aria-label":"Lihat negosiasi",type:"button",children:"Lihat Negosiasi"})})]})}const S=C.memo(n=>{const e=R();return!n.visible||!n.job?null:t.jsx(J,{...n,reduceMotion:e})});export{S as J};
