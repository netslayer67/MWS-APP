import{r as N,j as e}from"./index-BAvDP42J.js";import{e as v,p as y,t as w}from"./interventionUtils-Dp4HTZyD.js";const u=[{bg:"from-[#ecfeff]/90 via-[#fef3c7]/80 to-white/80 dark:from-white/5 dark:via-white/5 dark:to-white/0",accent:"bg-[#22d3ee]/70",aos:"fade-up"},{bg:"from-[#f5f3ff]/90 via-[#ede9fe]/85 to-white/80 dark:from-white/10 dark:via-white/5 dark:to-white/5",accent:"bg-[#a855f7]/60",aos:"fade-up-right"},{bg:"from-[#fff7ed]/90 via-[#fef3c7]/85 to-white/80 dark:from-white/5 dark:via-white/5 dark:to-white/0",accent:"bg-[#fb923c]/60",aos:"fade-up-left"},{bg:"from-[#ecfccb]/90 via-[#d9f99d]/80 to-white/80 dark:from-white/5 dark:via-white/5 dark:to-white/0",accent:"bg-[#4ade80]/70",aos:"zoom-in-up"}],$=50,k={tier1:1,tier2:2,tier3:3},C=(t=[])=>{const r=t.filter(a=>a.tierCode&&a.tierCode!=="tier1");if(!r.length)return{mode:"universal",items:[]};const l=r.reduce((a,c)=>Math.max(a,k[c.tierCode]||0),0);return{mode:"focused",items:r.filter(a=>(k[a.tierCode]||0)===l)}},R=N.memo(({students:t,TierPill:r,ProgressBadge:l,dense:p=!1,showActions:a=!1,onView:c,onUpdate:h,selectable:x=!1,selectedIds:b=[],onSelect:o})=>{const n=b||[],j=t.slice(0,Math.min($,t.length));return e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-[28px] border border-white/30 dark:border-white/10 bg-gradient-to-br from-white/90 via-white/70 to-white/60 dark:from-white/5 dark:via-white/5 dark:to-white/0 shadow-[0_25px_70px_rgba(15,23,42,0.18)]","data-aos":"fade-up","data-aos-delay":"220",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"mtss-table-head",children:e.jsxs("tr",{className:`${p?"text-[11px]":""} mtss-table-head-row`,children:[e.jsx("th",{className:"py-3 w-2"}),x&&e.jsx("th",{className:"py-3 font-semibold text-left w-12 text-slate-500 tracking-[0.2em] uppercase",children:"Select"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Student"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Class / Mentor"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Supports"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Tier"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Progress"}),e.jsx("th",{className:"py-3 font-semibold text-left tracking-[0.2em] uppercase text-xs text-slate-500",children:"Next Update"}),a&&e.jsx("th",{className:"py-3 font-semibold text-center tracking-[0.2em] uppercase text-xs text-slate-500",children:"Action"})]})}),e.jsx("tbody",{children:j.map((s,i)=>{const d=s.id||s._id||s.name,f=n.includes(s.id||s._id),g=u[i%u.length];return e.jsx(_,{index:i,student:s,TierPill:r,ProgressBadge:l,showActions:a,onView:c,onUpdate:h,selectable:x,selected:f,onSelect:o,theme:g},d)})})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:j.map((s,i)=>{const d=s.id||s._id||s.name,f=n.includes(s.id||s._id),g=u[i%u.length];return e.jsx(S,{index:i,student:s,TierPill:r,ProgressBadge:l,showActions:a,onView:c,onUpdate:h,selectable:x,selected:f,onSelect:o,theme:g},d)})})]})}),_=N.memo(({student:t,TierPill:r,ProgressBadge:l,showActions:p,onView:a,onUpdate:c,selectable:h,selected:x,onSelect:b,theme:o})=>{const n=v(t.interventions),s=y(n)?.tier||t.tier,i=t.className||"—",d=t.mentor||t.profile?.mentor||"-",f=C(n),g=m=>`px-2 py-1 rounded-2xl text-[11px] font-semibold bg-gradient-to-r ${m.accent}`;return e.jsxs("tr",{className:`mtss-table-row border-b border-transparent last:border-none bg-gradient-to-r ${o?.bg} relative`,"data-aos":o?.aos||"fade-up","data-aos-delay":"180","data-aos-duration":"450",children:[e.jsx("td",{className:"w-1",children:e.jsx("span",{className:`block w-1 h-full ${o?.accent||"bg-primary/40"} rounded-full`})}),h&&e.jsx("td",{className:"py-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-border/60",checked:x,onChange:()=>b?.(t)})}),e.jsxs("td",{className:"py-4",children:[e.jsx("button",{type:"button",onClick:()=>a?.(t),className:"text-left font-semibold text-foreground dark:text-white hover:text-primary transition",children:t.name}),e.jsx("div",{className:"text-xs text-muted-foreground dark:text-white/60",children:t.grade})]}),e.jsxs("td",{className:"py-4 text-sm text-muted-foreground",children:[e.jsx("div",{className:"font-medium text-foreground dark:text-white",children:i}),e.jsxs("div",{className:"text-xs text-muted-foreground dark:text-white/70",children:["Mentor: ",d]})]}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex flex-wrap gap-2 max-w-[320px]",children:f.mode==="universal"?e.jsx("span",{className:"px-3 py-1 rounded-2xl text-[11px] font-semibold bg-emerald-50 text-emerald-700 border border-emerald-100",children:"Universal"}):f.items.map(m=>e.jsxs("span",{className:`${g(m)} shadow-sm`,children:[e.jsx("span",{className:"mr-2",children:m.label}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full border ${w[m.tierCode]||w.tier1} text-[10px] uppercase tracking-wide`,children:m.tier})]},`${t.id||t._id}-${m.type}`))})}),e.jsx("td",{className:"py-4",children:e.jsx(r,{tier:s})}),e.jsx("td",{className:"py-4",children:e.jsx(l,{status:t.progress})}),e.jsx("td",{className:"py-4 text-muted-foreground",children:t.nextUpdate}),p&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("button",{onClick:()=>a?.(t),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-gradient-to-r from-[#0ea5e9]/85 via-[#6366f1]/85 to-[#34d399]/80 text-white shadow-sm hover:shadow-md transition",children:"View"}),e.jsx("button",{onClick:()=>c?.(t),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-gradient-to-r from-[#fbbf24]/80 to-[#fb7185]/80 text-white shadow-sm hover:shadow-md transition",children:"Update"})]})})]})});_.displayName="StudentsTableDesktopRow";const S=N.memo(({student:t,TierPill:r,ProgressBadge:l,showActions:p,onView:a,onUpdate:c,selectable:h,selected:x,onSelect:b,theme:o})=>{const n=v(t.interventions),s=y(n)?.tier||t.tier,i=C(n);return e.jsxs("div",{className:`glass glass-card rounded-2xl p-4 flex flex-col gap-3 shadow-[0_12px_35px_rgba(15,23,42,0.12)] bg-gradient-to-br ${o?.bg}`,"data-aos":o?.aos||"fade-up","data-aos-delay":"120","data-aos-duration":"450",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",onClick:()=>a?.(t),className:"text-sm font-semibold text-foreground hover:text-primary transition",children:t.name}),e.jsxs("span",{className:"block text-xs text-muted-foreground",children:[t.grade," · ",t.className||"—"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:t.nextUpdate}),h&&e.jsx("input",{type:"checkbox",className:"rounded border-border/60",checked:x,onChange:()=>b?.(t)})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.mode==="universal"?e.jsx("span",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-700",children:"Universal"}):i.items.map(d=>e.jsxs("span",{className:"rounded-2xl border border-white/60 dark:border-white/10 px-3 py-1 text-[11px] font-semibold text-foreground dark:text-white/80",children:[d.label," · ",d.tier]},`${t.id||t._id}-mobile-${d.type}`))}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(r,{tier:s,compact:!0}),e.jsx(l,{status:t.progress,compact:!0})]}),p&&e.jsxs("div",{className:"flex items-center gap-2 justify-end pt-2",children:[e.jsx("button",{onClick:()=>a?.(t),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-gradient-to-r from-[#0ea5e9]/85 via-[#6366f1]/85 to-[#34d399]/80 text-white shadow-sm hover:shadow-md transition",children:"View"}),e.jsx("button",{onClick:()=>c?.(t),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-gradient-to-r from-[#fbbf24]/80 to-[#fb7185]/80 text-white shadow-sm hover:shadow-md transition",children:"Update"})]})]})});S.displayName="StudentsTableMobileCard";R.displayName="StudentsTable";export{R as S};
