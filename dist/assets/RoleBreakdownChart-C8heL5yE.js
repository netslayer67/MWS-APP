import{r as i,j as t}from"./index-BeQwOtyQ.js";import{a as u,R as n}from"./CategoricalChart-BMqhUz2Q.js";import{P as x,a as h}from"./PieChart-sikPtFhh.js";import{C as f}from"./tooltipContext-DiIpVtEU.js";import{C,T as m,a as g,X as j,Y as v}from"./CartesianChart-BRX7XIZz.js";import{B as b}from"./barSelectors-cWraKwqT.js";import"./ErrorBarContext-BLoWLUfG.js";var y=["axis","item"],N=i.forwardRef((e,o)=>i.createElement(C,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:y,tooltipPayloadSearcher:u,categoricalChartProps:e,ref:o}));const R={student:"#8884d8",staff:"#82ca9d",teacher:"#ffc658",admin:"#ff7300",directorate:"#00ff00",superadmin:"#ff0000"},T=i.memo(({roleBreakdown:e=[],viewMode:o="bar"})=>{if(!e||e.length===0)return null;const d=i.useMemo(()=>e.map(a=>({name:a.role.charAt(0).toUpperCase()+a.role.slice(1),submitted:a.submitted,total:a.total,submissionRate:a.submissionRate,avgPresence:a.avgPresence,avgCapacity:a.avgCapacity})),[e]),c=i.useMemo(()=>e.map(a=>({name:a.role.charAt(0).toUpperCase()+a.role.slice(1),value:a.submitted,total:a.total})),[e]),p=({active:a,payload:s,label:l})=>{if(a&&s&&s.length){const r=s[0].payload;return t.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[t.jsx("p",{className:"font-medium text-foreground",children:l}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted: ",r.submitted,"/",r.total," (",r.submissionRate,"%)"]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Avg Presence: ",r.avgPresence,"/10"]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Avg Capacity: ",r.avgCapacity,"/10"]})]})}return null};return o==="pie"?t.jsx("div",{className:"h-80",children:t.jsx(n,{width:"100%",height:"100%",children:t.jsxs(x,{children:[t.jsx(h,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,value:s,total:l})=>`${a}: ${s}/${l}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:c.map((a,s)=>t.jsx(f,{fill:R[a.name.toLowerCase()]||"#8884d8"},`cell-${s}`))}),t.jsx(m,{})]})})}):t.jsx("div",{className:"h-80",children:t.jsx(n,{width:"100%",height:"100%",children:t.jsxs(N,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[t.jsx(g,{strokeDasharray:"3 3",className:"opacity-30"}),t.jsx(j,{dataKey:"name",className:"text-xs",tick:{fill:"currentColor"}}),t.jsx(v,{className:"text-xs",tick:{fill:"currentColor"}}),t.jsx(m,{content:t.jsx(p,{})}),t.jsx(b,{dataKey:"submitted",fill:"#8884d8",radius:[4,4,0,0]})]})})})});T.displayName="RoleBreakdownChart";export{T as default};
