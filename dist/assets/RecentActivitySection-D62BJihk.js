import{r as i,aj as $,at as ge,j as e,X as ve}from"./index-By89xKr2.js";import{U as J}from"./user-C8RE51YT.js";import{C as ye}from"./calendar-BB_Xw2y-.js";import{A as W}from"./activity-Bo8CMFfu.js";import{T as je}from"./trending-up-zM5cQDrC.js";import{T as F}from"./EmotionalCheckinDashboard-CyLoJUZ-.js";import{c as R,k as Q,ay as H,az as Z,aA as be,aC as Ne,aM as Pe,aB as V,v as ee,ak as te,R as we,al as Ae,A as Ie,am as Se,G as Ee,t as ae,ao as Ce,aN as Le,ap as De,y as ke,Q as _,aO as se,L as re,aq as Oe,h as ne,aP as G,aj as X,B as Te,J as We,D as E,K as Me,au as Re,V as _e,w as Ke,X as Be,Y as ze,a5 as Ue,a7 as Fe,a8 as Ve,a9 as Ge,a6 as Xe}from"./CartesianChart-B-w0p4KK.js";import{A as Ye,D as qe}from"./ActivePoints-rE9-NH9d.js";import{S as $e}from"./ErrorBarContext-Ks1SC-_J.js";import{E as Je}from"./eye-DXXiEsU-.js";import{C as Qe}from"./clock-Lwcydpfn.js";import"./funnel-9gagQDpy.js";import"./users-DVOWKIDY.js";import"./building-XOT6oT02.js";import"./circle-check-big-6bGET3q7.js";var le=(t,s,r,a)=>H(t,"xAxis",s,a),ie=(t,s,r,a)=>Z(t,"xAxis",s,a),oe=(t,s,r,a)=>H(t,"yAxis",r,a),de=(t,s,r,a)=>Z(t,"yAxis",r,a),He=R([Q,le,oe,ie,de],(t,s,r,a,o)=>Pe(t,"xAxis")?V(s,a,!1):V(r,o,!1)),Ze=(t,s,r,a,o)=>o;function et(t){return t.type==="line"}var tt=R([Ne,Ze],(t,s)=>t.filter(et).find(r=>r.id===s)),at=R([Q,le,oe,ie,de,tt,He,be],(t,s,r,a,o,d,m,l)=>{var{chartData:u,dataStartIndex:x,dataEndIndex:f}=l;if(!(d==null||s==null||r==null||a==null||o==null||a.length===0||o.length===0||m==null)){var{dataKey:p,data:n}=d,c;if(n!=null&&n.length>0?c=n:c=u?.slice(x,f+1),c!=null)return wt({layout:t,xAxis:s,yAxis:r,xAxisTicks:a,yAxisTicks:o,dataKey:p,bandSize:m,displayedData:c})}}),st=["id"],rt=["type","layout","connectNulls","needClip"],nt=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Y(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function y(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Y(Object(r),!0).forEach(function(a){lt(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function lt(t,s,r){return(s=it(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function it(t){var s=ot(t,"string");return typeof s=="symbol"?s:s+""}function ot(t,s){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function K(t,s){if(t==null)return{};var r,a,o=dt(t,s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)r=d[a],s.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function dt(t,s){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(s.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function I(){return I=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},I.apply(null,arguments)}var ct=t=>{var{dataKey:s,name:r,stroke:a,legendType:o,hide:d}=t;return[{inactive:d,dataKey:s,type:o,color:a,value:ae(r,s),payload:t}]};function mt(t){var{dataKey:s,data:r,stroke:a,strokeWidth:o,fill:d,name:m,hide:l,unit:u}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:o,fill:d,dataKey:s,nameKey:void 0,name:ae(m,s),hide:l,type:t.tooltipType,color:t.stroke,unit:u}}}var ce=(t,s)=>"".concat(s,"px ").concat(t-s,"px");function ut(t,s){for(var r=t.length%2!==0?[...t,0]:t,a=[],o=0;o<s;++o)a=[...a,...r];return a}var xt=(t,s,r)=>{var a=r.reduce((p,n)=>p+n);if(!a)return ce(s,t);for(var o=Math.floor(t/a),d=t%a,m=s-t,l=[],u=0,x=0;u<r.length;x+=r[u],++u)if(x+r[u]>d){l=[...r.slice(0,u),d-x];break}var f=l.length%2===0?[0,m]:[m];return[...ut(r,o),...l,...f].map(p=>"".concat(p,"px")).join(", ")};function pt(t,s){var r;if(i.isValidElement(t))r=i.cloneElement(t,s);else if(typeof t=="function")r=t(s);else{var a=$("recharts-line-dot",typeof t!="boolean"?t.className:"");r=i.createElement(qe,I({},s,{className:a}))}return r}function ht(t,s){return t==null?!1:s?!0:t.length===1}function ft(t){var{clipPathId:s,points:r,props:a}=t,{dot:o,dataKey:d,needClip:m}=a;if(!ht(r,o))return null;var{id:l}=a,u=K(a,st),x=se(o),f=Ke(u),p=_(o,!0),n=r.map((g,h)=>{var v=y(y(y({key:"dot-".concat(h),r:3},f),p),{},{index:h,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:r});return pt(o,v)}),c={clipPath:m?"url(#clipPath-".concat(x?"":"dots-").concat(s,")"):void 0};return i.createElement(re,I({className:"recharts-line-dots",key:"dots"},c),n)}function gt(t){var{showLabels:s,children:r,points:a}=t,o=i.useMemo(()=>a?.map(d=>{var m={x:d.x,y:d.y,width:0,height:0};return y(y({},m),{},{value:d.value,payload:d.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return i.createElement(Re,{value:s?o:null},r)}function q(t){var{clipPathId:s,pathRef:r,points:a,strokeDasharray:o,props:d}=t,{type:m,layout:l,connectNulls:u,needClip:x}=d,f=K(d,rt),p=y(y({},_(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:x?"url(#clipPath-".concat(s,")"):void 0,points:a,type:m,layout:l,connectNulls:u,strokeDasharray:o??d.strokeDasharray});return i.createElement(i.Fragment,null,a?.length>1&&i.createElement(_e,I({},p,{pathRef:r})),i.createElement(ft,{points:a,clipPathId:s,props:d}))}function vt(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function yt(t){var{clipPathId:s,props:r,pathRef:a,previousPointsRef:o,longestAnimatedLengthRef:d}=t,{points:m,strokeDasharray:l,isAnimationActive:u,animationBegin:x,animationDuration:f,animationEasing:p,animateNewValues:n,width:c,height:g,onAnimationEnd:h,onAnimationStart:v}=r,b=o.current,w=Te(r,"recharts-line-"),[N,C]=i.useState(!1),L=!N,k=i.useCallback(()=>{typeof h=="function"&&h(),C(!1)},[h]),O=i.useCallback(()=>{typeof v=="function"&&v(),C(!0)},[v]),A=vt(a.current),D=d.current;return i.createElement(gt,{points:m,showLabels:L},r.children,i.createElement(We,{animationId:w,begin:x,duration:f,isActive:u,easing:p,onAnimationEnd:k,onAnimationStart:O,key:w},P=>{var xe=E(D,A+D,P),T=Math.min(xe,A),S;if(u)if(l){var pe="".concat(l).split(/[,\s]+/gim).map(j=>parseFloat(j));S=xt(T,A,pe)}else S=ce(A,T);else S=l==null?void 0:String(l);if(b){var he=b.length/m.length,B=P===1?m:m.map((j,fe)=>{var z=Math.floor(fe*he);if(b[z]){var U=b[z];return y(y({},j),{},{x:E(U.x,j.x,P),y:E(U.y,j.y,P)})}return n?y(y({},j),{},{x:E(c*2,j.x,P),y:E(g/2,j.y,P)}):y(y({},j),{},{x:j.x,y:j.y})});return o.current=B,i.createElement(q,{props:r,points:B,clipPathId:s,pathRef:a,strokeDasharray:S})}return P>0&&A>0&&(o.current=m,d.current=T),i.createElement(q,{props:r,points:m,clipPathId:s,pathRef:a,strokeDasharray:S})}),i.createElement(Me,{label:r.label}))}function jt(t){var{clipPathId:s,props:r}=t,a=i.useRef(null),o=i.useRef(0),d=i.useRef(null);return i.createElement(yt,{props:r,clipPathId:s,previousPointsRef:a,longestAnimatedLengthRef:o,pathRef:d})}var bt=(t,s)=>({x:t.x,y:t.y,value:t.value,errorVal:ne(t.payload,s)});class Nt extends i.Component{render(){var s,{hide:r,dot:a,points:o,className:d,xAxisId:m,yAxisId:l,top:u,left:x,width:f,height:p,id:n,needClip:c}=this.props;if(r)return null;var g=$("recharts-line",d),h=n,{r:v=3,strokeWidth:b=2}=(s=_(a,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},w=se(a),N=v*2+b;return i.createElement(i.Fragment,null,i.createElement(re,{className:g},c&&i.createElement("defs",null,i.createElement(Oe,{clipPathId:h,xAxisId:m,yAxisId:l}),!w&&i.createElement("clipPath",{id:"clipPath-dots-".concat(h)},i.createElement("rect",{x:x-N/2,y:u-N/2,width:f+N,height:p+N}))),i.createElement($e,{xAxisId:m,yAxisId:l,data:o,dataPointFormatter:bt,errorBarOffset:0},i.createElement(jt,{props:this.props,clipPathId:h}))),i.createElement(Ye,{activeDot:this.props.activeDot,points:o,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var me={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ee.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Pt(t){var s=ee(t,me),{activeDot:r,animateNewValues:a,animationBegin:o,animationDuration:d,animationEasing:m,connectNulls:l,dot:u,hide:x,isAnimationActive:f,label:p,legendType:n,xAxisId:c,yAxisId:g,id:h}=s,v=K(s,nt),{needClip:b}=Ce(c,g),w=Le(),N=De(),C=te(),L=ke(P=>at(P,c,g,C,h));if(N!=="horizontal"&&N!=="vertical"||L==null||w==null)return null;var{height:k,width:O,x:A,y:D}=w;return i.createElement(Nt,I({},v,{id:h,connectNulls:l,dot:u,activeDot:r,animateNewValues:a,animationBegin:o,animationDuration:d,animationEasing:m,isAnimationActive:f,hide:x,label:p,legendType:n,xAxisId:c,yAxisId:g,points:L,layout:N,height:k,width:O,left:A,top:D,needClip:b}))}function wt(t){var{layout:s,xAxis:r,yAxis:a,xAxisTicks:o,yAxisTicks:d,dataKey:m,bandSize:l,displayedData:u}=t;return u.map((x,f)=>{var p=ne(x,m);if(s==="horizontal"){var n=G({axis:r,ticks:o,bandSize:l,entry:x,index:f}),c=X(p)?null:a.scale(p);return{x:n,y:c,value:p,payload:x}}var g=X(p)?null:r.scale(p),h=G({axis:a,ticks:d,bandSize:l,entry:x,index:f});return g==null||h==null?null:{x:g,y:h,value:p,payload:x}}).filter(Boolean)}function At(t){var s=ee(t,me),r=te();return i.createElement(we,{id:s.id,type:"line"},a=>i.createElement(i.Fragment,null,i.createElement(Ae,{legendPayload:ct(s)}),i.createElement(Ie,{fn:mt,args:s}),i.createElement(Se,{type:"line",id:a,data:s.data,xAxisId:s.xAxisId,yAxisId:s.yAxisId,zAxisId:0,dataKey:s.dataKey,hide:s.hide,isPanorama:r}),i.createElement(Pt,I({},s,{id:a}))))}var M=i.memo(At);M.displayName="Line";var It=["axis"],St=i.forwardRef((t,s)=>i.createElement(Be,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:It,tooltipPayloadSearcher:ze,categoricalChartProps:t,ref:s}));const ue=i.memo(({user:t,isOpen:s,onClose:r})=>{const[a,o]=i.useState(null),[d,m]=i.useState(!1),[l,u]=i.useState("month");i.useEffect(()=>{s&&t?.id&&x()},[s,t,l]);const x=async()=>{if(t?.id){m(!0);try{console.log("Fetching trends for user:",t.id,"period:",l);const n=await ge(t.id,l);console.log("User trends response:",n.data),o(n.data)}catch(n){console.error("Error fetching user trends:",n),o(null)}finally{m(!1)}}};if(!s||!t)return null;const f=({active:n,payload:c,label:g})=>{if(n&&c&&c.length){const h=c[0]?.payload;return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg max-w-xs",children:[e.jsx("p",{className:"font-medium text-foreground mb-2",children:new Date(g).toLocaleDateString()}),c.map((v,b)=>e.jsxs("p",{className:"text-sm",style:{color:v.color},children:[v.name,": ",v.value,"/10"]},b)),h&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50",children:[h.selectedMoods&&h.selectedMoods.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Moods: ",h.selectedMoods.join(", ")]}),h.weatherType&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weather: ",h.weatherType]}),h.needsSupport&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:"Support requested"})]})]})}return null},p=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"semester",label:"Semester"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t.role," • ",t.department]})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ye,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Period:"}),e.jsx("div",{className:"flex gap-1",children:p.map(n=>e.jsx("button",{onClick:()=>u(n.id),className:`px-3 py-1 text-xs rounded-full transition-colors ${l===n.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:n.label},n.id))})]}),a&&a.summary&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Avg Presence"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[a.summary.averagePresence?.toFixed(1)||0,"/10"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Avg Capacity"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[a.summary.averageCapacity?.toFixed(1)||0,"/10"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Support Needed"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[a.summary.supportNeededCount||0," times"]})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Emotional Stability"})]}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[a.summary.emotionalStability?(a.summary.emotionalStability*100).toFixed(0):0,"%"]})]})]}),a&&a.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"Mood Patterns"}),a.summary.moodPatterns&&Object.keys(a.summary.moodPatterns).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(a.summary.moodPatterns).sort(([,n],[,c])=>c-n).slice(0,5).map(([n,c])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${c/Math.max(...Object.values(a.summary.moodPatterns))*100}%`}})}),e.jsx("span",{className:"text-xs text-muted-foreground w-6 text-right",children:c})]})]},n))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No mood data available"})]}),e.jsxs("div",{className:"glass glass-card p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"Weather Patterns"}),a.summary.weatherPatterns&&Object.keys(a.summary.weatherPatterns).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(a.summary.weatherPatterns).sort(([,n],[,c])=>c-n).slice(0,5).map(([n,c])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:n.replace("-"," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${c/Math.max(...Object.values(a.summary.weatherPatterns))*100}%`}})}),e.jsx("span",{className:"text-xs text-muted-foreground w-6 text-right",children:c})]})]},n))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No weather data available"})]})]}),a&&a.summary&&a.summary.insights&&a.summary.insights.length>0&&e.jsxs("div",{className:"glass glass-card p-4 mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground mb-3",children:"AI Insights"}),e.jsx("div",{className:"space-y-2",children:a.summary.insights.map((n,c)=>e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/20 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-foreground",children:n})]},c))})]}),e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Emotional Trends"}),d?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading trends..."})}):a?.trends&&a.trends.length>0?e.jsx("div",{className:"h-64",children:e.jsx(Ue,{width:"100%",height:"100%",children:e.jsxs(St,{data:a.trends,children:[e.jsx(Fe,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Ve,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickFormatter:n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(Ge,{domain:[0,10],className:"text-xs",tick:{fill:"currentColor"}}),e.jsx(Xe,{content:e.jsx(f,{})}),e.jsx(M,{type:"monotone",dataKey:"presenceLevel",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10b981",strokeWidth:2},name:"Presence"}),e.jsx(M,{type:"monotone",dataKey:"capacityLevel",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2},name:"Capacity"})]})})}):e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"No trend data available"})})]}),a?.weeklyAverages&&a.weeklyAverages.length>0&&e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Weekly Emotional Trends"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.weeklyAverages.map((n,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/40 rounded-lg border border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-lg",children:n.dominantWeather==="sunny"?"☀️":n.dominantWeather==="cloudy"?"☁️":n.dominantWeather==="rain"?"🌧️":n.dominantWeather==="storm"?"⛈️":n.dominantWeather==="tornado"?"🌪️":"❄️"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:["Week of ",n.week]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.dominantMoods?.join(", ")," • ",n.checkinCount," check-ins"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["P: ",n.avgPresence,"/10"]}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["C: ",n.avgCapacity,"/10"]})]})]},c))})]}),a?.trends&&a.trends.length>0&&e.jsxs("div",{className:"glass glass-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Recent Check-ins"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.trends.slice(-10).reverse().map((n,c)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-card/40 rounded-lg border border-border/40",children:[e.jsx("div",{className:"text-lg flex-shrink-0",children:n.weatherType==="sunny"?"☀️":n.weatherType==="cloudy"?"☁️":n.weatherType==="rain"?"🌧️":n.weatherType==="storm"?"⛈️":n.weatherType==="tornado"?"🌪️":"❄️"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:new Date(n.date).toLocaleDateString()}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["P: ",n.presenceLevel,"/10"]}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["C: ",n.capacityLevel,"/10"]})]})]}),n.selectedMoods&&n.selectedMoods.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Moods: ",n.selectedMoods.join(", ")]}),n.details&&e.jsxs("p",{className:"text-sm text-foreground italic",children:['"',n.details.length>100?n.details.substring(0,100)+"...":n.details,'"']}),n.needsSupport&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Support requested"]})})]})]},c))})]})]})]})})});ue.displayName="UserDetailModal";const Et=i.memo(({activities:t=[]})=>{const[s,r]=i.useState(null),[a,o]=i.useState(!1);if(!t||t.length===0)return null;const d=l=>{r({id:l.userId,name:l.userName,role:l.role,department:l.department}),o(!0)},m=l=>({sunny:"☀️",cloudy:"☁️",rain:"🌧️",storm:"⛈️",tornado:"🌪️",snow:"❄️"})[l]||"🌤️";return e.jsxs("div",{className:"glass glass-card transition-all duration-300",children:[e.jsx("div",{className:"glass__refract"}),e.jsx("div",{className:"glass__noise"}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(W,{className:"w-4 h-4 text-primary"}),e.jsxs("h2",{className:"text-base md:text-lg font-semibold text-foreground",children:["Recent Activity (",t.length,")"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map((l,u)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-card/20 border border-border/20 hover:bg-card/40 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("button",{onClick:()=>d(l),className:"font-medium text-foreground text-sm hover:text-primary transition-colors text-left",children:l.userName}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize px-2 py-1 rounded-full bg-muted/50",children:l.role}),e.jsx("span",{className:"text-lg",children:m(l.weatherType)}),e.jsx("button",{onClick:()=>d(l),className:"ml-auto p-1 hover:bg-muted/50 rounded transition-colors",title:"View user details",children:e.jsx(Je,{className:"w-3 h-3 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[e.jsxs("span",{children:["Presence: ",l.presenceLevel,"/10"]}),e.jsxs("span",{children:["Capacity: ",l.capacityLevel,"/10"]}),l.department&&e.jsx("span",{className:"capitalize",children:l.department})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(l.submittedAt).toLocaleString()})]}),l.selectedMoods&&l.selectedMoods.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[l.selectedMoods.slice(0,3).map((x,f)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary capitalize",children:x},f)),l.selectedMoods.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",l.selectedMoods.length-3," more"]})]})]})]},l.id||u))})]}),e.jsx(ue,{user:s,isOpen:a,onClose:()=>{o(!1),r(null)}})]})});Et.displayName="RecentActivitySection";export{Et as default};
