import{c as N,r as n,J as R,b as $,j as e,D as B,m as L,p as _}from"./index-CDbc_zXv.js";import{P as D}from"./StatusPills-DW1QfwWa.js";import{g as z,l as I,f as F,m as G}from"./teacherDashboardUtils-CEmHpA-p.js";import{e as K,p as J,t as k,g as W}from"./interventionUtils-Dp4HTZyD.js";import{U as X}from"./users-KGmu_E7O.js";import{R as q}from"./CategoricalChart-JBeo_msF.js";import{L as O,a as v}from"./LineChart-DfnfyPSn.js";import{C as V,X as H,T as Q}from"./CartesianChart-lOEewd2Y.js";import"./shield-check-C9Gg_G61.js";import"./ActivePoints-BVvk5WEX.js";import"./ErrorBarContext-Bv1iPT2W.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],y=N("book-open",Y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ee=N("calendar-days",Z),te=n.memo(()=>{const{slug:l}=R(),c=$(),[s,x]=n.useState(null),[S,h]=n.useState(!0),[p,u]=n.useState(null),m=n.useMemo(()=>z(),[]);if(n.useEffect(()=>{let t=!0;const a=new AbortController;return(async()=>{h(!0),u(null);try{const i=await I(l,{signal:a.signal});if(!t)return;x(i?.student||null)}catch(i){if(!t||i?.name==="CanceledError"||i?.name==="AbortError")return;try{const{assignments:d=[]}=await F({},{signal:a.signal});if(!t)return;const{students:T}=G(d,m?.username||m?.name||"MTSS Mentor"),j=T.find(E=>E.slug===l);if(j){x(j);return}}catch(d){if(!t||d?.name==="CanceledError"||d?.name==="AbortError")return}u(i.response?.data?.message||i.message||"Unable to load student profile")}finally{t&&h(!1)}})(),()=>{t=!1,a.abort()}},[l,m]),S)return e.jsx("div",{className:"min-h-screen flex items-center justify-center text-muted-foreground",children:"Loading student profile…"});if(p||!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"glass glass-card p-6 text-center space-y-4",children:[e.jsx("p",{className:"text-lg font-semibold text-destructive",children:p||"Student not found"}),e.jsx("button",{className:"px-4 py-2 rounded-full bg-primary text-white",onClick:()=>c("/mtss?tab=students"),children:"Back to Students"})]})});const{profile:r}=s,g=K(s.interventions),o=J(g),M=r?.chart?.length?r.chart:[{label:"Start",date:"Start",value:0,reading:0,goal:100}],f=r?.history||[],C=r?.progressUnit||(s.type==="Attendance"||o?.label==="Attendance"?"%":s.type==="Behavior"?"pts":"wpm"),A=r?.target?Math.round(r.current/r.target*100):0,b=Array.isArray(s.teachers)&&s.teachers.length?s.teachers:Array.isArray(r?.teacherRoster)&&r.teacherRoster.length?r.teacherRoster:[],w=b.length?b.join(", "):r?.mentor||s.profile?.teacher||"TBD",U=[{label:"Grade",value:s.grade||"-",icon:y,accent:"text-primary"},{label:"Class",value:s.className||"-",icon:X,accent:"text-emerald-500"},{label:"Started",value:r?.started||"-",icon:ee,accent:"text-rose-500 dark:text-rose-300"},{label:"Mentor",value:w,icon:y,accent:"text-sky-500"}],P=[{label:"Tier",value:o?.tier||s.tier||"Tier 1",gradient:"from-[#14b8a6] via-[#3b82f6] to-[#a855f7]"},{label:"Focus",value:o?.label||s.type||"Universal Supports",gradient:"from-[#f97316] via-[#ef4444] to-[#ec4899]"},{label:"Next Update",value:s.nextUpdate||"Not scheduled",gradient:"from-[#34d399] via-[#10b981] to-[#22d3ee]"}];return e.jsxs("div",{className:"mtss-theme mtss-animated-bg min-h-screen relative overflow-hidden text-foreground dark:text-white",children:[e.jsx("div",{className:"mtss-bg-overlay"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 left-6 w-64 h-64 bg-gradient-to-br from-primary/40 to-rose/30 blur-3xl"}),e.jsx("div",{className:"absolute top-16 right-6 w-72 h-72 bg-gradient-to-br from-sky-200/40 to-emerald-200/30 blur-[130px]"}),e.jsx("div",{className:"absolute bottom-0 -right-24 w-80 h-80 bg-gradient-to-br from-amber-200/30 to-fuchsia-200/30 blur-[150px]"})]}),e.jsxs("div",{className:"relative z-20 container-tight py-10 space-y-6",children:[e.jsxs("button",{onClick:()=>window.history.length>2?c(-1):c("/mtss/teacher?tab=students"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/85 dark:bg-white/10 text-sm font-semibold shadow",children:[e.jsx(B,{className:"w-4 h-4"}),"Back to Students"]}),e.jsxs(L.section,{className:"glass glass-card rounded-[32px] overflow-hidden shadow-[0_35px_90px_rgba(15,23,42,0.2)]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#f472b6] via-[#a855f7] to-[#6366f1] text-white px-6 py-7 flex flex-wrap gap-6 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.45em] opacity-80",children:"Student Spotlight"}),e.jsx("h1",{className:"text-3xl font-black tracking-tight",children:s.name}),e.jsxs("p",{className:"text-sm opacity-90",children:[s.grade," · ",o?.label||s.type||"Universal Supports"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[P.map(t=>e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold bg-gradient-to-r ${t.gradient} text-white shadow-lg`,children:t.value},t.label)),e.jsx(D,{status:s.progress})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:U.map(t=>{const a=t.icon;return e.jsxs("div",{className:"rounded-2xl glass glass-card bg-gradient-to-br from-white/90 via-white/80 to-white/60 dark:from-white/5 dark:via-white/10 dark:to-white/5 border border-white/40 dark:border-white/10 px-4 py-3 flex items-center gap-3 shadow-sm min-h-[90px]",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white/70 dark:bg-white/10 flex items-center justify-center shadow-inner",children:e.jsx(a,{className:`w-5 h-5 ${t.accent}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.45em] text-muted-foreground",children:t.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground dark:text-white truncate",children:t.value})]})]},t.label)})}),e.jsxs("section",{className:"rounded-[30px] bg-gradient-to-br from-white/95 via-white/80 to-white/65 dark:from-white/10 dark:via-white/5 dark:to-white/5 border border-white/40 dark:border-white/10 p-6 space-y-4 shadow-inner backdrop-blur-xl",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:"Support Map"}),e.jsx("h3",{className:"text-xl font-black text-foreground dark:text-white",children:"Tier by intervention type"})]})}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:g.map(t=>e.jsxs("div",{className:"rounded-2xl border border-white/50 dark:border-white/10 bg-white/90 dark:bg-white/5 p-4 space-y-2 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground dark:text-white",children:t.label}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide px-3 py-1 rounded-full border ${k[t.tierCode]||k.tier1}`,children:t.tier})]}),e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:W(t.status)}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-white/75",children:["Focus: ",t.strategies?.length?t.strategies.join(", "):"Core supports"]})]},`support-${t.type}`))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.25fr_0.75fr]",children:[e.jsxs("div",{className:"rounded-[30px] bg-white/85 dark:bg-white/5 border border-primary/10 p-6 space-y-4 shadow-inner backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:"Growth Journey"}),e.jsx("h3",{className:"text-xl font-black text-foreground dark:text-white",children:r.strategy})]}),e.jsxs("span",{className:"text-4xl font-black bg-gradient-to-r from-primary to-rose text-transparent bg-clip-text",children:[A,"%"]})]}),e.jsx("div",{className:"h-60",children:e.jsx(q,{width:"100%",height:"100%",children:e.jsxs(O,{data:M,children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.25)"}),e.jsx(H,{dataKey:"label",stroke:"var(--muted-foreground)",fontSize:12}),e.jsx(Q,{contentStyle:{borderRadius:12,borderColor:"rgba(148,163,184,0.3)"}}),e.jsx(v,{type:"monotone",dataKey:"reading",stroke:"#ec4899",strokeWidth:3,dot:{r:4}}),e.jsx(v,{type:"monotone",dataKey:"goal",stroke:"#0ea5e9",strokeWidth:2,strokeDasharray:"8 4"})]})})}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-3 text-sm",children:[{label:"Baseline",value:r.baseline??"-",tint:"from-[#fdf2f8]/90 to-[#f5d0fe]/70",text:"text-pink-900"},{label:"Current",value:r.current??"-",tint:"from-[#ecfccb]/90 to-[#bbf7d0]/70",text:"text-emerald-900"},{label:"Target",value:r.target??"-",tint:"from-[#fef9c3]/90 to-[#fde68a]/70",text:"text-amber-900"}].map(t=>e.jsxs("div",{className:`rounded-2xl bg-gradient-to-r ${t.tint} ${t.text} dark:text-white p-3`,children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em]",children:t.label}),e.jsxs("p",{className:"text-2xl font-black",children:[t.value," ",C]})]},t.label))}),e.jsxs("div",{className:"rounded-3xl bg-gradient-to-r from-[#e0f2fe]/70 to-[#fef9c3]/70 dark:from-white/5 dark:to-white/5 border border-white/40 dark:border-white/5 p-4 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"min-w-[140px]",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:"Next Step"}),e.jsx("p",{className:"font-semibold text-foreground dark:text-white",children:r?.nextUpdate||s.nextUpdate||"Schedule reflection"})]}),e.jsxs("div",{className:"min-w-[140px]",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:"Focus Strategy"}),e.jsx("p",{className:"font-semibold text-foreground dark:text-white break-words",children:r?.strategy||"Awaiting plan"})]}),e.jsxs("div",{className:"min-w-[140px]",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:"Mentor"}),e.jsx("p",{className:"font-semibold text-foreground dark:text-white",children:w||"Unassigned"})]})]})]}),e.jsxs("div",{className:"rounded-[30px] bg-gradient-to-br from-white/90 to-white/70 dark:from-white/10 dark:to-white/5 border border-white/50 dark:border-white/10 p-6 space-y-4 shadow backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:"Mentor Pulse"}),e.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-white",children:"Recent reflections"})]})]}),e.jsx("div",{className:"space-y-3 text-sm max-h-72 overflow-y-auto pr-2 custom-scroll",children:f.length?f.map((t,a)=>e.jsxs("div",{className:"rounded-2xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/5 px-4 py-3 shadow-sm",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:t.date}),e.jsx("p",{className:"text-foreground dark:text-white",children:t.notes})]},`${t.date}-${a}`)):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No check-in notes yet."})})]})]})]})]})]})]})});te.displayName="StudentProfilePage";export{te as default};
