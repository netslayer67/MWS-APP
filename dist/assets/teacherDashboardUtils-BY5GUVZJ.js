import{c as I,af as h,ae as P}from"./index-D_pgSSHA.js";import{S as U}from"./shield-check-D61s1X1s.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],_=I("clipboard-check",E),f=e=>e?.data?.data||{},b=(e={},r={})=>({params:r,...e}),Y=(e={},r={})=>h.get("/mtss/mentor-assignments",b(r,e)).then(f),X=(e={},r={})=>h.get("/mtss/strategies",b(r,e)).then(f),Z=(e={},r={})=>h.get("/mtss/students",b(r,e)).then(f),ee=(e,r={})=>h.get(`/mtss/students/${e}`,r).then(f),re=(e={},r={})=>h.get("/mtss/mentors",b(r,e)).then(f),te=(e,r={})=>h.post("/mtss/mentor-assignments",e,r).then(f),ae=(e,r,a={})=>h.put(`/mtss/mentor-assignments/${e}`,r,a).then(f),w=[{key:"active",label:"Active Interventions",sub:"Kids in a boost bubble",icon:U,accent:"from-[#0ea5e9]/90 via-[#818cf8]/85 to-[#34d399]/80"},{key:"due",label:"Updates Due",sub:"Check-ins waiting today",icon:_,accent:"from-[#fcd34d]/90 via-[#fb923c]/85 to-[#38bdf8]/80"},{key:"success",label:"Success Rate",sub:"Kids hitting targets",icon:P,accent:"from-[#22d3ee]/90 via-[#a855f7]/85 to-[#f472b6]/80"}],x={active:"On Track",paused:"Needs Attention",completed:"Completed",closed:"Closed"},k={active:4,paused:3,completed:2,closed:1},N={"Junior High":["Grade 7","Grade 8","Grade 9"],Elementary:["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],Kindergarten:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],Pelangi:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"]},$={"Grade 7":["Grade 7","Grade 7 - Helix"],"Grade 8":["Grade 8","Grade 8 - Cartwheel"],"Grade 9":["Grade 9","Grade 9 - Messier 87"]},S={abu:["Grade 7"],yosa:["Grade 7"],nadia:["Grade 7"],novan:["Grade 7"],rifqi:["Grade 8"],"rizki nurul hayati":["Grade 8"],anggie:["Grade 8"],dhaffa:["Grade 9"],tyas:["Grade 9"],vicki:["Grade 9"],zolla:["Grade 9"],hasan:["Grade 7","Grade 8","Grade 9"],hadi:["Grade 7","Grade 8","Grade 9"],himawan:["Grade 7","Grade 8","Grade 9"],"aria wisnuwardana":["Grade 7","Grade 8","Grade 9"],gundah:["Grade 1"],"krisalyssa esna rehulina tarigan":["Grade 1"],almia:["Grade 1"],romasta:["Grade 1"],"zavier cloudya mashareen":["Grade 1"],novia:["Grade 1"],alin:["Grade 2"],bela:["Grade 2"],maria:["Grade 2"],tria:["Grade 2"],laras:["Grade 2"],dini:["Grade 2"],restia:["Grade 2"],reza:["Grade 2"],berliana:["Grade 3"],raisa:["Grade 3"],cecil:["Grade 3"],putri:["Grade 3"],galen:["Grade 3"],salsabila:["Grade 3"],dien:["Grade 3"],ika:["Grade 3"],eva:["Grade 4"],nathasya:["Grade 4"],rike:["Grade 4"],prisy:["Grade 4"],risma:["Grade 4"],galuh:["Grade 4"],annisa:["Grade 4"],iis:["Grade 4"],tri:["Grade 5"],robby:["Grade 5"],nazmi:["Grade 5"],fadholi:["Grade 5"],devi:["Grade 6"],pipiet:["Grade 6"],afi:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],ayunda:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],diya:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],nanda:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],widya:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],yohana:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],ferlyna:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],vinka:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"],kholi:["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],latifah:["Kindergarten Pre-K","Kindergarten K1","Kindergarten K2"]},G=e=>{if(!e)return"";const r=e.toString().trim(),a=r.toLowerCase(),i=r.match(/grade\s*\d+/i);return i?i[0].replace(/grade/i,"Grade").replace(/\s+/g," ").trim():a.includes("kindergarten")||a.includes("kindy")?/(pre[-\s]?k|prekind)/i.test(r)?"Kindergarten Pre-K":/\bk\s*1\b/i.test(r)?"Kindergarten K1":/\bk\s*2\b/i.test(r)?"Kindergarten K2":"Kindergarten":r.split("-")[0].trim()},z=(e={})=>{const r=[];if(e.username&&r.push(e.username.toLowerCase()),e.name){r.push(e.name.toLowerCase());const a=e.name.split(/[\s,]+/)[0];a&&r.push(a.toLowerCase())}if(e.email){const a=e.email.split("@")[0];a&&r.push(a.toLowerCase())}for(const a of r)if(S[a])return S[a];return[]},B=(e="")=>{if(!e)return[];const r=[],a=e.match(/grade\s*\d+/gi);if(a&&a.forEach(i=>r.push(i.trim().replace(/\s+/g," ").replace(/grade/i,"Grade").trim())),/kindy|kindergarten/i.test(e)){const i=e.match(/kindy\s*[a-z0-9'\-\s]+/i);i?r.push(i[0].trim()):r.push("Kindergarten Pre-K","Kindergarten K1","Kindergarten K2")}return r},ne=(e={})=>{const a=(Array.isArray(e?.classes)?e.classes:[]).map(g=>G(g.grade)).filter(Boolean),i=B(e?.jobPosition).map(G).filter(Boolean),o=N[e?.unit]||[],l=(e?.username||e?.name||"").toLowerCase(),c=S[l]||[],t=c.length?c:z(e);let n="all",d=[];a.length?(n="classes",d=a):i.length?(n="job",d=i):t.length?(n="fallback",d=t):o.length?(n="unit",d=o):d=[];let s=Array.from(new Set(d.map(G).filter(Boolean)));!s.some(g=>/^grade\s*\d+/i.test(g)||g.toLowerCase().startsWith("kindergarten")||g.toLowerCase().startsWith("kindy"))&&o.length&&(s=o.slice());const m=(e?.unit||"").toLowerCase();return(m==="kindergarten"||m==="pelangi")&&!s.some(g=>g.toLowerCase()==="kindergarten")&&s.push("Kindergarten"),{allowedGrades:s,source:n,shouldFilterServer:!!s.length&&(n==="classes"||n==="job"),unit:e?.unit||"",label:s.length?s.join(", "):e?.unit||"All Grades"}},se=(e={})=>{const r=new Set,a=i=>{if(!i)return;r.add(i);const o=$[i];o?.length&&o.forEach(l=>r.add(l))};return(e.allowedGrades||[]).forEach(a),!r.size&&e.unit==="Junior High"&&["Grade 7","Grade 8","Grade 9"].forEach(a),Array.from(r)},p=(e,r={month:"short",day:"numeric"})=>{if(!e)return"—";try{return new Intl.DateTimeFormat("en-US",r).format(new Date(e))}catch{return"—"}},C=e=>e?e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""):`student-${Math.random().toString(36).slice(2,6)}`,R=(e,r)=>{if(!e)return"Ongoing";const a=new Date(e),i=r?new Date(r):new Date,o=Math.max(1,Math.round((i-a)/(1e3*60*60*24*7)));return`${o} wk${o>1?"s":""}`},F=e=>{if(!e)return"Tier 2";const r=e.toString().toLowerCase();return r.includes("3")?"Tier 3":r.includes("1")?"Tier 1":"Tier 2"},j=e=>e?.focusAreas?.length?e.focusAreas[0]:e?.tier==="tier3"?"Intensive Support":"Literacy & SEL",H=(e,r)=>{const a=[e?.metricLabel,e?.notes,e?.focusAreas?.join(" "),r?.type].filter(Boolean).join(" ").toLowerCase();return/attendance|present|absen/.test(a)?"%":/reading|fluency|literacy|wpm/.test(a)?"wpm":/math|numeracy|accuracy|score/.test(a)?"score":/behavior|sel|conduct|check-in|checkin/.test(a)?"pts":"score"},J=e=>{if(e?.status!=="active")return!1;const r=e?.checkIns?.slice(-1)[0]?.date;return r?(Date.now()-new Date(r).getTime())/(1e3*60*60*24)>=7:!0},O=(e={})=>{const r=e.checkIns||[];if(r.length){const l=r.length;return r.map((c,t)=>{const n=Math.round((t+1)/l*100),d=p(c.date);return{label:d,date:d,reading:n,goal:100,value:n}})}const a=e.goals||[];if(a.length){const l=a.length;let c=0;return a.map((t,n)=>{t.completed&&(c+=1);const d=Math.round(c/l*100),s=t.description||`Goal ${n+1}`;return{label:s,date:s,reading:d,goal:100,value:d}})}const i=e.status==="completed"?100:0,o=p(e.startDate);return[{label:o,date:o,reading:i,goal:100,value:i}]},V=(e={})=>(e.checkIns||[]).slice(-6).reverse().map(r=>({date:p(r.date,{month:"short",day:"numeric",year:"numeric"}),score:"—",notes:r.summary||r.nextSteps||"Check-in recorded"})),W=e=>{const r=e?.checkIns?.slice(-1)[0]?.date||e?.startDate;if(!r)return"Awaiting update";const a=new Date(r);return a.setDate(a.getDate()+7),p(a)},ie=(e=[])=>{const r=e.filter(n=>n.status==="active").length,a=e.filter(J).length,i=e.reduce((n,d)=>n+(d.goals?.length||0),0),o=e.reduce((n,d)=>n+(d.goals?.filter(s=>s.completed).length||0),0),l=i||e.length||1,c=e.filter(n=>n.status==="completed").length,t=Math.round((o||c)/l*100);return[{...w[0],value:r},{...w[1],value:a},{...w[2],value:`${Number.isFinite(t)?t:0}%`}]},oe=(e=[],r="MTSS Mentor")=>{const a=new Map;e.forEach(t=>{const n=j(t),d=F(t.tier),s=t.status||"active",v=W(t),m=O(t),g=V(t),K=t.goals||[],D=K.filter(u=>u.completed).length;(t.studentIds||[]).forEach(u=>{const y=u?._id?.toString?.()||u?.id||u;if(!y)return;const M=G(u?.currentGrade||u?.classes?.[0]?.grade||u?.unit||u?.class||"-"),L=H(t,u),T={id:y,assignmentId:t._id?.toString?.()||null,slug:u?.slug||C(u?.name),name:u?.name||"Student",grade:M,type:n,tier:d,progress:x[s]||"On Track",nextUpdate:v,statusKey:s,profile:{teacher:r,mentor:t.mentorId?.name||r,type:n,strategy:t.focusAreas?.join(", ")||`Support focus - ${d}`,started:p(t.startDate),duration:R(t.startDate,t.endDate),baseline:K.length?0:null,current:K.length?D:t.checkIns?.length||(s==="completed"?1:0),target:K.length||Math.max(t.checkIns?.length||1,1),progressUnit:L,chart:m,history:g}},A=a.get(y);(!A||k[s]>k[A.statusKey])&&a.set(y,T)})});const o=Array.from(a.values()).sort((t,n)=>k[n.statusKey]-k[t.statusKey]),l=o[0]?.profile?.chart||[],c=o[0]?`${o[0].tier} ${o[0].type}`:null;return{students:o.map(({statusKey:t,...n})=>n),spotlightChart:l,focusLabel:c}},de=(e=[],r=[],a={allowedGrades:[]})=>{const i=new Map(r.map(t=>[t.id?.toString?.()||t.slug||t.name,t])),o=a.allowedGrades||[],l=t=>!o.length||o.includes(G(t)),c=e.map(t=>{const n=t.id?.toString?.()||t._id?.toString?.()||t.slug||t.name,d=G(t.grade||t.currentGrade||t.className||"-");if(!l(d))return null;const s=i.get(n);return{id:n,slug:t.slug||C(t.name),name:t.name,grade:d,className:t.className,type:s?.type||t.type||"Universal Supports",tier:s?.tier||t.tier||"Tier 1",progress:s?.progress||t.progress||"Not Assigned",nextUpdate:s?.nextUpdate||t.nextUpdate||"Not scheduled",assignmentId:s?.assignmentId||null,profile:s?.profile||t.profile}}).filter(Boolean);return!c.length&&r.length?r:c},ce=()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}};export{_ as C,se as a,ie as b,Z as c,ne as d,de as e,Y as f,ce as g,re as h,te as i,ee as j,X as k,oe as m,G as n,ae as u};
