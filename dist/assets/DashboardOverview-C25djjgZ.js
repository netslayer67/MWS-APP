import{c as N,r as m,j as e,$ as A,x as L,w as R,a4 as D}from"./index-B1rSvVjj.js";import{S as T}from"./StudentsTable-Dhb8vXgm.js";import{C as G}from"./chevron-down-DVaBXe7n.js";import{C as I}from"./circle-check-CDMX92-w.js";import{R as V}from"./CategoricalChart-DTqJ0OnW.js";import{L as U}from"./LineChart-D5zPiFrI.js";import{C as F,X as W,Y as z,T as E}from"./CartesianChart-BKAn3MkZ.js";import{L as _}from"./Line-qCXLBAiz.js";import{C as O}from"./chevron-left-B3fXy9kp.js";import"./interventionSelection-Vcld4Os_.js";import"./eye-vvhvhBva.js";import"./ActivePoints-BuDQvKDM.js";import"./ErrorBarContext-dP0IcuSr.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],B=N("clock-4",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 6v6l-4 2",key:"imc3wl"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Y=N("clock-8",K);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Q=N("layers",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],J=N("message-square-text",X);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],P=N("user-round",Z),S=[{gradient:"from-[#6366f1] via-[#818cf8] to-[#a78bfa]",iconBg:"bg-white/20",glow:"shadow-[0_16px_40px_rgba(99,102,241,0.3)]",darkGlow:"dark:shadow-[0_16px_40px_rgba(99,102,241,0.2)]"},{gradient:"from-[#f59e0b] via-[#f97316] to-[#ef4444]",iconBg:"bg-white/20",glow:"shadow-[0_16px_40px_rgba(249,115,22,0.3)]",darkGlow:"dark:shadow-[0_16px_40px_rgba(249,115,22,0.2)]"},{gradient:"from-[#10b981] via-[#14b8a6] to-[#06b6d4]",iconBg:"bg-white/20",glow:"shadow-[0_16px_40px_rgba(20,184,166,0.3)]",darkGlow:"dark:shadow-[0_16px_40px_rgba(20,184,166,0.2)]"}],ee=1200,te=t=>1-Math.pow(1-t,4),se=t=>{const s=String(t),a=s.match(/^(\d+)(.*)$/);return a?{num:parseInt(a[1],10),suffix:a[2]||""}:{num:0,suffix:s}},C=m.memo(({value:t})=>{const{num:s,suffix:a}=se(t),[n,i]=m.useState(0),c=m.useRef(null),p=m.useRef(null),d=m.useRef(!1);return m.useEffect(()=>{if(d.current){i(s);return}if(d.current=!0,s===0){i(0);return}const r=h=>{p.current||(p.current=h);const g=h-p.current,u=Math.min(g/ee,1),f=te(u);i(Math.round(f*s)),u<1&&(c.current=requestAnimationFrame(r))};return c.current=requestAnimationFrame(r),()=>{c.current&&cancelAnimationFrame(c.current)}},[s]),e.jsxs(e.Fragment,{children:[n,a]})});C.displayName="AnimatedNumber";const ae=({statCards:t})=>e.jsx("section",{className:"grid grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:t.map((s,a)=>{const n=S[a%S.length],i=s.icon;return e.jsxs("div",{className:`group relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-br ${n.gradient} p-3.5 sm:p-5 lg:p-6 ${n.glow} ${n.darkGlow} transition-transform duration-200 hover:-translate-y-1 hover:scale-[1.02]`,"data-aos":"fade-up","data-aos-delay":50+a*40,"data-aos-duration":"500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-8 -right-8 w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-white/10 blur-xl"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-20 h-20 sm:w-28 sm:h-28 rounded-full bg-white/5 blur-lg"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(105deg, transparent 40%, rgba(255,255,255,0.18) 50%, transparent 60%)",backgroundSize:"200% 100%",animation:"mtssShimmer 1.5s ease-in-out"}}),e.jsxs("div",{className:"relative flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] lg:text-[11px] font-bold uppercase tracking-[0.25em] sm:tracking-[0.35em] text-white/80 truncate animate-[mtssSlideUp_0.5s_ease-out_both]",style:{animationDelay:`${a*100+200}ms`},children:s.label}),e.jsx("p",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-white mt-1 sm:mt-2 drop-shadow-sm animate-[mtssSlideUp_0.6s_ease-out_both]",style:{animationDelay:`${a*100+350}ms`},children:e.jsx(C,{value:s.value})}),e.jsx("p",{className:"hidden sm:block text-xs lg:text-sm text-white/75 mt-0.5 lg:mt-1 animate-[mtssSlideUp_0.5s_ease-out_both]",style:{animationDelay:`${a*100+500}ms`},children:s.sub})]}),e.jsx("span",{className:`${n.iconBg} flex-shrink-0 w-9 h-9 sm:w-11 sm:h-11 lg:w-[3.25rem] lg:h-[3.25rem] rounded-xl sm:rounded-2xl inline-flex items-center justify-center text-white animate-[mtssIconPop_0.6s_ease-out_both] group-hover:animate-[mtssIconWiggle_0.5s_ease-in-out]`,style:{animationDelay:`${a*100+400}ms`},children:e.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]},s.label)})}),re=m.memo(ae),y=10,le=({students:t,TierPill:s,ProgressBadge:a,onView:n,onUpdate:i})=>{const[c,p]=m.useState(y);m.useEffect(()=>{p(y)},[t.length]);const d=m.useMemo(()=>(t||[]).slice(0,Math.min(c,t.length)),[t,c]),r=d.length<t.length,h=t.length?Math.round(d.length/t.length*100):0;return e.jsxs("section",{className:"relative rounded-[28px] sm:rounded-[32px] overflow-hidden border border-white/40 dark:border-slate-700/60 bg-white/80 dark:bg-slate-900/70 backdrop-blur-xl shadow-[0_20px_60px_rgba(15,23,42,0.12)] dark:shadow-[0_20px_60px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:"relative px-5 py-5 sm:px-7 sm:py-6 border-b border-slate-100 dark:border-slate-800/80",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:e.jsx("div",{className:"absolute -top-12 -right-12 w-40 h-40 bg-gradient-to-bl from-[#818cf8]/10 to-transparent blur-[60px]"})}),e.jsxs("div",{className:"relative flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("p",{className:"text-[10px] sm:text-[11px] font-bold uppercase tracking-[0.3em] text-emerald-600 dark:text-emerald-400",children:"Live Roster"})]}),e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-slate-800 dark:text-white mt-1",children:"Kids on your radar today"})]}),e.jsx("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:e.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200/50 dark:border-indigo-500/20 text-xs font-semibold text-indigo-600 dark:text-indigo-300",children:[t.length," students"]})})]})]}),e.jsx("div",{className:"px-3 py-4 sm:px-5 sm:py-5 lg:px-7","data-aos":"fade-up","data-aos-delay":"120",children:e.jsx(T,{students:d,TierPill:s,ProgressBadge:a,dense:!0,showActions:!0,onView:n,onUpdate:i})}),e.jsx("div",{className:"px-5 pb-5 sm:px-7 sm:pb-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsx("div",{className:"h-1.5 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${h}%`}})}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-center text-slate-400 dark:text-slate-500 mt-1.5",children:[d.length," of ",t.length," shown"]})]}),r?e.jsxs("button",{type:"button",onClick:()=>p(g=>Math.min(t.length,g+y)),className:"group inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-sm font-semibold shadow-[0_8px_25px_rgba(99,102,241,0.3)] hover:shadow-[0_12px_35px_rgba(99,102,241,0.4)] hover:-translate-y-0.5 transition-all duration-200",children:[e.jsx("span",{children:"Show more"}),e.jsx(G,{className:"w-4 h-4 transition-transform group-hover:translate-y-0.5"})]}):t.length>0?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-300 border border-emerald-200/60 dark:border-emerald-500/20 text-sm font-medium",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),"All students loaded"]}):null]})})]})},ne=({spotlightStudent:t,spotlightProfile:s,progressUnit:a,spotlightStatus:n,weekLabel:i,history:c,TierPill:p})=>{const d=x=>{const w=Number(x);return Number.isFinite(w)?w:null},r=d(s?.baseline),h=d(s?.current),g=d(s?.target),u=r??s?.baseline??"-",f=h??s?.current??"-",j=g??s?.target??"-",l=g!=null&&h!=null?Math.max(0,g-h):"-",o=Math.min(100,Math.max(0,n||0)),b=x=>x==="-"||x===null||x===void 0?"-":`${x} ${a}`,v=t?.className||t?.class||"-",k=c?.[0]?.date||"No recent updates";return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4","data-aos":"fade-up","data-aos-delay":"80",children:[e.jsxs("div",{className:"rounded-2xl border border-sky-200/60 dark:border-sky-800/40 bg-gradient-to-br from-sky-50/90 via-white/80 to-white/70 dark:from-sky-950/40 dark:via-slate-900/40 dark:to-slate-900/30 p-4 space-y-3 shadow-inner",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:[e.jsx(P,{className:"w-4 h-4 text-sky-500"}),"Student"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/90 dark:bg-white/10 border border-white/50 text-[11px] font-semibold text-foreground dark:text-white",children:[e.jsx(Y,{className:"w-3.5 h-3.5"}),i]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsx("span",{children:"Grade"}),e.jsx("span",{className:"font-semibold text-foreground dark:text-white",children:t?.grade??"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsx("span",{children:"Class"}),e.jsx("span",{className:"font-semibold text-foreground dark:text-white",children:v})]}),e.jsxs("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsx("span",{children:"Teacher"}),e.jsx("span",{className:"font-semibold text-foreground dark:text-white",children:s.teacher??"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsx("span",{children:"Mentor"}),e.jsx("span",{className:"font-semibold text-foreground dark:text-white",children:s.mentor??"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsx("span",{children:"Tier"}),t?.tier?e.jsx(p,{tier:t.tier}):e.jsx("span",{className:"font-semibold text-foreground dark:text-white",children:"-"})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-violet-200/60 dark:border-violet-800/40 bg-gradient-to-br from-violet-50/80 via-white/80 to-white/70 dark:from-violet-950/40 dark:via-slate-900/40 dark:to-slate-900/30 p-4 space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:[e.jsx(Q,{className:"w-4 h-4 text-violet-500"}),"Intervention"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-foreground dark:text-white",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Type:"})," ",s.type??"-"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Strategy:"})," ",s.strategy??"-"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Started:"})," ",s.started??"-"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Duration:"})," ",s.duration??"-"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px] font-semibold",children:[e.jsxs("span",{className:"px-2.5 py-1 rounded-full bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-200",children:["Focus: ",s.type??"-"]}),e.jsxs("span",{className:"px-2.5 py-1 rounded-full bg-slate-100 text-slate-600 dark:bg-slate-800/50 dark:text-slate-300",children:["Last update: ",k]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-emerald-200/60 dark:border-emerald-800/40 bg-gradient-to-br from-emerald-50/80 via-white/80 to-white/70 dark:from-emerald-950/40 dark:via-slate-900/40 dark:to-slate-900/30 p-4 space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:[e.jsx(A,{className:"w-4 h-4 text-emerald-500"}),"Progress"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-foreground dark:text-white",children:[e.jsxs("div",{className:"rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-muted-foreground",children:"Baseline"}),e.jsx("p",{className:"text-base font-bold",children:b(u)})]}),e.jsxs("div",{className:"rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-muted-foreground",children:"Current"}),e.jsx("p",{className:"text-base font-bold",children:b(f)})]}),e.jsxs("div",{className:"rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-muted-foreground",children:"Target"}),e.jsx("p",{className:"text-base font-bold",children:b(j)})]}),e.jsxs("div",{className:"rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-muted-foreground",children:"Gap"}),e.jsx("p",{className:"text-base font-bold",children:l==="-"?"-":`${l} ${a}`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-muted-foreground",children:[e.jsx("span",{children:"Status"}),e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-300",children:[o,"% to target"]})]}),e.jsx("div",{className:"h-2.5 rounded-full bg-emerald-100/80 dark:bg-emerald-900/40 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 transition-all duration-500",style:{width:`${o}%`}})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-amber-200/60 dark:border-amber-800/40 bg-gradient-to-br from-amber-50/80 via-white/80 to-white/70 dark:from-amber-950/40 dark:via-slate-900/40 dark:to-slate-900/30 p-4 space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-white/60",children:[e.jsx(J,{className:"w-4 h-4 text-amber-500"}),"Recent Notes"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:c?.length?c.map((x,w)=>e.jsxs("div",{className:"rounded-xl bg-white/80 dark:bg-white/5 border border-white/40 px-3 py-2 text-xs text-foreground dark:text-white",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-semibold",children:x.date||"Recent"}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-muted-foreground",children:[e.jsx(B,{className:"w-3 h-3"}),x.score||x.value||""]})]}),e.jsx("p",{className:"mt-1 text-[12px] text-muted-foreground",children:x.notes||x.summary||x.description||"Check-in recorded"})]},`${x.date||w}-${w}`)):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No recent notes."})})]})]})},de=({chartSeries:t=[]})=>{const{latest:s,goal:a,delta:n,average:i,gap:c}=m.useMemo(()=>{const r=Array.isArray(t)?t:[];if(!r.length)return{latest:0,goal:100,delta:0,average:0,gap:100};const h=r[r.length-1],g=r[r.length-2],u=Number(h?.reading??0)||0,f=Number(h?.goal??100)||100,j=Number(g?.reading??u)||0,l=Math.round(r.reduce((o,b)=>o+(Number(b?.reading??0)||0),0)/r.length);return{latest:u,goal:f,delta:Math.round(u-j),average:l,gap:Math.max(0,f-u)}},[t]),p=n>=0?"text-emerald-600 dark:text-emerald-300":"text-rose-600 dark:text-rose-300",d=n>=0?"+":"";return e.jsxs("div",{className:"mtss-rainbow-shell rounded-3xl p-4 border border-white/40 dark:border-white/10 bg-gradient-to-br from-white/85 via-white/70 to-white/60 dark:from-white/10 dark:via-white/5 dark:to-white/5","data-aos":"fade-up","data-aos-delay":"140",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-muted-foreground",children:"Trend"}),e.jsx("p",{className:"text-sm font-semibold text-foreground dark:text-white",children:"Progress vs Goal"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Latest: ",e.jsxs("span",{className:"font-semibold text-foreground dark:text-white",children:[s,"%"]})," Â· Gap: ",e.jsxs("span",{className:"font-semibold text-foreground dark:text-white",children:[c,"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-emerald-50/80 text-emerald-600 dark:bg-emerald-900/40 dark:text-emerald-200 border border-emerald-200/50",children:["Latest ",s,"%"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-slate-100/80 text-slate-600 dark:bg-slate-800/50 dark:text-slate-200 border border-white/40",children:["Avg ",i,"%"]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-white/80 dark:bg-white/10 border border-white/40 ${p}`,children:[d,n,"%"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-amber-50/80 text-amber-600 dark:bg-amber-900/40 dark:text-amber-200 border border-amber-200/50",children:["Goal ",a,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] font-semibold text-muted-foreground mb-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary"}),"Actual"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gold"}),"Goal"]})]}),e.jsx(V,{width:"100%",height:260,children:e.jsxs(U,{data:t,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.3)"}),e.jsx(W,{dataKey:"date",stroke:"rgba(209,213,219,0.85)",tick:{fill:"rgba(148,163,184,0.85)",fontSize:11}}),e.jsx(z,{width:32,tickLine:!1,axisLine:!1,tick:{fill:"rgba(148,163,184,0.85)",fontSize:11},domain:[0,100],tickFormatter:r=>`${r}%`}),e.jsx(E,{cursor:{stroke:"rgba(99,102,241,0.4)",strokeWidth:2},formatter:(r,h)=>[`${r}%`,h==="reading"?"Actual":"Goal"],contentStyle:{borderRadius:16,border:"1px solid rgba(148,163,184,0.3)",backgroundColor:"rgba(15,23,42,0.9)",color:"#f8fafc"}}),e.jsx(_,{type:"monotone",dataKey:"reading",stroke:"hsl(var(--primary))",strokeWidth:2.6,dot:!1,activeDot:{r:4,strokeWidth:2,fill:"#fff"}}),e.jsx(_,{type:"monotone",dataKey:"goal",stroke:"hsl(var(--gold))",strokeDasharray:"4 4",strokeWidth:1.8,dot:!1})]})})]})},ie=({students:t,progressData:s,TierPill:a})=>{const[n,i]=m.useState(0);m.useEffect(()=>{i(0)},[t.length]);const c=m.useCallback(()=>{i(l=>t.length?(l+1)%t.length:0)},[t.length]),p=m.useCallback(()=>{i(l=>t.length?(l-1+t.length)%t.length:0)},[t.length]),{spotlightStudent:d,spotlightProfile:r,progressUnit:h,spotlightStatus:g,weekLabel:u,chartSeries:f,history:j}=m.useMemo(()=>{const l=t?.[n]??t?.[0]??null,o=l?.profile||{},b=o.progressUnit||(l?.type==="Behavior"?"pts":l?.type==="Attendance"?"%":"wpm"),v=o.target?Math.round(o.current/o.target*100):0,k=parseInt(o.duration,10),x=o.chart?.length?o.chart:s?.length?s:[{label:"Start",date:"Start",reading:0,goal:100}],w=x.length,M=k&&w?`Week ${Math.min(w,k)} of ${k}`:o.duration||"Weekly check-in",$=o.history||[];return{spotlightStudent:l,spotlightProfile:o,progressUnit:b,spotlightStatus:v,weekLabel:M,chartSeries:x,history:$}},[t,s,n]);return e.jsxs("section",{className:"mtss-liquid mtss-card-surface mtss-rainbow-shell p-6 space-y-6 border border-primary/10",children:[e.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/80 dark:bg-white/10 border border-white/50 text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-white/80",children:"Student Spotlight"}),e.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-indigo-500/15 via-fuchsia-500/10 to-emerald-500/10 text-[11px] font-semibold text-slate-700 dark:text-white/80 border border-white/40",children:u})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-foreground dark:text-white",children:d?.name||"Featured Student"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-xl",children:"Quickly scan assignment context, trends, and recent notes for this student."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold",children:[e.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-sky-100/80 text-sky-700 dark:bg-sky-900/40 dark:text-sky-200",children:["Grade ",d?.grade??"-"]}),d?.tier?e.jsx(a,{tier:d.tier}):e.jsx("span",{className:"px-3 py-1.5 rounded-full bg-slate-100/80 text-slate-600 dark:bg-slate-800/50 dark:text-slate-300",children:"Tier -"}),e.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-violet-100/80 text-violet-700 dark:bg-violet-900/40 dark:text-violet-200",children:["Focus: ",r.type??"-"]}),e.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-amber-100/80 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:["Mentor: ",r.mentor??"-"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-start lg:items-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/20 shadow-sm hover:-translate-y-0.5 transition",onClick:p,"aria-label":"Previous student",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("select",{className:"min-w-[220px] px-4 py-2 rounded-full bg-white/90 dark:bg-white/10 border border-white/60 dark:border-white/20 text-sm font-semibold text-foreground dark:text-white shadow-sm",value:d?.id||"",onChange:l=>{const o=t.findIndex(b=>(b.id||b._id)===l.target.value);i(o>=0?o:0)},children:t.map(l=>e.jsx("option",{value:l.id||l._id,children:l.name},l.id||l._id))}),e.jsx("button",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white/80 dark:bg-white/10 border border-white/60 dark:border-white/20 shadow-sm hover:-translate-y-0.5 transition",onClick:c,"aria-label":"Next student",children:e.jsx(L,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/75 dark:bg-white/10 border border-white/50 text-xs font-semibold text-foreground dark:text-white shadow-sm",children:[e.jsx(R,{className:"w-4 h-4 text-primary"}),t.length," in roster"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-emerald-400/20 via-emerald-400/10 to-cyan-400/15 text-xs font-semibold uppercase tracking-[0.3em] text-emerald-700 dark:text-emerald-200 border border-emerald-200/60 dark:border-emerald-500/30",children:[e.jsx(D,{className:"w-4 h-4"}),g||0,"% to target"]})]})]})]}),e.jsx(ne,{spotlightStudent:d,spotlightProfile:r,progressUnit:h,spotlightStatus:g,weekLabel:u,history:j,TierPill:a}),e.jsx(de,{chartSeries:f})]})},oe=m.memo(({statCards:t,students:s,progressData:a,TierPill:n,ProgressBadge:i,onView:c,onUpdate:p})=>e.jsxs("div",{className:"space-y-8 mtss-theme",children:[e.jsx(re,{statCards:t}),e.jsx(le,{students:s,TierPill:n,ProgressBadge:i,onView:c,onUpdate:p}),e.jsx(ie,{students:s,progressData:a,TierPill:n})]}));oe.displayName="DashboardOverview";export{oe as default};
